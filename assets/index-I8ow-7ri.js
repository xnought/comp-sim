var ta=Object.defineProperty;var na=(t,e,n)=>e in t?ta(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Bn=(t,e,n)=>na(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function $e(){}function co(t){return t()}function Yr(){return Object.create(null)}function Sn(t){t.forEach(co)}function ho(t){return typeof t=="function"}function ht(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ra(t){return Object.keys(t).length===0}function w(t,e){t.appendChild(e)}function Le(t,e,n){t.insertBefore(e,n||null)}function Te(t){t.parentNode&&t.parentNode.removeChild(t)}function ia(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function S(t){return document.createElement(t)}function te(t){return document.createTextNode(t)}function A(){return te(" ")}function In(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function tt(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function oa(t){return Array.from(t.childNodes)}function Nt(t,e){e=""+e,t.data!==e&&(t.data=e)}function I(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}let kr;function jt(t){kr=t}const _t=[],Qn=[];let bt=[];const Xr=[],sa=Promise.resolve();let Jn=!1;function aa(){Jn||(Jn=!0,sa.then(fo))}function er(t){bt.push(t)}const Dn=new Set;let gt=0;function fo(){if(gt!==0)return;const t=kr;do{try{for(;gt<_t.length;){const e=_t[gt];gt++,jt(e),la(e.$$)}}catch(e){throw _t.length=0,gt=0,e}for(jt(null),_t.length=0,gt=0;Qn.length;)Qn.pop()();for(let e=0;e<bt.length;e+=1){const n=bt[e];Dn.has(n)||(Dn.add(n),n())}bt.length=0}while(_t.length);for(;Xr.length;)Xr.pop()();Jn=!1,Dn.clear(),jt(t)}function la(t){if(t.fragment!==null){t.update(),Sn(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(er)}}function ua(t){const e=[],n=[];bt.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),bt=e}const dn=new Set;let ca;function qe(t,e){t&&t.i&&(dn.delete(t),t.i(e))}function Qe(t,e,n,r){if(t&&t.o){if(dn.has(t))return;dn.add(t),ca.c.push(()=>{dn.delete(t)}),t.o(e)}}function Ur(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Je(t){t&&t.c()}function Ye(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),er(()=>{const o=t.$$.on_mount.map(co).filter(ho);t.$$.on_destroy?t.$$.on_destroy.push(...o):Sn(o),t.$$.on_mount=[]}),i.forEach(er)}function Xe(t,e){const n=t.$$;n.fragment!==null&&(ua(n.after_update),Sn(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ha(t,e){t.$$.dirty[0]===-1&&(_t.push(t),aa(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ft(t,e,n,r,i,o,s=null,a=[-1]){const l=kr;jt(t);const u=t.$$={fragment:null,ctx:[],props:o,update:$e,not_equal:i,bound:Yr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Yr(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};s&&s(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(h,f,...d)=>{const g=d.length?d[0]:f;return u.ctx&&i(u.ctx[h],u.ctx[h]=g)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](g),c&&ha(t,h)),f}):[],u.update(),c=!0,Sn(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const h=oa(e.target);u.fragment&&u.fragment.l(h),h.forEach(Te)}else u.fragment&&u.fragment.c();e.intro&&qe(t.$$.fragment),Ye(t,e.target,e.anchor),fo()}jt(l)}let dt=class{constructor(){Bn(this,"$$");Bn(this,"$$set")}$destroy(){Xe(this,1),this.$destroy=$e}$on(e,n){if(!ho(n))return $e;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!ra(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};const fa="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(fa);class zt{constructor(){this.in=[],this.out=[],this.data=0,this.name="switch",this.on=!0}switchOn(){this.on=!0}switchOff(){this.on=!1}}class vt{constructor(){this.in=[],this.out=[],this.data=0,this.name="power"}}class Er{constructor(){this.in=[],this.out=[],this.data=0,this.name="signal"}}class kn{constructor(){this.in=[],this.out=[],this.data=0,this.name="wire"}}class xr{constructor(e,n,r){this.source=e,this.signal=n,this.other=r}resetNodeIds(){this.signal.nodeId=void 0;for(const e of this.other)e.nodeId=void 0;this.source.nodeId=void 0}reset(){this.signal.data=0,this.signal.nodeId=void 0;for(const e of this.other)e.data=0,e.closest=1/0,e.nodeId=void 0;this.source.nodeId=void 0}precomputeDistances(){function e(n){if(n instanceof vt)return 0;if(n instanceof zt&&!n.on||n.out.length===0)return 1/0;let r=[];for(const i of n.out)r.push(e(i));return(n instanceof zt?0:1)+Math.min(...r)}for(const n of this.other)n.closest=e(n);this.signal.closest=e(this.signal)}connect(e,n){e.out.push(n),n.in.push(e)}simulate(){function e(n){if(n.in.length===0||n instanceof zt&&!n.on||n.out.length===0)return;n.data=1;let r=n.out[0];for(const i of n.out)i instanceof vt||i.closest<=r.closest&&(r=i);r instanceof vt||e(r)}this.reset(),this.precomputeDistances(),e(this.source)}}function da(){const t=new vt,e=new Er,n=new kn,r=new xr(t,e,[n]);return r.connect(t,n),r.connect(n,e),r.simulate(),r}function pa(){const t=new vt,e=new Er,n=new kn,r=new zt,i=new kn,o=new xr(t,e,[n,r,i]);return o.connect(t,r),o.connect(r,n),o.connect(n,e),o.connect(e,i),o.connect(i,t),r.switchOn(),o.simulate(),o}function ga(){const t=new vt,e=new Er,n=Array(7).fill(0).map(()=>new kn),r=new zt,i=new xr(t,e,[...n,r]);return i.connect(t,n[0]),i.connect(n[0],n[1]),i.connect(n[1],e),i.connect(e,n[2]),i.connect(n[2],n[3]),i.connect(n[3],n[4]),i.connect(n[4],n[5]),i.connect(n[5],t),i.connect(n[0],n[6]),i.connect(n[6],r),i.connect(r,n[4]),r.switchOn(),i.simulate(),i}function ma(t){let e,n,r,i,o,s,a,l,u,c,h,f,d,g,_,E,$,k,y,m,b,N,v,O,D,z=t[0]?"|":"/",U,W,C,M,R,K,fe,de,_e,se,T,F,q,Q,pe,ue,ge,ve,Ve,it;return{c(){e=S("div"),n=S("div"),n.textContent="+power-",r=A(),i=S("span"),o=S("span"),o.textContent="-------------",s=S("span"),s.textContent="------------",a=te("Light Bulb"),l=A(),u=S("div"),c=S("div"),h=S("div"),h.textContent="|",f=A(),d=S("div"),g=te("|"),_=A(),E=S("div"),$=te("|"),k=A(),y=S("div"),m=S("div"),m.textContent="|",b=A(),N=S("div"),v=S("div"),O=S("button"),O.textContent="switch",D=A(),U=te(z),W=A(),C=S("div"),M=te("|"),R=A(),K=S("div"),fe=S("div"),fe.textContent="|",de=A(),_e=S("div"),se=te("|"),T=A(),F=S("div"),q=te("|"),Q=A(),pe=S("div"),ue=S("span"),ue.textContent="---------------------",ge=S("span"),ve=te("--------------------"),I(o,"color","yellow"),I(i,"color",t[0]?"rgba(255,255,255,0.5)":"yellow"),I(e,"display","flex"),I(e,"width","500px"),I(h,"color","yellow"),I(d,"color",t[0]?"yellow":"rgba(255,255,255,0.5)"),I(E,"color",t[0]?"rgba(255,255,255,0.5)":"yellow"),tt(c,"class","w svelte-1c1c3yo"),I(m,"color","yellow"),I(O,"position","absolute"),I(O,"left","-70px"),I(v,"position","relative"),I(N,"color",t[0]?"yellow":"rgba(255,255,255,0.5)"),I(C,"color",t[0]?"rgba(255,255,255,0.5)":"yellow"),tt(y,"class","w svelte-1c1c3yo"),I(fe,"color","yellow"),I(_e,"color",t[0]?"yellow":"rgba(255,255,255,0.5)"),I(F,"color",t[0]?"rgba(255,255,255,0.5)":"yellow"),tt(K,"class","w svelte-1c1c3yo"),I(ue,"color","yellow"),I(ge,"color",t[0]?"rgba(255,255,255,0.5)":"yellow"),I(u,"width","300px")},m(J,ce){Le(J,e,ce),w(e,n),w(e,r),w(e,i),w(i,o),w(i,s),w(i,a),Le(J,l,ce),Le(J,u,ce),w(u,c),w(c,h),w(c,f),w(c,d),w(d,g),w(c,_),w(c,E),w(E,$),w(u,k),w(u,y),w(y,m),w(y,b),w(y,N),w(N,v),w(v,O),w(v,D),w(v,U),w(y,W),w(y,C),w(C,M),w(u,R),w(u,K),w(K,fe),w(K,de),w(K,_e),w(_e,se),w(K,T),w(K,F),w(F,q),w(u,Q),w(u,pe),w(pe,ue),w(pe,ge),w(ge,ve),Ve||(it=In(O,"click",t[1]),Ve=!0)},p(J,[ce]){ce&1&&I(i,"color",J[0]?"rgba(255,255,255,0.5)":"yellow"),ce&1&&I(d,"color",J[0]?"yellow":"rgba(255,255,255,0.5)"),ce&1&&I(E,"color",J[0]?"rgba(255,255,255,0.5)":"yellow"),ce&1&&z!==(z=J[0]?"|":"/")&&Nt(U,z),ce&1&&I(N,"color",J[0]?"yellow":"rgba(255,255,255,0.5)"),ce&1&&I(C,"color",J[0]?"rgba(255,255,255,0.5)":"yellow"),ce&1&&I(_e,"color",J[0]?"yellow":"rgba(255,255,255,0.5)"),ce&1&&I(F,"color",J[0]?"rgba(255,255,255,0.5)":"yellow"),ce&1&&I(ge,"color",J[0]?"rgba(255,255,255,0.5)":"yellow")},i:$e,o:$e,d(J){J&&(Te(e),Te(l),Te(u)),Ve=!1,it()}}}function wa(t,e,n){let r=!1;return[r,()=>n(0,r=!r)]}class _a extends dt{constructor(e){super(),ft(this,e,wa,ma,ht,{})}}function ya(t){let e,n,r,i,o,s=t[0]?"on":"off",a,l,u,c,h,f;return{c(){e=S("div"),n=S("div"),r=S("button"),r.textContent="power switch",i=A(),o=S("span"),a=te(s),l=A(),u=S("span"),c=te("-----------------------------Light Bulb"),I(o,"background",t[0]?"steelblue":"red"),I(u,"color",t[0]?"yellow":"rgba(255,255,255,0.5)"),I(e,"display","flex"),I(e,"width","500px")},m(d,g){Le(d,e,g),w(e,n),w(n,r),w(n,i),w(n,o),w(o,a),w(e,l),w(e,u),w(u,c),h||(f=In(r,"click",t[1]),h=!0)},p(d,[g]){g&1&&s!==(s=d[0]?"on":"off")&&Nt(a,s),g&1&&I(o,"background",d[0]?"steelblue":"red"),g&1&&I(u,"color",d[0]?"yellow":"rgba(255,255,255,0.5)")},i:$e,o:$e,d(d){d&&Te(e),h=!1,f()}}}function ba(t,e,n){let r=!1;return[r,()=>n(0,r=!r)]}class va extends dt{constructor(e){super(),ft(this,e,ba,ya,ht,{})}}function ka(t){let e,n,r,i,o,s=t[0]?"on":"off",a,l,u,c,h,f,d,g;return{c(){e=S("div"),n=S("div"),r=S("button"),r.textContent="power switch",i=A(),o=S("span"),a=te(s),l=A(),u=S("span"),c=S("div"),c.textContent="-----------------------------Light Bulb",h=A(),f=S("div"),f.textContent="<-----------------------------|",I(o,"background",t[0]?"steelblue":"red"),I(u,"color",t[0]?"yellow":"rgba(255,255,255,0.5)"),I(e,"display","flex"),I(e,"width","500px")},m(_,E){Le(_,e,E),w(e,n),w(n,r),w(n,i),w(n,o),w(o,a),w(e,l),w(e,u),w(u,c),w(u,h),w(u,f),d||(g=In(r,"click",t[1]),d=!0)},p(_,[E]){E&1&&s!==(s=_[0]?"on":"off")&&Nt(a,s),E&1&&I(o,"background",_[0]?"steelblue":"red"),E&1&&I(u,"color",_[0]?"yellow":"rgba(255,255,255,0.5)")},i:$e,o:$e,d(_){_&&Te(e),d=!1,g()}}}function Ea(t,e,n){let r=!1;return[r,()=>n(0,r=!r)]}class xa extends dt{constructor(e){super(),ft(this,e,Ea,ka,ht,{})}}var Ma=Object.defineProperty,Na=(t,e,n)=>e in t?Ma(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,P=(t,e,n)=>Na(t,typeof e!="symbol"?e+"":e,n);const Ae={black:"#000000",white:"#ffffff",foreground:{blue:"#0066CC",red:"#E30000",orange:"#BF4800",yellow:"#D08B00",green:"#008009",purple:"#6D56D6",gray:"#1D1D1F",graySecondary:"#6E6E73",graySecondaryAlt:"#515154",grayTertiary:"#86868B"},background:{gray:"rgb(250, 250, 250)",darkGray:"rgb(51,51,51)"}},Jt={family:"SF Mono, ui-monospace, monospace",weight:{regular:200,semibold:500,bold:600}},Ca={y:8,x:4},Ta=Object.freeze(Object.defineProperty({__proto__:null,colors:Ae,font:Jt,spacing:Ca},Symbol.toStringTag,{value:"Module"}));let tr=class Bt{constructor(e,n,r){P(this,"x"),P(this,"y"),P(this,"k"),this.x=e,this.y=n,this.k=r}static identity(){return new Bt(0,0,1)}translate(e,n){return e===0&&n===0?this:new Bt(this.x+this.k*e,this.y+this.k*n,this.k)}scale(e){return e===1?this:new Bt(this.x,this.y,this.k*e)}apply(e,n){return{x:e*this.k+this.x,y:n*this.k+this.y}}inverse(){return Bt.identity().scale(1/this.k).translate(-this.x,-this.y)}toString(){return`translate(${this.x},${this.y}) scale(${this.k})`}};var $a={value:()=>{}};function Mr(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new pn(n)}function pn(t){this._=t}function Sa(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}pn.prototype=Mr.prototype={constructor:pn,on:function(t,e){var n=this._,r=Sa(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=Ia(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=Kr(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Kr(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new pn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Ia(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Kr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=$a,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var nr="http://www.w3.org/1999/xhtml";const Zr={svg:"http://www.w3.org/2000/svg",xhtml:nr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function On(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Zr.hasOwnProperty(e)?{space:Zr[e],local:t}:t}function Oa(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===nr&&e.documentElement.namespaceURI===nr?e.createElement(t):e.createElementNS(n,t)}}function Pa(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function po(t){var e=On(t);return(e.local?Pa:Oa)(e)}function La(){}function Nr(t){return t==null?La:function(){return this.querySelector(t)}}function Aa(t){typeof t!="function"&&(t=Nr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),l,u,c=0;c<s;++c)(l=o[c])&&(u=t.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Se(r,this._parents)}function Ra(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ba(){return[]}function go(t){return t==null?Ba:function(){return this.querySelectorAll(t)}}function Da(t){return function(){return Ra(t.apply(this,arguments))}}function Fa(t){typeof t=="function"?t=Da(t):t=go(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(r.push(t.call(l,l.__data__,u,s)),i.push(l));return new Se(r,i)}function mo(t){return function(){return this.matches(t)}}function wo(t){return function(e){return e.matches(t)}}var Va=Array.prototype.find;function Wa(t){return function(){return Va.call(this.children,t)}}function ja(){return this.firstElementChild}function za(t){return this.select(t==null?ja:Wa(typeof t=="function"?t:wo(t)))}var Ga=Array.prototype.filter;function Ha(){return Array.from(this.children)}function qa(t){return function(){return Ga.call(this.children,t)}}function Ya(t){return this.selectAll(t==null?Ha:qa(typeof t=="function"?t:wo(t)))}function Xa(t){typeof t!="function"&&(t=mo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&a.push(l);return new Se(r,this._parents)}function _o(t){return new Array(t.length)}function Ua(){return new Se(this._enter||this._groups.map(_o),this._parents)}function En(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}En.prototype={constructor:En,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ka(t){return function(){return t}}function Za(t,e,n,r,i,o){for(var s=0,a,l=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new En(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function Qa(t,e,n,r,i,o,s){var a,l,u=new Map,c=e.length,h=o.length,f=new Array(c),d;for(a=0;a<c;++a)(l=e[a])&&(f[a]=d=s.call(l,l.__data__,a,e)+"",u.has(d)?i[a]=l:u.set(d,l));for(a=0;a<h;++a)d=s.call(t,o[a],a,o)+"",(l=u.get(d))?(r[a]=l,l.__data__=o[a],u.delete(d)):n[a]=new En(t,o[a]);for(a=0;a<c;++a)(l=e[a])&&u.get(f[a])===l&&(i[a]=l)}function Ja(t){return t.__data__}function el(t,e){if(!arguments.length)return Array.from(this,Ja);var n=e?Qa:Za,r=this._parents,i=this._groups;typeof t!="function"&&(t=Ka(t));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],h=i[u],f=h.length,d=tl(t.call(c,c&&c.__data__,u,r)),g=d.length,_=a[u]=new Array(g),E=s[u]=new Array(g),$=l[u]=new Array(f);n(c,h,_,E,$,d,e);for(var k=0,y=0,m,b;k<g;++k)if(m=_[k]){for(k>=y&&(y=k+1);!(b=E[y])&&++y<g;);m._next=b||null}}return s=new Se(s,r),s._enter=a,s._exit=l,s}function tl(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function nl(){return new Se(this._exit||this._groups.map(_o),this._parents)}function rl(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function il(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var u=n[l],c=r[l],h=u.length,f=a[l]=new Array(h),d,g=0;g<h;++g)(d=u[g]||c[g])&&(f[g]=d);for(;l<i;++l)a[l]=n[l];return new Se(a,this._parents)}function ol(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function sl(t){t||(t=al);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(e)}return new Se(i,this._parents).order()}function al(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ll(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ul(){return Array.from(this)}function cl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function hl(){let t=0;for(const e of this)++t;return t}function fl(){return!this.node()}function dl(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function pl(t){return function(){this.removeAttribute(t)}}function gl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ml(t,e){return function(){this.setAttribute(t,e)}}function wl(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function _l(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function yl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function bl(t,e){var n=On(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?gl:pl:typeof e=="function"?n.local?yl:_l:n.local?wl:ml)(n,e))}function yo(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function vl(t){return function(){this.style.removeProperty(t)}}function kl(t,e,n){return function(){this.style.setProperty(t,e,n)}}function El(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function xl(t,e,n){return arguments.length>1?this.each((e==null?vl:typeof e=="function"?El:kl)(t,e,n??"")):Ct(this.node(),t)}function Ct(t,e){return t.style.getPropertyValue(e)||yo(t).getComputedStyle(t,null).getPropertyValue(e)}function Ml(t){return function(){delete this[t]}}function Nl(t,e){return function(){this[t]=e}}function Cl(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Tl(t,e){return arguments.length>1?this.each((e==null?Ml:typeof e=="function"?Cl:Nl)(t,e)):this.node()[t]}function bo(t){return t.trim().split(/^|\s+/)}function Cr(t){return t.classList||new vo(t)}function vo(t){this._node=t,this._names=bo(t.getAttribute("class")||"")}vo.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ko(t,e){for(var n=Cr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Eo(t,e){for(var n=Cr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function $l(t){return function(){ko(this,t)}}function Sl(t){return function(){Eo(this,t)}}function Il(t,e){return function(){(e.apply(this,arguments)?ko:Eo)(this,t)}}function Ol(t,e){var n=bo(t+"");if(arguments.length<2){for(var r=Cr(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Il:e?$l:Sl)(n,e))}function Pl(){this.textContent=""}function Ll(t){return function(){this.textContent=t}}function Al(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Rl(t){return arguments.length?this.each(t==null?Pl:(typeof t=="function"?Al:Ll)(t)):this.node().textContent}function Bl(){this.innerHTML=""}function Dl(t){return function(){this.innerHTML=t}}function Fl(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Vl(t){return arguments.length?this.each(t==null?Bl:(typeof t=="function"?Fl:Dl)(t)):this.node().innerHTML}function Wl(){this.nextSibling&&this.parentNode.appendChild(this)}function jl(){return this.each(Wl)}function zl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Gl(){return this.each(zl)}function Hl(t){var e=typeof t=="function"?t:po(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ql(){return null}function Yl(t,e){var n=typeof t=="function"?t:po(t),r=e==null?ql:typeof e=="function"?e:Nr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Xl(){var t=this.parentNode;t&&t.removeChild(this)}function Ul(){return this.each(Xl)}function Kl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Zl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ql(t){return this.select(t?Zl:Kl)}function Jl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function eu(t){return function(e){t.call(this,e,this.__data__)}}function tu(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function nu(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function ru(t,e,n){return function(){var r=this.__on,i,o=eu(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function iu(t,e,n){var r=tu(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=e?ru:nu,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function xo(t,e,n){var r=yo(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ou(t,e){return function(){return xo(this,t,e)}}function su(t,e){return function(){return xo(this,t,e.apply(this,arguments))}}function au(t,e){return this.each((typeof e=="function"?su:ou)(t,e))}function*lu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Mo=[null];function Se(t,e){this._groups=t,this._parents=e}function en(){return new Se([[document.documentElement]],Mo)}function uu(){return this}Se.prototype=en.prototype={constructor:Se,select:Aa,selectAll:Fa,selectChild:za,selectChildren:Ya,filter:Xa,data:el,enter:Ua,exit:nl,join:rl,merge:il,selection:uu,order:ol,sort:sl,call:ll,nodes:ul,node:cl,size:hl,empty:fl,each:dl,attr:bl,style:xl,property:Tl,classed:Ol,text:Rl,html:Vl,raise:jl,lower:Gl,append:Hl,insert:Yl,remove:Ul,clone:Ql,datum:Jl,on:iu,dispatch:au,[Symbol.iterator]:lu};function Ht(t){return typeof t=="string"?new Se([[document.querySelector(t)]],[document.documentElement]):new Se([[t]],Mo)}function cu(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Qr(t,e){if(t=cu(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const hu={passive:!1},qt={capture:!0,passive:!1};function Fn(t){t.stopImmediatePropagation()}function kt(t){t.preventDefault(),t.stopImmediatePropagation()}function fu(t){var e=t.document.documentElement,n=Ht(t).on("dragstart.drag",kt,qt);"onselectstart"in e?n.on("selectstart.drag",kt,qt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function du(t,e){var n=t.document.documentElement,r=Ht(t).on("dragstart.drag",null);e&&(r.on("click.drag",kt,qt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const sn=t=>()=>t;function rr(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}rr.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function pu(t){return!t.ctrlKey&&!t.button}function gu(){return this.parentNode}function mu(t,e){return e??{x:t.x,y:t.y}}function wu(){return navigator.maxTouchPoints||"ontouchstart"in this}function _u(){var t=pu,e=gu,n=mu,r=wu,i={},o=Mr("start","drag","end"),s=0,a,l,u,c,h=0;function f(m){m.on("mousedown.drag",d).filter(r).on("touchstart.drag",E).on("touchmove.drag",$,hu).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(m,b){if(!(c||!t.call(this,m,b))){var N=y(this,e.call(this,m,b),m,b,"mouse");N&&(Ht(m.view).on("mousemove.drag",g,qt).on("mouseup.drag",_,qt),fu(m.view),Fn(m),u=!1,a=m.clientX,l=m.clientY,N("start",m))}}function g(m){if(kt(m),!u){var b=m.clientX-a,N=m.clientY-l;u=b*b+N*N>h}i.mouse("drag",m)}function _(m){Ht(m.view).on("mousemove.drag mouseup.drag",null),du(m.view,u),kt(m),i.mouse("end",m)}function E(m,b){if(t.call(this,m,b)){var N=m.changedTouches,v=e.call(this,m,b),O=N.length,D,z;for(D=0;D<O;++D)(z=y(this,v,m,b,N[D].identifier,N[D]))&&(Fn(m),z("start",m,N[D]))}}function $(m){var b=m.changedTouches,N=b.length,v,O;for(v=0;v<N;++v)(O=i[b[v].identifier])&&(kt(m),O("drag",m,b[v]))}function k(m){var b=m.changedTouches,N=b.length,v,O;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),v=0;v<N;++v)(O=i[b[v].identifier])&&(Fn(m),O("end",m,b[v]))}function y(m,b,N,v,O,D){var z=o.copy(),U=Qr(D||N,b),W,C,M;if((M=n.call(m,new rr("beforestart",{sourceEvent:N,target:f,identifier:O,active:s,x:U[0],y:U[1],dx:0,dy:0,dispatch:z}),v))!=null)return W=M.x-U[0]||0,C=M.y-U[1]||0,function R(K,fe,de){var _e=U,se;switch(K){case"start":i[O]=R,se=s++;break;case"end":delete i[O],--s;case"drag":U=Qr(de||fe,b),se=s;break}z.call(K,m,new rr(K,{sourceEvent:fe,subject:M,target:f,identifier:O,active:se,x:U[0]+W,y:U[1]+C,dx:U[0]-_e[0],dy:U[1]-_e[1],dispatch:z}),v)}}return f.filter=function(m){return arguments.length?(t=typeof m=="function"?m:sn(!!m),f):t},f.container=function(m){return arguments.length?(e=typeof m=="function"?m:sn(m),f):e},f.subject=function(m){return arguments.length?(n=typeof m=="function"?m:sn(m),f):n},f.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:sn(!!m),f):r},f.on=function(){var m=o.on.apply(o,arguments);return m===o?f:m},f.clickDistance=function(m){return arguments.length?(h=(m=+m)*m,f):Math.sqrt(h)},f}function Tr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function No(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function tn(){}var Yt=.7,xn=1/Yt,Et="\\s*([+-]?\\d+)\\s*",Xt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",We="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yu=/^#([0-9a-f]{3,8})$/,bu=new RegExp(`^rgb\\(${Et},${Et},${Et}\\)$`),vu=new RegExp(`^rgb\\(${We},${We},${We}\\)$`),ku=new RegExp(`^rgba\\(${Et},${Et},${Et},${Xt}\\)$`),Eu=new RegExp(`^rgba\\(${We},${We},${We},${Xt}\\)$`),xu=new RegExp(`^hsl\\(${Xt},${We},${We}\\)$`),Mu=new RegExp(`^hsla\\(${Xt},${We},${We},${Xt}\\)$`),Jr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tr(tn,Ut,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ei,formatHex:ei,formatHex8:Nu,formatHsl:Cu,formatRgb:ti,toString:ti});function ei(){return this.rgb().formatHex()}function Nu(){return this.rgb().formatHex8()}function Cu(){return Co(this).formatHsl()}function ti(){return this.rgb().formatRgb()}function Ut(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=yu.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ni(e):n===3?new Ee(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?an(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?an(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bu.exec(t))?new Ee(e[1],e[2],e[3],1):(e=vu.exec(t))?new Ee(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ku.exec(t))?an(e[1],e[2],e[3],e[4]):(e=Eu.exec(t))?an(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=xu.exec(t))?oi(e[1],e[2]/100,e[3]/100,1):(e=Mu.exec(t))?oi(e[1],e[2]/100,e[3]/100,e[4]):Jr.hasOwnProperty(t)?ni(Jr[t]):t==="transparent"?new Ee(NaN,NaN,NaN,0):null}function ni(t){return new Ee(t>>16&255,t>>8&255,t&255,1)}function an(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ee(t,e,n,r)}function Tu(t){return t instanceof tn||(t=Ut(t)),t?(t=t.rgb(),new Ee(t.r,t.g,t.b,t.opacity)):new Ee}function ir(t,e,n,r){return arguments.length===1?Tu(t):new Ee(t,e,n,r??1)}function Ee(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Tr(Ee,ir,No(tn,{brighter(t){return t=t==null?xn:Math.pow(xn,t),new Ee(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Yt:Math.pow(Yt,t),new Ee(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ee(ut(this.r),ut(this.g),ut(this.b),Mn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ri,formatHex:ri,formatHex8:$u,formatRgb:ii,toString:ii}));function ri(){return`#${at(this.r)}${at(this.g)}${at(this.b)}`}function $u(){return`#${at(this.r)}${at(this.g)}${at(this.b)}${at((isNaN(this.opacity)?1:this.opacity)*255)}`}function ii(){const t=Mn(this.opacity);return`${t===1?"rgb(":"rgba("}${ut(this.r)}, ${ut(this.g)}, ${ut(this.b)}${t===1?")":`, ${t})`}`}function Mn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ut(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function at(t){return t=ut(t),(t<16?"0":"")+t.toString(16)}function oi(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Be(t,e,n,r)}function Co(t){if(t instanceof Be)return new Be(t.h,t.s,t.l,t.opacity);if(t instanceof tn||(t=Ut(t)),!t)return new Be;if(t instanceof Be)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new Be(s,a,l,t.opacity)}function Su(t,e,n,r){return arguments.length===1?Co(t):new Be(t,e,n,r??1)}function Be(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Tr(Be,Su,No(tn,{brighter(t){return t=t==null?xn:Math.pow(xn,t),new Be(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Yt:Math.pow(Yt,t),new Be(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ee(Vn(t>=240?t-240:t+120,i,r),Vn(t,i,r),Vn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Be(si(this.h),ln(this.s),ln(this.l),Mn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Mn(this.opacity);return`${t===1?"hsl(":"hsla("}${si(this.h)}, ${ln(this.s)*100}%, ${ln(this.l)*100}%${t===1?")":`, ${t})`}`}}));function si(t){return t=(t||0)%360,t<0?t+360:t}function ln(t){return Math.max(0,Math.min(1,t||0))}function Vn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const To=t=>()=>t;function Iu(t,e){return function(n){return t+n*e}}function Ou(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Pu(t){return(t=+t)==1?$o:function(e,n){return n-e?Ou(e,n,t):To(isNaN(e)?n:e)}}function $o(t,e){var n=e-t;return n?Iu(t,n):To(isNaN(t)?e:t)}const ai=function t(e){var n=Pu(e);function r(i,o){var s=n((i=ir(i)).r,(o=ir(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=$o(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function et(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var or=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wn=new RegExp(or.source,"g");function Lu(t){return function(){return t}}function Au(t){return function(e){return t(e)+""}}function Ru(t,e){var n=or.lastIndex=Wn.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(r=or.exec(t))&&(i=Wn.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:et(r,i)})),n=Wn.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Au(l[0].x):Lu(e):(e=l.length,function(u){for(var c=0,h;c<e;++c)a[(h=l[c]).i]=h.x(u);return a.join("")})}var li=180/Math.PI,sr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function So(t,e,n,r,i,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*li,skewX:Math.atan(l)*li,scaleX:s,scaleY:a}}var un;function Bu(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?sr:So(e.a,e.b,e.c,e.d,e.e,e.f)}function Du(t){return t==null||(un||(un=document.createElementNS("http://www.w3.org/2000/svg","g")),un.setAttribute("transform",t),!(t=un.transform.baseVal.consolidate()))?sr:(t=t.matrix,So(t.a,t.b,t.c,t.d,t.e,t.f))}function Io(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,h,f,d,g){if(u!==h||c!==f){var _=d.push("translate(",null,e,null,n);g.push({i:_-4,x:et(u,h)},{i:_-2,x:et(c,f)})}else(h||f)&&d.push("translate("+h+e+f+n)}function s(u,c,h,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:et(u,c)})):c&&h.push(i(h)+"rotate("+c+r)}function a(u,c,h,f){u!==c?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:et(u,c)}):c&&h.push(i(h)+"skewX("+c+r)}function l(u,c,h,f,d,g){if(u!==h||c!==f){var _=d.push(i(d)+"scale(",null,",",null,")");g.push({i:_-4,x:et(u,h)},{i:_-2,x:et(c,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(u,c){var h=[],f=[];return u=t(u),c=t(c),o(u.translateX,u.translateY,c.translateX,c.translateY,h,f),s(u.rotate,c.rotate,h,f),a(u.skewX,c.skewX,h,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,f),u=c=null,function(d){for(var g=-1,_=f.length,E;++g<_;)h[(E=f[g]).i]=E.x(d);return h.join("")}}}var Fu=Io(Bu,"px, ","px)","deg)"),Vu=Io(Du,", ",")",")"),Tt=0,Dt=0,Rt=0,Oo=1e3,Nn,Ft,Cn=0,ct=0,Pn=0,Kt=typeof performance=="object"&&performance.now?performance:Date,Po=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $r(){return ct||(Po(Wu),ct=Kt.now()+Pn)}function Wu(){ct=0}function Tn(){this._call=this._time=this._next=null}Tn.prototype=Lo.prototype={constructor:Tn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?$r():+n)+(e==null?0:+e),!this._next&&Ft!==this&&(Ft?Ft._next=this:Nn=this,Ft=this),this._call=t,this._time=n,ar()},stop:function(){this._call&&(this._call=null,this._time=1/0,ar())}};function Lo(t,e,n){var r=new Tn;return r.restart(t,e,n),r}function ju(){$r(),++Tt;for(var t=Nn,e;t;)(e=ct-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Tt}function ui(){ct=(Cn=Kt.now())+Pn,Tt=Dt=0;try{ju()}finally{Tt=0,Gu(),ct=0}}function zu(){var t=Kt.now(),e=t-Cn;e>Oo&&(Pn-=e,Cn=t)}function Gu(){for(var t,e=Nn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Nn=n);Ft=t,ar(r)}function ar(t){if(!Tt){Dt&&(Dt=clearTimeout(Dt));var e=t-ct;e>24?(t<1/0&&(Dt=setTimeout(ui,t-Kt.now()-Pn)),Rt&&(Rt=clearInterval(Rt))):(Rt||(Cn=Kt.now(),Rt=setInterval(zu,Oo)),Tt=1,Po(ui))}}function ci(t,e,n){var r=new Tn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Hu=Mr("start","end","cancel","interrupt"),qu=[],Ao=0,hi=1,lr=2,gn=3,fi=4,ur=5,mn=6;function Ln(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Yu(t,n,{name:e,index:r,group:i,on:Hu,tween:qu,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ao})}function Sr(t,e){var n=De(t,e);if(n.state>Ao)throw new Error("too late; already scheduled");return n}function je(t,e){var n=De(t,e);if(n.state>gn)throw new Error("too late; already running");return n}function De(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Yu(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Lo(o,0,n.time);function o(u){n.state=hi,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,h,f,d;if(n.state!==hi)return l();for(c in r)if(d=r[c],d.name===n.name){if(d.state===gn)return ci(s);d.state===fi?(d.state=mn,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=mn,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(ci(function(){n.state===gn&&(n.state=fi,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=lr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===lr){for(n.state=gn,i=new Array(f=n.tween.length),c=0,h=-1;c<f;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=ur,1),h=-1,f=i.length;++h<f;)i[h].call(t,c);n.state===ur&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=mn,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Xu(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>lr&&r.state<ur,r.state=mn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function Uu(t){return this.each(function(){Xu(this,t)})}function Ku(t,e){var n,r;return function(){var i=je(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Zu(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=je(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=a;break}l===u&&i.push(a)}o.tween=i}}function Qu(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=De(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?Ku:Zu)(n,t,e))}function Ir(t,e,n){var r=t._id;return t.each(function(){var i=je(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return De(i,r).value[e]}}function Ro(t,e){var n;return(typeof e=="number"?et:e instanceof Ut?ai:(n=Ut(e))?(e=n,ai):Ru)(t,e)}function Ju(t){return function(){this.removeAttribute(t)}}function ec(t){return function(){this.removeAttributeNS(t.space,t.local)}}function tc(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function nc(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function rc(t,e,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a)))}}function ic(t,e,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a)))}}function oc(t,e){var n=On(t),r=n==="transform"?Vu:Ro;return this.attrTween(t,typeof e=="function"?(n.local?ic:rc)(n,r,Ir(this,"attr."+t,e)):e==null?(n.local?ec:Ju)(n):(n.local?nc:tc)(n,r,e))}function sc(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ac(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function lc(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&ac(t,o)),n}return i._value=e,i}function uc(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&sc(t,o)),n}return i._value=e,i}function cc(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=On(t);return this.tween(n,(r.local?lc:uc)(r,e))}function hc(t,e){return function(){Sr(this,t).delay=+e.apply(this,arguments)}}function fc(t,e){return e=+e,function(){Sr(this,t).delay=e}}function dc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?hc:fc)(e,t)):De(this.node(),e).delay}function pc(t,e){return function(){je(this,t).duration=+e.apply(this,arguments)}}function gc(t,e){return e=+e,function(){je(this,t).duration=e}}function mc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?pc:gc)(e,t)):De(this.node(),e).duration}function wc(t,e){if(typeof e!="function")throw new Error;return function(){je(this,t).ease=e}}function _c(t){var e=this._id;return arguments.length?this.each(wc(e,t)):De(this.node(),e).ease}function yc(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;je(this,t).ease=n}}function bc(t){if(typeof t!="function")throw new Error;return this.each(yc(this._id,t))}function vc(t){typeof t!="function"&&(t=mo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&a.push(l);return new Ke(r,this._parents,this._name,this._id)}function kc(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=e[a],u=n[a],c=l.length,h=s[a]=new Array(c),f,d=0;d<c;++d)(f=l[d]||u[d])&&(h[d]=f);for(;a<r;++a)s[a]=e[a];return new Ke(s,this._parents,this._name,this._id)}function Ec(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function xc(t,e,n){var r,i,o=Ec(e)?Sr:je;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function Mc(t,e){var n=this._id;return arguments.length<2?De(this.node(),n).on.on(t):this.each(xc(n,t,e))}function Nc(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Cc(){return this.on("end.remove",Nc(this._id))}function Tc(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Nr(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,u=o[s]=new Array(l),c,h,f=0;f<l;++f)(c=a[f])&&(h=t.call(c,c.__data__,f,a))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h,Ln(u[f],e,n,f,u,De(c,n)));return new Ke(o,this._parents,e,n)}function $c(t){var e=this._name,n=this._id;typeof t!="function"&&(t=go(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,h=0;h<u;++h)if(c=l[h]){for(var f=t.call(c,c.__data__,h,l),d,g=De(c,n),_=0,E=f.length;_<E;++_)(d=f[_])&&Ln(d,e,n,_,f,g);o.push(f),s.push(c)}return new Ke(o,s,e,n)}var Sc=en.prototype.constructor;function Ic(){return new Sc(this._groups,this._parents)}function Oc(t,e){var n,r,i;return function(){var o=Ct(this,t),s=(this.style.removeProperty(t),Ct(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function Bo(t){return function(){this.style.removeProperty(t)}}function Pc(t,e,n){var r,i=n+"",o;return function(){var s=Ct(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function Lc(t,e,n){var r,i,o;return function(){var s=Ct(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),Ct(this,t))),s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}function Ac(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var l=je(this,t),u=l.on,c=l.value[o]==null?a||(a=Bo(e)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(s,i=c),l.on=r}}function Rc(t,e,n){var r=(t+="")=="transform"?Fu:Ro;return e==null?this.styleTween(t,Oc(t,r)).on("end.style."+t,Bo(t)):typeof e=="function"?this.styleTween(t,Lc(t,r,Ir(this,"style."+t,e))).each(Ac(this._id,t)):this.styleTween(t,Pc(t,r,e),n).on("end.style."+t,null)}function Bc(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Dc(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Bc(t,s,n)),r}return o._value=e,o}function Fc(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Dc(t,e,n??""))}function Vc(t){return function(){this.textContent=t}}function Wc(t){return function(){var e=t(this);this.textContent=e??""}}function jc(t){return this.tween("text",typeof t=="function"?Wc(Ir(this,"text",t)):Vc(t==null?"":t+""))}function zc(t){return function(e){this.textContent=t.call(this,e)}}function Gc(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&zc(i)),e}return r._value=t,r}function Hc(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Gc(t))}function qc(){for(var t=this._name,e=this._id,n=Do(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=De(l,e);Ln(l,t,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ke(r,this._parents,t,n)}function Yc(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var u=je(this,r),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),u.on=e}),i===0&&o()})}var Xc=0;function Ke(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Do(){return++Xc}var He=en.prototype;Ke.prototype={constructor:Ke,select:Tc,selectAll:$c,selectChild:He.selectChild,selectChildren:He.selectChildren,filter:vc,merge:kc,selection:Ic,transition:qc,call:He.call,nodes:He.nodes,node:He.node,size:He.size,empty:He.empty,each:He.each,on:Mc,attr:oc,attrTween:cc,style:Rc,styleTween:Fc,text:jc,textTween:Hc,remove:Cc,tween:Qu,delay:dc,duration:mc,ease:_c,easeVarying:bc,end:Yc,[Symbol.iterator]:He[Symbol.iterator]};function Uc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Kc={time:null,delay:0,duration:250,ease:Uc};function Zc(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Qc(t){var e,n;t instanceof Ke?(e=t._id,t=t._name):(e=Do(),(n=Kc).time=$r(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&Ln(l,t,e,u,s,n||Zc(l,e));return new Ke(r,this._parents,t,e)}en.prototype.interrupt=Uu;en.prototype.transition=Qc;const cr=Math.PI,hr=2*cr,st=1e-6,Jc=hr-st;function Fo(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function eh(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Fo;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Vo{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Fo:eh(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-e,u=i-n,c=s-e,h=a-n,f=c*c+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>st)if(!(Math.abs(h*l-u*c)>st)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-s,g=i-a,_=l*l+u*u,E=d*d+g*g,$=Math.sqrt(_),k=Math.sqrt(f),y=o*Math.tan((cr-Math.acos((_+f-E)/(2*$*k)))/2),m=y/k,b=y/$;Math.abs(m-1)>st&&this._append`L${e+m*c},${n+m*h}`,this._append`A${o},${o},0,0,${+(h*d>c*g)},${this._x1=e+b*l},${this._y1=n+b*u}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=e+a,c=n+l,h=1^s,f=s?i-o:o-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>st||Math.abs(this._y1-c)>st)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%hr+hr),f>Jc?this._append`A${r},${r},0,1,${h},${e-a},${n-l}A${r},${r},0,1,${h},${this._x1=u},${this._y1=c}`:f>st&&this._append`A${r},${r},0,${+(f>=cr)},${h},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Wo(){return new Vo}Wo.prototype=Vo.prototype;function Vt(t,e,n){this.k=t,this.x=e,this.y=n}Vt.prototype={constructor:Vt,scale:function(t){return t===1?this:new Vt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Vt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Vt.prototype;class fr{constructor(e){P(this,"context",Wo()),P(this,"x0",NaN),P(this,"x1",NaN),P(this,"y0",NaN),P(this,"y1",NaN),P(this,"state",0);for(let n=0;n<e.length;n++){const r=e[n];if(this.point(r.x,r.y),n===e.length-1)switch(this.state){case 3:this.curve(this.x1,this.y1),this.context.lineTo(this.x1,this.y1);break;case 2:this.context.lineTo(this.x1,this.y1);break}}}point(e,n){switch(e=+e,n=+n,this.state){case 0:this.state=1,this.context.moveTo(e,n);break;case 1:this.state=2;break;case 2:this.state=3,this.context.lineTo((5*this.x0+this.x1)/6,(5*this.y0+this.y1)/6),this.curve(e,n);break;default:this.curve(e,n);break}this.x0=this.x1,this.x1=e,this.y0=this.y1,this.y1=n}curve(e,n){this.context.bezierCurveTo((2*this.x0+this.x1)/3,(2*this.y0+this.y1)/3,(this.x0+2*this.x1)/3,(this.y0+2*this.y1)/3,(this.x0+4*this.x1+e)/6,(this.y0+4*this.y1+n)/6)}build(){return this.context.toString()}}class ne{constructor(e,n,r,i){this.xMin=e,this.yMin=n,this.xMax=r,this.yMax=i,this.xMin=e,this.xMax=r,this.yMin=n,this.yMax=i}static infinity(){return new ne(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE)}isEmpty(){return this.xMin===Number.MAX_VALUE||this.yMin===Number.MAX_VALUE||this.xMax===Number.MIN_VALUE||this.yMax===Number.MIN_VALUE}static fromCenterAndDimension(e,n,r){return new ne(e.x-n/2,e.y-r/2,e.x+n/2,e.y+r/2)}static fromPoints(...e){return e.reduce((n,r)=>(n.xMin=Math.min(n.xMin,r.x),n.yMin=Math.min(n.yMin,r.y),n.xMax=Math.max(n.xMax,r.x),n.yMax=Math.max(n.yMax,r.y),n),ne.infinity())}static fromUnion(...e){return e.reduce((n,r)=>n.union(r),ne.infinity())}get width(){return this.xMax-this.xMin}get height(){return this.yMax-this.yMin}get center(){return{x:this.xMin+this.width/2,y:this.yMin+this.height/2}}padded(e){const{l:n,r,b:i,t:o}=typeof e=="object"?e:{l:e,r:e,t:e,b:e};return new ne(this.xMin-n,this.yMin-o,this.xMax+r,this.yMax+i)}union(e){return new ne(Math.min(this.xMin,e.xMin),Math.min(this.yMin,e.yMin),Math.max(this.xMax,e.xMax),Math.max(this.yMax,e.yMax))}transformed(e){const n=e.apply(this.xMin,this.yMin),r=e.apply(this.xMax,this.yMax);return new ne(n.x,n.y,r.x,r.y)}contains(e,n){return this.xMin<=e&&this.yMin<=n&&e<=this.xMax&&n<=this.yMax}encloses(e){return this.contains(e.xMin,e.yMin)&&this.contains(e.xMax,e.yMax)}intersects(e){return this.xMin<=e.xMin&&e.xMin<=this.xMax||this.xMin<=e.xMax&&e.xMax<=this.xMax||this.yMin<=e.yMin&&e.yMin<=this.yMax||this.yMin<=e.yMax&&e.yMax<=this.yMax}}function*th(t,e){let n=!0;for(const r of t)n||(yield e),n=!1,yield r}function wn(t,e,n){return Math.min(Math.max(n,t),e)}class rt{constructor(e){P(this,"options"),this.options=e}with(e){return this.options={...this.options,...e},this}}function Y(){}const nh=t=>t;function Ze(t,e){for(const n in e)t[n]=e[n];return t}function jo(t){return t()}function di(){return Object.create(null)}function ze(t){t.forEach(jo)}function zo(t){return typeof t=="function"}function we(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function rh(t){return Object.keys(t).length===0}function dr(t,...e){if(t==null){for(const r of e)r(void 0);return Y}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Go(t,e,n){t.$$.on_destroy.push(dr(e,n))}function Ho(t,e,n,r){if(t){const i=qo(t,e,n,r);return t[0](i)}}function qo(t,e,n,r){return t[1]&&r?Ze(n.ctx.slice(),t[1](r(e))):n.ctx}function Yo(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],s=Math.max(e.dirty.length,i.length);for(let a=0;a<s;a+=1)o[a]=e.dirty[a]|i[a];return o}return e.dirty|i}return e.dirty}function Xo(t,e,n,r,i,o){if(i){const s=qo(e,n,r,o);t.p(s,i)}}function Uo(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function jn(t,e,n){return t.set(n),e}const Ko=typeof window<"u";let ih=Ko?()=>window.performance.now():()=>Date.now(),Zo=Ko?t=>requestAnimationFrame(t):Y;const xt=new Set;function Qo(t){xt.forEach(e=>{e.c(t)||(xt.delete(e),e.f())}),xt.size!==0&&Zo(Qo)}function oh(t){let e;return xt.size===0&&Zo(Qo),{promise:new Promise(n=>{xt.add(e={c:t,f:n})}),abort(){xt.delete(e)}}}function G(t,e){t.appendChild(e)}function V(t,e,n){t.insertBefore(e,n||null)}function B(t){t.parentNode&&t.parentNode.removeChild(t)}function Jo(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function he(t){return document.createElement(t)}function X(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Ge(t){return document.createTextNode(t)}function Ue(){return Ge(" ")}function Pe(){return Ge("")}function re(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function sh(t){return Array.from(t.childNodes)}function nn(t,e){e=""+e,t.data!==e&&(t.data=e)}function ah(t,e,n,r){t.style.setProperty(e,n,"")}function lh(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function $t(t,e){return new t(e)}let Zt;function Gt(t){Zt=t}function An(){if(!Zt)throw new Error("Function called outside component initialization");return Zt}function es(t){An().$$.on_mount.push(t)}function It(){const t=An();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=lh(e,n,{cancelable:r});return i.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}function uh(t,e){return An().$$.context.set(t,e),e}function ts(t){return An().$$.context.get(t)}function ke(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const yt=[],nt=[];let Mt=[];const pr=[],ns=Promise.resolve();let gr=!1;function rs(){gr||(gr=!0,ns.then(is))}function cn(){return rs(),ns}function mr(t){Mt.push(t)}function ch(t){pr.push(t)}const zn=new Set;let mt=0;function is(){if(mt!==0)return;const t=Zt;do{try{for(;mt<yt.length;){const e=yt[mt];mt++,Gt(e),hh(e.$$)}}catch(e){throw yt.length=0,mt=0,e}for(Gt(null),yt.length=0,mt=0;nt.length;)nt.pop()();for(let e=0;e<Mt.length;e+=1){const n=Mt[e];zn.has(n)||(zn.add(n),n())}Mt.length=0}while(yt.length);for(;pr.length;)pr.pop()();gr=!1,zn.clear(),Gt(t)}function hh(t){if(t.fragment!==null){t.update(),ze(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(mr)}}function fh(t){const e=[],n=[];Mt.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),Mt=e}const _n=new Set;let lt;function Ne(){lt={r:0,c:[],p:lt}}function Ce(){lt.r||ze(lt.c),lt=lt.p}function L(t,e){t&&t.i&&(_n.delete(t),t.i(e))}function j(t,e,n,r){if(t&&t.o){if(_n.has(t))return;_n.add(t),lt.c.push(()=>{_n.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Oe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function yn(t,e){j(t,1,1,()=>{e.delete(t.key)})}function bn(t,e,n,r,i,o,s,a,l,u,c,h){let f=t.length,d=o.length,g=f;const _={};for(;g--;)_[t[g].key]=g;const E=[],$=new Map,k=new Map,y=[];for(g=d;g--;){const v=h(i,o,g),O=n(v);let D=s.get(O);D?y.push(()=>D.p(v,e)):(D=u(O,v),D.c()),$.set(O,E[g]=D),O in _&&k.set(O,Math.abs(g-_[O]))}const m=new Set,b=new Set;function N(v){L(v,1),v.m(a,c),s.set(v.key,v),c=v.first,d--}for(;f&&d;){const v=E[d-1],O=t[f-1],D=v.key,z=O.key;v===O?(c=v.first,f--,d--):$.has(z)?!s.has(D)||m.has(D)?N(v):b.has(z)?f--:k.get(D)>k.get(z)?(b.add(D),N(v)):(m.add(z),f--):(l(O,s),f--)}for(;f--;){const v=t[f];$.has(v.key)||l(v,s)}for(;d;)N(E[d-1]);return ze(y),E}function St(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const s=t[o],a=e[o];if(a){for(const l in s)l in a||(r[l]=1);for(const l in a)i[l]||(n[l]=a[l],i[l]=1);t[o]=a}else for(const l in s)i[l]=1}for(const s in r)s in n||(n[s]=void 0);return n}function dh(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function ae(t){t&&t.c()}function ie(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),mr(()=>{const o=t.$$.on_mount.map(jo).filter(zo);t.$$.on_destroy?t.$$.on_destroy.push(...o):ze(o),t.$$.on_mount=[]}),i.forEach(mr)}function oe(t,e){const n=t.$$;n.fragment!==null&&(fh(n.after_update),ze(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ph(t,e){t.$$.dirty[0]===-1&&(yt.push(t),rs(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ye(t,e,n,r,i,o,s=null,a=[-1]){const l=Zt;Gt(t);const u=t.$$={fragment:null,ctx:[],props:o,update:Y,not_equal:i,bound:di(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:di(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};s&&s(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(h,f,...d)=>{const g=d.length?d[0]:f;return u.ctx&&i(u.ctx[h],u.ctx[h]=g)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](g),c&&ph(t,h)),f}):[],u.update(),c=!0,ze(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const h=sh(e.target);u.fragment&&u.fragment.l(h),h.forEach(B)}else u.fragment&&u.fragment.c();e.intro&&L(t.$$.fragment),ie(t,e.target,e.anchor),is()}Gt(l)}class be{constructor(){P(this,"$$"),P(this,"$$set")}$destroy(){oe(this,1),this.$destroy=Y}$on(e,n){if(!zo(n))return Y;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!rh(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const gh="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(gh);var pi={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function gi(t,e,n){const r=t.slice();return r[3]=e[n],r}function mh(t){let e,n,r,i,o;return{c(){e=X("rect"),p(e,"x",n=t[3].boundingBox().transformed(t[3].transform).xMin),p(e,"y",r=t[3].boundingBox().transformed(t[3].transform).yMin),p(e,"width",i=t[3].boundingBox().transformed(t[3].transform).width),p(e,"height",o=t[3].boundingBox().transformed(t[3].transform).height),p(e,"fill","magenta"),p(e,"opacity","0.1")},m(s,a){V(s,e,a)},p(s,a){a&1&&n!==(n=s[3].boundingBox().transformed(s[3].transform).xMin)&&p(e,"x",n),a&1&&r!==(r=s[3].boundingBox().transformed(s[3].transform).yMin)&&p(e,"y",r),a&1&&i!==(i=s[3].boundingBox().transformed(s[3].transform).width)&&p(e,"width",i),a&1&&o!==(o=s[3].boundingBox().transformed(s[3].transform).height)&&p(e,"height",o)},d(s){s&&B(e)}}}function mi(t){let e,n,r,i,o=pi.VITE_WIREFRAME_CONTAINER&&mh(t);const s=[{self:t[3]}];var a=t[3].drawable();function l(u,c){let h={};for(let f=0;f<s.length;f+=1)h=Ze(h,s[f]);return c!==void 0&&c&1&&(h=Ze(h,St(s,[{self:u[3]}]))),{props:h}}return a&&(n=$t(a,l(t))),{c(){o&&o.c(),e=Pe(),n&&ae(n.$$.fragment),r=Pe()},m(u,c){o&&o.m(u,c),V(u,e,c),n&&ie(n,u,c),V(u,r,c),i=!0},p(u,c){if(pi.VITE_WIREFRAME_CONTAINER&&o.p(u,c),c&1&&a!==(a=u[3].drawable())){if(n){Ne();const h=n;j(h.$$.fragment,1,0,()=>{oe(h,1)}),Ce()}a?(n=$t(a,l(u,c)),ae(n.$$.fragment),L(n.$$.fragment,1),ie(n,r.parentNode,r)):n=null}else if(a){const h=c&1?St(s,[{self:u[3]}]):{};n.$set(h)}},i(u){i||(n&&L(n.$$.fragment,u),i=!0)},o(u){n&&j(n.$$.fragment,u),i=!1},d(u){u&&(B(e),B(r)),o&&o.d(u),n&&oe(n,u)}}}function wh(t){let e,n,r;const i=t[2].default,o=Ho(i,t,t[1],null);let s=Oe(t[0].children),a=[];for(let u=0;u<s.length;u+=1)a[u]=mi(gi(t,s,u));const l=u=>j(a[u],1,1,()=>{a[u]=null});return{c(){e=X("g"),o&&o.c();for(let u=0;u<a.length;u+=1)a[u].c();p(e,"transform",n=t[0].transform.toString())},m(u,c){V(u,e,c),o&&o.m(e,null);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(e,null);r=!0},p(u,[c]){if(o&&o.p&&(!r||c&2)&&Xo(o,i,u,u[1],r?Yo(i,u[1],c,null):Uo(u[1]),null),c&1){s=Oe(u[0].children);let h;for(h=0;h<s.length;h+=1){const f=gi(u,s,h);a[h]?(a[h].p(f,c),L(a[h],1)):(a[h]=mi(f),a[h].c(),L(a[h],1),a[h].m(e,null))}for(Ne(),h=s.length;h<a.length;h+=1)l(h);Ce()}(!r||c&1&&n!==(n=u[0].transform.toString()))&&p(e,"transform",n)},i(u){if(!r){L(o,u);for(let c=0;c<s.length;c+=1)L(a[c]);r=!0}},o(u){j(o,u),a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)j(a[c]);r=!1},d(u){u&&B(e),o&&o.d(u),Jo(a,u)}}}function _h(t,e,n){let{$$slots:r={},$$scope:i}=e,{self:o}=e;return t.$$set=s=>{"self"in s&&n(0,o=s.self),"$$scope"in s&&n(1,i=s.$$scope)},[o,i,r]}let Or=class extends be{constructor(e){super(),ye(this,e,_h,wh,we,{self:0})}};class yh{constructor(){P(this,"onClick")}}class Ot extends yh{constructor(){super(),P(this,"transform"),this.transform=tr.identity()}moveTo(e,n){this.transform.x=e,this.transform.y=n}}class rn extends Ot{constructor(...e){super(),P(this,"children"),this.children=e}boundingBox(){return ne.fromUnion(...this.children.map(e=>e.boundingBox().transformed(e.transform)))}drawable(){return Or}}class os extends rt{constructor(...e){super({spacing:0,spread:!1,minWidth:Number.MIN_VALUE,maxWidth:Number.MAX_VALUE}),P(this,"children"),this.children=e}build(e={}){const n=this.children.map(o=>o.build(e));let r=0;if(this.options.spread&&e.targetWidth!==void 0){const o=n.length-1,s=n.reduce((l,u)=>l+u.boundingBox().width,this.options.spacing*o),a=e.targetWidth-s;r=Math.max(a/(this.children.length-1),0)}const i={x:0,y:0};for(const o of n)o.moveTo(i.x,i.y),i.x+=o.boundingBox().width+this.options.spacing+r;return new Pr(this.options,...n)}}class ss extends rt{constructor(...e){super({spacing:0,spread:!1,minWidth:Number.MIN_VALUE,maxWidth:Number.MAX_VALUE}),P(this,"children"),this.children=e}padded(e){return new Pt(this,e)}build(e={}){const n=Math.max(this.options.minWidth,this.children.reduce((o,s)=>Math.max(o,s.build(e).boundingBox().width),-1/0)),r=this.children.map(o=>o.build({...e,targetWidth:n})),i={x:0,y:0};for(const o of r)o.moveTo(i.x,i.y),i.y+=o.boundingBox().height+this.options.spacing;return new Pr(this.options,...r)}}class Pr extends rn{constructor(e,...n){super(...n),this.options=e,this.options=e}boundingBox(){const e=super.boundingBox();return e.xMax=wn(this.options.minWidth,this.options.maxWidth,e.xMax),e}}class bh{constructor(...e){P(this,"children"),this.children=e}build(e={}){const n=this.children.map(o=>o.build(e)),{width:r,height:i}=ne.fromUnion(...n.map(o=>o.boundingBox()));for(const o of n){const{width:s,height:a}=o.boundingBox();o.moveTo(r/2-s/2,i/2-a/2)}return new rn(...n)}}const as={l:8,r:8,t:10,b:10};function ls(t,e,n,r){switch(n){case"topRight":return{x:t.xMax+r,y:t.yMin};case"bottomMiddle":return{x:t.center.x-e.width/2,y:t.yMax+r}}}let vh=class extends rt{constructor(e){super({anchor:"topRight"}),P(this,"content"),this.content=e}build(e={}){return new us(new cs(new Pt(this.content,as)).with({radius:6,borderColor:"none",backgroundColor:Ae.background.darkGray}).build({defaultOptions:{text:{foregroundColor:"white"}}}),this.options)}};class us extends Ot{constructor(e,n){super(),this.content=e,this.options=n}boundingBox(){return this.content.boundingBox().padded(as)}drawable(){throw Error("not implemented")}}class cs extends rt{constructor(e){super({backgroundColor:Ae.white,borderColor:Ae.foreground.grayTertiary,borderWidth:1,borderDash:void 0,radius:void 0}),this.inner=e}content(){return this.inner}build(e={}){const n=this.inner.build(e),r=n.boundingBox();return new hs(n,new Br(r.width,r.height).with(this.options).build(e))}}class hs extends rn{constructor(e,n){super(n,e)}boundingBox(){return super.boundingBox()}}function kh(t){let e,n;return{c(){e=X("path"),p(e,"stroke",Ae.foreground.grayTertiary),p(e,"stroke-width","1"),p(e,"fill","none"),p(e,"pointer-events","none"),p(e,"marker-end","url(#arrowhead)"),p(e,"d",n=new fr(t[0]).build())},m(r,i){V(r,e,i)},p(r,[i]){i&1&&n!==(n=new fr(r[0]).build())&&p(e,"d",n)},i:Y,o:Y,d(r){r&&B(e)}}}function Eh(t,e,n){let r,{self:i}=e;return t.$$set=o=>{"self"in o&&n(1,i=o.self)},t.$$.update=()=>{t.$$.dirty&2&&n(0,r=i.points.map(o=>i.transform.apply(o.x,o.y)))},[r,i]}let xh=class extends be{constructor(e){super(),ye(this,e,Eh,kh,we,{self:1})}};class Mh{constructor(e){this.points=e,this.points=e}build(){return new Lr(this.points)}}class Lr extends Ot{constructor(e){super(),P(this,"points"),this.points=e}path(){const e=this.points.map(n=>this.transform.apply(n.x,n.y));return new fr(e).build()}boundingBox(){return ne.fromPoints(...this.points)}drawable(){return xh}}class fs extends rn{}var wi={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function Nh(t){let e,n,r,i,o;return{c(){e=X("rect"),p(e,"x",n=t[0].boundingBox().transformed(t[0].transform).xMin),p(e,"y",r=t[0].boundingBox().transformed(t[0].transform).yMin),p(e,"width",i=t[0].boundingBox().transformed(t[0].transform).width),p(e,"height",o=t[0].boundingBox().transformed(t[0].transform).height),p(e,"fill","magenta"),p(e,"opacity","0.3")},m(s,a){V(s,e,a)},p(s,a){a&1&&n!==(n=s[0].boundingBox().transformed(s[0].transform).xMin)&&p(e,"x",n),a&1&&r!==(r=s[0].boundingBox().transformed(s[0].transform).yMin)&&p(e,"y",r),a&1&&i!==(i=s[0].boundingBox().transformed(s[0].transform).width)&&p(e,"width",i),a&1&&o!==(o=s[0].boundingBox().transformed(s[0].transform).height)&&p(e,"height",o)},d(s){s&&B(e)}}}function Ch(t){let e,n,r=t[0].text+"",i,o,s,a=wi.VITE_WIREFRAME_TEXT&&Nh(t);return{c(){a&&a.c(),e=Ue(),n=X("text"),i=Ge(r),p(n,"x",o=t[0].transform.x),p(n,"y",s=t[0].transform.y),p(n,"dominant-baseline","hanging"),p(n,"font-family",t[2]),p(n,"font-size",t[1]),p(n,"fill",t[3]),p(n,"font-weight",t[4])},m(l,u){a&&a.m(l,u),V(l,e,u),V(l,n,u),G(n,i)},p(l,[u]){wi.VITE_WIREFRAME_TEXT&&a.p(l,u),u&1&&r!==(r=l[0].text+"")&&nn(i,r),u&1&&o!==(o=l[0].transform.x)&&p(n,"x",o),u&1&&s!==(s=l[0].transform.y)&&p(n,"y",s)},i:Y,o:Y,d(l){l&&(B(e),B(n)),a&&a.d(l)}}}function Th(t,e,n){let{self:r}=e;const{fontSize:i,font:o,foregroundColor:s,fontWeight:a}=r.options;return t.$$set=l=>{"self"in l&&n(0,r=l.self)},[r,i,o,s,a]}let $h=class extends be{constructor(e){super(),ye(this,e,Th,Ch,we,{self:0})}};class Sh{constructor(){P(this,"canvas"),P(this,"ctx"),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}measureTextWidth(e,n){return this.ctx.font=`${n.fontSize}px ${n.font}`,this.ctx.textBaseline="top",this.ctx.measureText(e).width}}class ds extends rt{constructor(e){super({font:Jt.family,fontSize:16,fontWeight:200}),P(this,"text"),this.text=e}padded(e){return new Pt(this,e)}build(e){var n;return new ps(this.text,{...(n=e==null?void 0:e.defaultOptions)==null?void 0:n.text,...this.options})}}class ps extends Ot{constructor(e,n){super(),P(this,"text"),P(this,"options"),P(this,"width"),P(this,"height"),this.text=e,this.options=n,this.width=new Sh().measureTextWidth(this.text,this.options),this.height=n.fontSize}boundingBox(){return new ne(0,0,this.width,this.height)}drawable(){return $h}}const Ar=Symbol();function Ih(t){let e,n,r;return{c(){e=X("rect"),p(e,"x",n=t[0].transform.x),p(e,"y",r=t[0].transform.y),p(e,"width",t[6]),p(e,"height",t[7]),p(e,"rx",t[1]),p(e,"fill",t[4]),p(e,"stroke",t[5]),p(e,"stroke-width",t[3]),p(e,"stroke-dasharray",t[2])},m(i,o){V(i,e,o)},p(i,[o]){o&1&&n!==(n=i[0].transform.x)&&p(e,"x",n),o&1&&r!==(r=i[0].transform.y)&&p(e,"y",r),o&2&&p(e,"rx",i[1]),o&16&&p(e,"fill",i[4]),o&32&&p(e,"stroke",i[5]),o&8&&p(e,"stroke-width",i[3]),o&4&&p(e,"stroke-dasharray",i[2])},i:Y,o:Y,d(i){i&&B(e)}}}function Oh(t,e,n){let r,i,o,s,a,{self:l}=e;const u=l.boundingBox().width,c=l.boundingBox().height;return t.$$set=h=>{"self"in h&&n(0,l=h.self)},t.$$.update=()=>{t.$$.dirty&1&&n(5,{borderColor:r,backgroundColor:i,borderWidth:o,borderDash:s,radius:a}=l.options,r,(n(4,i),n(0,l)),(n(3,o),n(0,l)),(n(2,s),n(0,l)),(n(1,a),n(0,l)))},[l,a,s,o,i,r,u,c]}let gs=class extends be{constructor(e){super(),ye(this,e,Oh,Ih,we,{self:0})}};function _i(t){let e,n,r,i,o=t[2].text&&yi(t);return{c(){e=X("g"),n=X("circle"),o&&o.c(),p(n,"r","10"),p(n,"fill",r=t[2].color),p(n,"stroke","white"),p(n,"stroke-width","2"),p(e,"class","badge"),p(e,"transform",i=`translate(${t[3].width+t[5].x},${-t[5].y})`)},m(s,a){V(s,e,a),G(e,n),o&&o.m(e,null)},p(s,a){a&4&&r!==(r=s[2].color)&&p(n,"fill",r),s[2].text?o?o.p(s,a):(o=yi(s),o.c(),o.m(e,null)):o&&(o.d(1),o=null),a&8&&i!==(i=`translate(${s[3].width+s[5].x},${-s[5].y})`)&&p(e,"transform",i)},d(s){s&&B(e),o&&o.d()}}}function yi(t){let e,n=t[2].text+"",r;return{c(){e=X("text"),r=Ge(n),p(e,"y",1),p(e,"font-family",Jt.family),p(e,"font-size","10"),p(e,"text-anchor","middle"),p(e,"dominant-baseline","middle"),p(e,"fill","white")},m(i,o){V(i,e,o),G(e,r)},p(i,o){o&4&&n!==(n=i[2].text+"")&&nn(r,n)},d(i){i&&B(e)}}}function Ph(t){let e,n,r,i,o,s,a,l;n=new gs({props:{self:t[1]}});const u=[{self:t[0].content}];var c=t[0].content.drawable();function h(d,g){let _={};for(let E=0;E<u.length;E+=1)_=Ze(_,u[E]);return g!==void 0&&g&1&&(_=Ze(_,St(u,[{self:d[0].content}]))),{props:_}}c&&(r=$t(c,h(t)));let f=t[2]&&_i(t);return{c(){e=X("g"),ae(n.$$.fragment),r&&ae(r.$$.fragment),i=Ge(` -->
  `),f&&f.c(),p(e,"transform",o=`translate(${t[3].xMin},${t[3].yMin})`),p(e,"cursor","pointer")},m(d,g){V(d,e,g),ie(n,e,null),r&&ie(r,e,null),G(e,i),f&&f.m(e,null),s=!0,a||(l=[re(e,"click",t[13]),re(e,"dblclick",t[14]),re(e,"mouseenter",t[6]),re(e,"mouseleave",t[7])],a=!0)},p(d,[g]){const _={};if(g&2&&(_.self=d[1]),n.$set(_),g&1&&c!==(c=d[0].content.drawable())){if(r){Ne();const E=r;j(E.$$.fragment,1,0,()=>{oe(E,1)}),Ce()}c?(r=$t(c,h(d,g)),ae(r.$$.fragment),L(r.$$.fragment,1),ie(r,e,i)):r=null}else if(c){const E=g&1?St(u,[{self:d[0].content}]):{};r.$set(E)}d[2]?f?f.p(d,g):(f=_i(d),f.c(),f.m(e,null)):f&&(f.d(1),f=null),(!s||g&8&&o!==(o=`translate(${d[3].xMin},${d[3].yMin})`))&&p(e,"transform",o)},i(d){s||(L(n.$$.fragment,d),r&&L(r.$$.fragment,d),s=!0)},o(d){j(n.$$.fragment,d),r&&j(r.$$.fragment,d),s=!1},d(d){d&&B(e),oe(n),r&&oe(r),f&&f.d(),a=!1,ze(l)}}}function Lh(t,e,n){let r,i,o,s,a,l;const u=It();let{self:c}=e,{decoration:h}=e;const{selections:f}=ts(Ar);Go(t,f,y=>n(12,l=y));const d={x:1,y:1};let g=!1;function _(y){n(9,g=!0),u("nodeEnter",{...y,nodeId:r})}function E(y){n(9,g=!1),u("nodeLeave",{...y,nodeId:r})}function $(y){ke.call(this,t,y)}function k(y){ke.call(this,t,y)}return t.$$set=y=>{"self"in y&&n(0,c=y.self),"decoration"in y&&n(8,h=y.decoration)},t.$$.update=()=>{t.$$.dirty&1&&n(11,r=c.nodeId),t.$$.dirty&6144&&n(10,i=l.has(r)),t.$$.dirty&1&&n(3,o=c.boundingBox()),t.$$.dirty&1&&n(2,s=c.options.badge),t.$$.dirty&1793&&n(1,a=new Br(c.content.boundingBox().width,c.content.boundingBox().height).with({borderColor:Ae.foreground.grayTertiary,borderWidth:1,radius:6,borderDash:c.options.borderDash,backgroundColor:c.options.backgroundColor}).with({...h}).with(g?{borderColor:Ae.foreground.blue}:{}).with(i?{borderColor:Ae.foreground.blue,borderWidth:3}:{}).build())},[c,a,s,o,f,d,_,E,h,g,i,r,l,$,k]}let Rr=class extends be{constructor(e){super(),ye(this,e,Lh,Ph,we,{self:0,decoration:8})}};function Ah(t){return new os(new ds(t)).with({minWidth:30})}class Rh extends rt{constructor(e,...n){super({selectable:!1,borderDash:void 0,badge:void 0,tooltip:void 0,backgroundColor:Ae.white,borderColor:Ae.foreground.grayTertiary,humanReadable:void 0,padding:{l:8,r:8,t:10,b:10}}),P(this,"contents"),this.nodeId=e,this.contents=n.length>0?n:[Ah(this.options.humanReadable||this.nodeId)]}humanReadable(){return this.options.humanReadable}build(e={}){const n=[...th(this.contents.map(r=>new Pt(r,this.options.padding)),new _s().with({color:this.options.borderColor,dash:this.options.borderDash}))];return new ms(this.nodeId,new ss(...n).build(e),this.options)}}class ms extends Ot{constructor(e,n,r){super(),this.nodeId=e,this.content=n,this.options=r}boundingBox(){return this.content.boundingBox().transformed(this.transform)}drawable(){return Rr}}class Br extends rt{constructor(e,n){super({backgroundColor:Ae.black,borderColor:"none",borderWidth:0,borderDash:void 0,radius:void 0}),P(this,"width"),P(this,"height"),this.width=e,this.height=n}padded(e){return new Pt(this,e)}build(e={}){return new Dr(this.width,this.height,this.options)}}class Dr extends Ot{constructor(e,n,r){super(),this.width=e,this.height=n,this.options=r}boundingBox(){return new ne(0,0,this.width,this.height)}drawable(){return gs}}function Bh(t){return t.l!==void 0}class Pt{constructor(e,n){P(this,"p"),this.inner=e,this.inner=e,this.p=Bh(n)?n:{l:n,r:n,t:n,b:n}}content(){return this.inner}padding(){return this.p}build(e={}){const{l:n,t:r,r:i}=this.p,o=e.targetWidth?this.inner.build({...e,targetWidth:e.targetWidth-n-i}):this.inner.build({...e});return o.moveTo(n,r),new ws(o,this.p)}}class ws extends rn{constructor(e,n){super(e),P(this,"padding"),this.padding=n}boundingBox(){return super.boundingBox().padded(this.padding)}drawable(){return Or}}const Dh=1,Fh=100;class _s extends rt{constructor(e){super({color:Ae.foreground.grayTertiary,dash:void 0}),P(this,"width"),this.width=e}build(e={}){const n=this.width||e.targetWidth||Fh;return new Dr(n,Dh,{backgroundColor:this.options.color,borderColor:"none",borderWidth:0,radius:void 0,borderDash:this.options.dash})}}const Gn=Object.freeze(Object.defineProperty({__proto__:null,Edge:Mh,EdgeDisplayObject:Lr,EdgesDisplayObject:fs,Frame:cs,FrameDisplayObject:hs,HStack:os,Node:Rh,NodeDisplayObject:ms,Padded:Pt,PaddedDisplayObject:ws,Rect:Br,RectDisplayObject:Dr,Separator:_s,StackContainer:Pr,Text:ds,TextDisplayObject:ps,Theme:Ta,Tooltip:vh,TooltipDisplayObject:us,VStack:ss,ZStack:bh,positionTooltip:ls},Symbol.toStringTag,{value:"Module"}));function Vh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wh="\0",ot="\0",bi="";let jh=class{constructor(e){P(this,"_isDirected",!0),P(this,"_isMultigraph",!1),P(this,"_isCompound",!1),P(this,"_label"),P(this,"_defaultNodeLabelFn",()=>{}),P(this,"_defaultEdgeLabelFn",()=>{}),P(this,"_nodes",{}),P(this,"_in",{}),P(this,"_preds",{}),P(this,"_out",{}),P(this,"_sucs",{}),P(this,"_edgeObjs",{}),P(this,"_edgeLabels",{}),P(this,"_nodeCount",0),P(this,"_edgeCount",0),P(this,"_parent"),P(this,"_children"),e&&(this._isDirected=e.hasOwnProperty("directed")?e.directed:!0,this._isMultigraph=e.hasOwnProperty("multigraph")?e.multigraph:!1,this._isCompound=e.hasOwnProperty("compound")?e.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[ot]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return this._defaultNodeLabelFn=e,typeof e!="function"&&(this._defaultNodeLabelFn=()=>e),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var e=this;return this.nodes().filter(n=>Object.keys(e._in[n]).length===0)}sinks(){var e=this;return this.nodes().filter(n=>Object.keys(e._out[n]).length===0)}setNodes(e,n){var r=arguments,i=this;return e.forEach(function(o){r.length>1?i.setNode(o,n):i.setNode(o)}),this}setNode(e,n){return this._nodes.hasOwnProperty(e)?(arguments.length>1&&(this._nodes[e]=n),this):(this._nodes[e]=arguments.length>1?n:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=ot,this._children[e]={},this._children[ot][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return this._nodes.hasOwnProperty(e)}removeNode(e){var n=this;if(this._nodes.hasOwnProperty(e)){var r=i=>n.removeEdge(n._edgeObjs[i]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach(function(i){n.setParent(i)}),delete this._children[e]),Object.keys(this._in[e]).forEach(r),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(r),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=ot;else{n+="";for(var r=n;r!==void 0;r=this.parent(r))if(r===e)throw new Error("Setting "+n+" as parent of "+e+" would create a cycle");this.setNode(n)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=n,this._children[n][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var n=this._parent[e];if(n!==ot)return n}}children(e=ot){if(this._isCompound){var n=this._children[e];if(n)return Object.keys(n)}else{if(e===ot)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var n=this._preds[e];if(n)return Object.keys(n)}successors(e){var n=this._sucs[e];if(n)return Object.keys(n)}neighbors(e){var n=this.predecessors(e);if(n){const i=new Set(n);for(var r of this.successors(e))i.add(r);return Array.from(i.values())}}isLeaf(e){var n;return this.isDirected()?n=this.successors(e):n=this.neighbors(e),n.length===0}filterNodes(e){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var r=this;Object.entries(this._nodes).forEach(function([s,a]){e(s)&&n.setNode(s,a)}),Object.values(this._edgeObjs).forEach(function(s){n.hasNode(s.v)&&n.hasNode(s.w)&&n.setEdge(s,r.edge(s))});var i={};function o(s){var a=r.parent(s);return a===void 0||n.hasNode(a)?(i[s]=a,a):a in i?i[a]:o(a)}return this._isCompound&&n.nodes().forEach(s=>n.setParent(s,o(s))),n}setDefaultEdgeLabel(e){return this._defaultEdgeLabelFn=e,typeof e!="function"&&(this._defaultEdgeLabelFn=()=>e),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(e,n){var r=this,i=arguments;return e.reduce(function(o,s){return i.length>1?r.setEdge(o,s,n):r.setEdge(o,s),s}),this}setEdge(){var e,n,r,i,o=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(e=s.v,n=s.w,r=s.name,arguments.length===2&&(i=arguments[1],o=!0)):(e=s,n=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),e=""+e,n=""+n,r!==void 0&&(r=""+r);var a=Wt(this._isDirected,e,n,r);if(this._edgeLabels.hasOwnProperty(a))return o&&(this._edgeLabels[a]=i),this;if(r!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(n),this._edgeLabels[a]=o?i:this._defaultEdgeLabelFn(e,n,r);var l=zh(this._isDirected,e,n,r);return e=l.v,n=l.w,Object.freeze(l),this._edgeObjs[a]=l,vi(this._preds[n],e),vi(this._sucs[e],n),this._in[n][a]=l,this._out[e][a]=l,this._edgeCount++,this}edge(e,n,r){var i=arguments.length===1?Hn(this._isDirected,arguments[0]):Wt(this._isDirected,e,n,r);return this._edgeLabels[i]}edgeAsObj(){const e=this.edge(...arguments);return typeof e!="object"?{label:e}:e}hasEdge(e,n,r){var i=arguments.length===1?Hn(this._isDirected,arguments[0]):Wt(this._isDirected,e,n,r);return this._edgeLabels.hasOwnProperty(i)}removeEdge(e,n,r){var i=arguments.length===1?Hn(this._isDirected,arguments[0]):Wt(this._isDirected,e,n,r),o=this._edgeObjs[i];return o&&(e=o.v,n=o.w,delete this._edgeLabels[i],delete this._edgeObjs[i],ki(this._preds[n],e),ki(this._sucs[e],n),delete this._in[n][i],delete this._out[e][i],this._edgeCount--),this}inEdges(e,n){var r=this._in[e];if(r){var i=Object.values(r);return n?i.filter(o=>o.v===n):i}}outEdges(e,n){var r=this._out[e];if(r){var i=Object.values(r);return n?i.filter(o=>o.w===n):i}}nodeEdges(e,n){var r=this.inEdges(e,n);if(r)return r.concat(this.outEdges(e,n))}};function vi(t,e){t[e]?t[e]++:t[e]=1}function ki(t,e){--t[e]||delete t[e]}function Wt(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}return i+bi+o+bi+(r===void 0?Wh:r)}function zh(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}var a={v:i,w:o};return r&&(a.name=r),a}function Hn(t,e){return Wt(t,e.v,e.w,e.name)}var Fr=jh,Gh="2.2.2",Hh={Graph:Fr,version:Gh},qh=Fr,Yh={write:Xh,read:Zh};function Xh(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:Uh(t),edges:Kh(t)};return t.graph()!==void 0&&(e.value=structuredClone(t.graph())),e}function Uh(t){return t.nodes().map(function(e){var n=t.node(e),r=t.parent(e),i={v:e};return n!==void 0&&(i.value=n),r!==void 0&&(i.parent=r),i})}function Kh(t){return t.edges().map(function(e){var n=t.edge(e),r={v:e.v,w:e.w};return e.name!==void 0&&(r.name=e.name),n!==void 0&&(r.value=n),r})}function Zh(t){var e=new qh(t.options).setGraph(t.value);return t.nodes.forEach(function(n){e.setNode(n.v,n.value),n.parent&&e.setParent(n.v,n.parent)}),t.edges.forEach(function(n){e.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),e}var Qh=Jh;function Jh(t){var e={},n=[],r;function i(o){e.hasOwnProperty(o)||(e[o]=!0,r.push(o),t.successors(o).forEach(i),t.predecessors(o).forEach(i))}return t.nodes().forEach(function(o){r=[],i(o),r.length&&n.push(r)}),n}let ef=class{constructor(){P(this,"_arr",[]),P(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(e){return e.key})}has(e){return this._keyIndices.hasOwnProperty(e)}priority(e){var n=this._keyIndices[e];if(n!==void 0)return this._arr[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(e,n){var r=this._keyIndices;if(e=String(e),!r.hasOwnProperty(e)){var i=this._arr,o=i.length;return r[e]=o,i.push({key:e,priority:n}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key}decrease(e,n){var r=this._keyIndices[e];if(n>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[r].priority+" New: "+n);this._arr[r].priority=n,this._decrease(r)}_heapify(e){var n=this._arr,r=2*e,i=r+1,o=e;r<n.length&&(o=n[r].priority<n[o].priority?r:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==e&&(this._swap(e,o),this._heapify(o)))}_decrease(e){for(var n=this._arr,r=n[e].priority,i;e!==0&&(i=e>>1,!(n[i].priority<r));)this._swap(e,i),e=i}_swap(e,n){var r=this._arr,i=this._keyIndices,o=r[e],s=r[n];r[e]=s,r[n]=o,i[s.key]=e,i[o.key]=n}};var ys=ef,tf=ys,bs=rf,nf=()=>1;function rf(t,e,n,r){return of(t,String(e),n||nf,r||function(i){return t.outEdges(i)})}function of(t,e,n,r){var i={},o=new tf,s,a,l=function(u){var c=u.v!==s?u.v:u.w,h=i[c],f=n(u),d=a.distance+f;if(f<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+u+" Weight: "+f);d<h.distance&&(h.distance=d,h.predecessor=s,o.decrease(c,d))};for(t.nodes().forEach(function(u){var c=u===e?0:Number.POSITIVE_INFINITY;i[u]={distance:c},o.add(u,c)});o.size()>0&&(s=o.removeMin(),a=i[s],a.distance!==Number.POSITIVE_INFINITY);)r(s).forEach(l);return i}var sf=bs,af=lf;function lf(t,e,n){return t.nodes().reduce(function(r,i){return r[i]=sf(t,i,e,n),r},{})}var vs=uf;function uf(t){var e=0,n=[],r={},i=[];function o(s){var a=r[s]={onStack:!0,lowlink:e,index:e++};if(n.push(s),t.successors(s).forEach(function(c){r.hasOwnProperty(c)?r[c].onStack&&(a.lowlink=Math.min(a.lowlink,r[c].index)):(o(c),a.lowlink=Math.min(a.lowlink,r[c].lowlink))}),a.lowlink===a.index){var l=[],u;do u=n.pop(),r[u].onStack=!1,l.push(u);while(s!==u);i.push(l)}}return t.nodes().forEach(function(s){r.hasOwnProperty(s)||o(s)}),i}var cf=vs,hf=ff;function ff(t){return cf(t).filter(function(e){return e.length>1||e.length===1&&t.hasEdge(e[0],e[0])})}var df=gf,pf=()=>1;function gf(t,e,n){return mf(t,e||pf,n||function(r){return t.outEdges(r)})}function mf(t,e,n){var r={},i=t.nodes();return i.forEach(function(o){r[o]={},r[o][o]={distance:0},i.forEach(function(s){o!==s&&(r[o][s]={distance:Number.POSITIVE_INFINITY})}),n(o).forEach(function(s){var a=s.v===o?s.w:s.v,l=e(s);r[o][a]={distance:l,predecessor:o}})}),i.forEach(function(o){var s=r[o];i.forEach(function(a){var l=r[a];i.forEach(function(u){var c=l[o],h=s[u],f=l[u],d=c.distance+h.distance;d<f.distance&&(f.distance=d,f.predecessor=h.predecessor)})})}),r}function ks(t){var e={},n={},r=[];function i(o){if(n.hasOwnProperty(o))throw new wr;e.hasOwnProperty(o)||(n[o]=!0,e[o]=!0,t.predecessors(o).forEach(i),delete n[o],r.push(o))}if(t.sinks().forEach(i),Object.keys(e).length!==t.nodeCount())throw new wr;return r}class wr extends Error{constructor(){super(...arguments)}}var Es=ks;ks.CycleException=wr;var Ei=Es,wf=_f;function _f(t){try{Ei(t)}catch(e){if(e instanceof Ei.CycleException)return!1;throw e}return!0}var xs=yf;function yf(t,e,n){Array.isArray(e)||(e=[e]);var r=t.isDirected()?a=>t.successors(a):a=>t.neighbors(a),i=n==="post"?bf:vf,o=[],s={};return e.forEach(a=>{if(!t.hasNode(a))throw new Error("Graph does not have node: "+a);i(a,r,s,o)}),o}function bf(t,e,n,r){for(var i=[[t,!1]];i.length>0;){var o=i.pop();o[1]?r.push(o[0]):n.hasOwnProperty(o[0])||(n[o[0]]=!0,i.push([o[0],!0]),Ms(e(o[0]),s=>i.push([s,!1])))}}function vf(t,e,n,r){for(var i=[t];i.length>0;){var o=i.pop();n.hasOwnProperty(o)||(n[o]=!0,r.push(o),Ms(e(o),s=>i.push(s)))}}function Ms(t,e){for(var n=t.length;n--;)e(t[n],n,t);return t}var kf=xs,Ef=xf;function xf(t,e){return kf(t,e,"post")}var Mf=xs,Nf=Cf;function Cf(t,e){return Mf(t,e,"pre")}var Tf=Fr,$f=ys,Sf=If;function If(t,e){var n=new Tf,r={},i=new $f,o;function s(l){var u=l.v===o?l.w:l.v,c=i.priority(u);if(c!==void 0){var h=e(l);h<c&&(r[u]=o,i.decrease(u,h))}}if(t.nodeCount()===0)return n;t.nodes().forEach(function(l){i.add(l,Number.POSITIVE_INFINITY),n.setNode(l)}),i.decrease(t.nodes()[0],0);for(var a=!1;i.size()>0;){if(o=i.removeMin(),r.hasOwnProperty(o))n.setEdge(o,r[o]);else{if(a)throw new Error("Input graph is not connected: "+t);a=!0}t.nodeEdges(o).forEach(s)}return n}var Of={components:Qh,dijkstra:bs,dijkstraAll:af,findCycles:hf,floydWarshall:df,isAcyclic:wf,postorder:Ef,preorder:Nf,prim:Sf,tarjan:vs,topsort:Es},xi=Hh,Fe={Graph:xi.Graph,json:Yh,alg:Of,version:xi.version};let Pf=class{constructor(){let e={};e._next=e._prev=e,this._sentinel=e}dequeue(){let e=this._sentinel,n=e._prev;if(n!==e)return Mi(n),n}enqueue(e){let n=this._sentinel;e._prev&&e._next&&Mi(e),e._next=n._next,n._next._prev=e,n._next=e,e._prev=n}toString(){let e=[],n=this._sentinel,r=n._prev;for(;r!==n;)e.push(JSON.stringify(r,Lf)),r=r._prev;return"["+e.join(", ")+"]"}};function Mi(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function Lf(t,e){if(t!=="_next"&&t!=="_prev")return e}var Af=Pf;let Rf=Fe.Graph,Bf=Af;var Df=Vf;let Ff=()=>1;function Vf(t,e){if(t.nodeCount()<=1)return[];let n=jf(t,e||Ff);return Wf(n.graph,n.buckets,n.zeroIdx).flatMap(i=>t.outEdges(i.v,i.w))}function Wf(t,e,n){let r=[],i=e[e.length-1],o=e[0],s;for(;t.nodeCount();){for(;s=o.dequeue();)qn(t,e,n,s);for(;s=i.dequeue();)qn(t,e,n,s);if(t.nodeCount()){for(let a=e.length-2;a>0;--a)if(s=e[a].dequeue(),s){r=r.concat(qn(t,e,n,s,!0));break}}}return r}function qn(t,e,n,r,i){let o=i?[]:void 0;return t.inEdges(r.v).forEach(s=>{let a=t.edge(s),l=t.node(s.v);i&&o.push({v:s.v,w:s.w}),l.out-=a,_r(e,n,l)}),t.outEdges(r.v).forEach(s=>{let a=t.edge(s),l=s.w,u=t.node(l);u.in-=a,_r(e,n,u)}),t.removeNode(r.v),o}function jf(t,e){let n=new Rf,r=0,i=0;t.nodes().forEach(a=>{n.setNode(a,{v:a,in:0,out:0})}),t.edges().forEach(a=>{let l=n.edge(a.v,a.w)||0,u=e(a),c=l+u;n.setEdge(a.v,a.w,c),i=Math.max(i,n.node(a.v).out+=u),r=Math.max(r,n.node(a.w).in+=u)});let o=zf(i+r+3).map(()=>new Bf),s=r+1;return n.nodes().forEach(a=>{_r(o,s,n.node(a))}),{graph:n,buckets:o,zeroIdx:s}}function _r(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}function zf(t){const e=[];for(let n=0;n<t;n++)e.push(n);return e}let Ns=Fe.Graph;var le={addBorderNode:Qf,addDummyNode:Cs,asNonCompoundGraph:Hf,buildLayerMatrix:Uf,intersectRect:Xf,mapValues:id,maxRank:Ts,normalizeRanks:Kf,notime:td,partition:Jf,pick:rd,predecessorWeights:Yf,range:Ss,removeEmptyRanks:Zf,simplify:Gf,successorWeights:qf,time:ed,uniqueId:$s,zipObject:Vr};function Cs(t,e,n,r){let i;do i=$s(r);while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function Gf(t){let e=new Ns().setGraph(t.graph());return t.nodes().forEach(n=>e.setNode(n,t.node(n))),t.edges().forEach(n=>{let r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e}function Hf(t){let e=new Ns({multigraph:t.isMultigraph()}).setGraph(t.graph());return t.nodes().forEach(n=>{t.children(n).length||e.setNode(n,t.node(n))}),t.edges().forEach(n=>{e.setEdge(n,t.edge(n))}),e}function qf(t){let e=t.nodes().map(n=>{let r={};return t.outEdges(n).forEach(i=>{r[i.w]=(r[i.w]||0)+t.edge(i).weight}),r});return Vr(t.nodes(),e)}function Yf(t){let e=t.nodes().map(n=>{let r={};return t.inEdges(n).forEach(i=>{r[i.v]=(r[i.v]||0)+t.edge(i).weight}),r});return Vr(t.nodes(),e)}function Xf(t,e){let n=t.x,r=t.y,i=e.x-n,o=e.y-r,s=t.width/2,a=t.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");let l,u;return Math.abs(o)*s>Math.abs(i)*a?(o<0&&(a=-a),l=a*i/o,u=a):(i<0&&(s=-s),l=s,u=s*o/i),{x:n+l,y:r+u}}function Uf(t){let e=Ss(Ts(t)+1).map(()=>[]);return t.nodes().forEach(n=>{let r=t.node(n),i=r.rank;i!==void 0&&(e[i][r.order]=n)}),e}function Kf(t){let e=Math.min(...t.nodes().map(n=>{let r=t.node(n).rank;return r===void 0?Number.MAX_VALUE:r}));t.nodes().forEach(n=>{let r=t.node(n);r.hasOwnProperty("rank")&&(r.rank-=e)})}function Zf(t){let e=Math.min(...t.nodes().map(o=>t.node(o).rank)),n=[];t.nodes().forEach(o=>{let s=t.node(o).rank-e;n[s]||(n[s]=[]),n[s].push(o)});let r=0,i=t.graph().nodeRankFactor;Array.from(n).forEach((o,s)=>{o===void 0&&s%i!==0?--r:o!==void 0&&r&&o.forEach(a=>t.node(a).rank+=r)})}function Qf(t,e,n,r){let i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),Cs(t,"border",i,e)}function Ts(t){return Math.max(...t.nodes().map(e=>{let n=t.node(e).rank;return n===void 0?Number.MIN_VALUE:n}))}function Jf(t,e){let n={lhs:[],rhs:[]};return t.forEach(r=>{e(r)?n.lhs.push(r):n.rhs.push(r)}),n}function ed(t,e){let n=Date.now();try{return e()}finally{console.log(t+" time: "+(Date.now()-n)+"ms")}}function td(t,e){return e()}let nd=0;function $s(t){var e=++nd;return toString(t)+e}function Ss(t,e,n=1){e==null&&(e=t,t=0);let r=o=>o<e;n<0&&(r=o=>e<o);const i=[];for(let o=t;r(o);o+=n)i.push(o);return i}function rd(t,e){const n={};for(const r of e)t[r]!==void 0&&(n[r]=t[r]);return n}function id(t,e){let n=e;return typeof e=="string"&&(n=r=>r[e]),Object.entries(t).reduce((r,[i,o])=>(r[i]=n(o,i),r),{})}function Vr(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let od=Df,sd=le.uniqueId;var ad={run:ld,undo:cd};function ld(t){(t.graph().acyclicer==="greedy"?od(t,n(t)):ud(t)).forEach(r=>{let i=t.edge(r);t.removeEdge(r),i.forwardName=r.name,i.reversed=!0,t.setEdge(r.w,r.v,i,sd("rev"))});function n(r){return i=>r.edge(i).weight}}function ud(t){let e=[],n={},r={};function i(o){r.hasOwnProperty(o)||(r[o]=!0,n[o]=!0,t.outEdges(o).forEach(s=>{n.hasOwnProperty(s.w)?e.push(s):i(s.w)}),delete n[o])}return t.nodes().forEach(i),e}function cd(t){t.edges().forEach(e=>{let n=t.edge(e);if(n.reversed){t.removeEdge(e);let r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}let hd=le;var fd={run:dd,undo:gd};function dd(t){t.graph().dummyChains=[],t.edges().forEach(e=>pd(t,e))}function pd(t,e){let n=e.v,r=t.node(n).rank,i=e.w,o=t.node(i).rank,s=e.name,a=t.edge(e),l=a.labelRank;if(o===r+1)return;t.removeEdge(e);let u,c,h;for(h=0,++r;r<o;++h,++r)a.points=[],c={width:0,height:0,edgeLabel:a,edgeObj:e,rank:r},u=hd.addDummyNode(t,"edge",c,"_d"),r===l&&(c.width=a.width,c.height=a.height,c.dummy="edge-label",c.labelpos=a.labelpos),t.setEdge(n,u,{weight:a.weight},s),h===0&&t.graph().dummyChains.push(u),n=u;t.setEdge(n,i,{weight:a.weight},s)}function gd(t){t.graph().dummyChains.forEach(e=>{let n=t.node(e),r=n.edgeLabel,i;for(t.setEdge(n.edgeObj,r);n.dummy;)i=t.successors(e)[0],t.removeNode(e),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),e=i,n=t.node(e)})}var Rn={longestPath:md,slack:wd};function md(t){var e={};function n(r){var i=t.node(r);if(e.hasOwnProperty(r))return i.rank;e[r]=!0;var o=Math.min(...t.outEdges(r).map(s=>s==null?Number.POSITIVE_INFINITY:n(s.w)-t.edge(s).minlen));return o===Number.POSITIVE_INFINITY&&(o=0),i.rank=o}t.sources().forEach(n)}function wd(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var _d=Fe.Graph,$n=Rn.slack,Is=yd;function yd(t){var e=new _d({directed:!1}),n=t.nodes()[0],r=t.nodeCount();e.setNode(n,{});for(var i,o;bd(e,t)<r;)i=vd(e,t),o=e.hasNode(i.v)?$n(t,i):-$n(t,i),kd(e,t,o);return e}function bd(t,e){function n(r){e.nodeEdges(r).forEach(i=>{var o=i.v,s=r===o?i.w:o;!t.hasNode(s)&&!$n(e,i)&&(t.setNode(s,{}),t.setEdge(r,s,{}),n(s))})}return t.nodes().forEach(n),t.nodeCount()}function vd(t,e){return e.edges().reduce((r,i)=>{let o=Number.POSITIVE_INFINITY;return t.hasNode(i.v)!==t.hasNode(i.w)&&(o=$n(e,i)),o<r[0]?[o,i]:r},[Number.POSITIVE_INFINITY,null])[1]}function kd(t,e,n){t.nodes().forEach(r=>e.node(r).rank+=n)}var Ed=Is,Ni=Rn.slack,xd=Rn.longestPath,Md=Fe.alg.preorder,Nd=Fe.alg.postorder,Cd=le.simplify,Td=pt;pt.initLowLimValues=jr;pt.initCutValues=Wr;pt.calcCutValue=Os;pt.leaveEdge=Ls;pt.enterEdge=As;pt.exchangeEdges=Rs;function pt(t){t=Cd(t),xd(t);var e=Ed(t);jr(e),Wr(e,t);for(var n,r;n=Ls(e);)r=As(e,t,n),Rs(e,t,n,r)}function Wr(t,e){var n=Nd(t,t.nodes());n=n.slice(0,n.length-1),n.forEach(r=>$d(t,e,r))}function $d(t,e,n){var r=t.node(n),i=r.parent;t.edge(n,i).cutvalue=Os(t,e,n)}function Os(t,e,n){var r=t.node(n),i=r.parent,o=!0,s=e.edge(n,i),a=0;return s||(o=!1,s=e.edge(i,n)),a=s.weight,e.nodeEdges(n).forEach(l=>{var u=l.v===n,c=u?l.w:l.v;if(c!==i){var h=u===o,f=e.edge(l).weight;if(a+=h?f:-f,Id(t,n,c)){var d=t.edge(n,c).cutvalue;a+=h?-d:d}}}),a}function jr(t,e){arguments.length<2&&(e=t.nodes()[0]),Ps(t,{},1,e)}function Ps(t,e,n,r,i){var o=n,s=t.node(r);return e[r]=!0,t.neighbors(r).forEach(a=>{e.hasOwnProperty(a)||(n=Ps(t,e,n,a,r))}),s.low=o,s.lim=n++,i?s.parent=i:delete s.parent,n}function Ls(t){return t.edges().find(e=>t.edge(e).cutvalue<0)}function As(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var o=t.node(r),s=t.node(i),a=o,l=!1;o.lim>s.lim&&(a=s,l=!0);var u=e.edges().filter(c=>l===Ci(t,t.node(c.v),a)&&l!==Ci(t,t.node(c.w),a));return u.reduce((c,h)=>Ni(e,h)<Ni(e,c)?h:c)}function Rs(t,e,n,r){var i=n.v,o=n.w;t.removeEdge(i,o),t.setEdge(r.v,r.w,{}),jr(t),Wr(t,e),Sd(t,e)}function Sd(t,e){var n=t.nodes().find(i=>!e.node(i).parent),r=Md(t,n);r=r.slice(1),r.forEach(i=>{var o=t.node(i).parent,s=e.edge(i,o),a=!1;s||(s=e.edge(o,i),a=!0),e.node(i).rank=e.node(o).rank+(a?s.minlen:-s.minlen)})}function Id(t,e,n){return t.hasEdge(e,n)}function Ci(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}var Od=Rn,Bs=Od.longestPath,Pd=Is,Ld=Td,Ad=Rd;function Rd(t){switch(t.graph().ranker){case"network-simplex":Ti(t);break;case"tight-tree":Dd(t);break;case"longest-path":Bd(t);break;default:Ti(t)}}var Bd=Bs;function Dd(t){Bs(t),Pd(t)}function Ti(t){Ld(t)}var Fd=Vd;function Vd(t){let e=jd(t);t.graph().dummyChains.forEach(n=>{let r=t.node(n),i=r.edgeObj,o=Wd(t,e,i.v,i.w),s=o.path,a=o.lca,l=0,u=s[l],c=!0;for(;n!==i.w;){if(r=t.node(n),c){for(;(u=s[l])!==a&&t.node(u).maxRank<r.rank;)l++;u===a&&(c=!1)}if(!c){for(;l<s.length-1&&t.node(u=s[l+1]).minRank<=r.rank;)l++;u=s[l]}t.setParent(n,u),n=t.successors(n)[0]}})}function Wd(t,e,n,r){let i=[],o=[],s=Math.min(e[n].low,e[r].low),a=Math.max(e[n].lim,e[r].lim),l,u;l=n;do l=t.parent(l),i.push(l);while(l&&(e[l].low>s||a>e[l].lim));for(u=l,l=r;(l=t.parent(l))!==u;)o.push(l);return{path:i.concat(o.reverse()),lca:u}}function jd(t){let e={},n=0;function r(i){let o=n;t.children(i).forEach(r),e[i]={low:o,lim:n++}}return t.children().forEach(r),e}let yr=le;var zd={run:Gd,cleanup:Yd};function Gd(t){let e=yr.addDummyNode(t,"root",{},"_root"),n=Hd(t),r=Math.max(...Object.values(n))-1,i=2*r+1;t.graph().nestingRoot=e,t.edges().forEach(s=>t.edge(s).minlen*=i);let o=qd(t)+1;t.children().forEach(s=>Ds(t,e,i,o,r,n,s)),t.graph().nodeRankFactor=i}function Ds(t,e,n,r,i,o,s){let a=t.children(s);if(!a.length){s!==e&&t.setEdge(e,s,{weight:0,minlen:n});return}let l=yr.addBorderNode(t,"_bt"),u=yr.addBorderNode(t,"_bb"),c=t.node(s);t.setParent(l,s),c.borderTop=l,t.setParent(u,s),c.borderBottom=u,a.forEach(h=>{Ds(t,e,n,r,i,o,h);let f=t.node(h),d=f.borderTop?f.borderTop:h,g=f.borderBottom?f.borderBottom:h,_=f.borderTop?r:2*r,E=d!==g?1:i-o[s]+1;t.setEdge(l,d,{weight:_,minlen:E,nestingEdge:!0}),t.setEdge(g,u,{weight:_,minlen:E,nestingEdge:!0})}),t.parent(s)||t.setEdge(e,l,{weight:0,minlen:i+o[s]})}function Hd(t){var e={};function n(r,i){var o=t.children(r);o&&o.length&&o.forEach(s=>n(s,i+1)),e[r]=i}return t.children().forEach(r=>n(r,1)),e}function qd(t){return t.edges().reduce((e,n)=>e+t.edge(n).weight,0)}function Yd(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,t.edges().forEach(n=>{var r=t.edge(n);r.nestingEdge&&t.removeEdge(n)})}let Xd=le;var Ud=Kd;function Kd(t){function e(n){let r=t.children(n),i=t.node(n);if(r.length&&r.forEach(e),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(let o=i.minRank,s=i.maxRank+1;o<s;++o)$i(t,"borderLeft","_bl",n,i,o),$i(t,"borderRight","_br",n,i,o)}}t.children().forEach(e)}function $i(t,e,n,r,i,o){let s={width:0,height:0,rank:o,borderType:e},a=i[e][o-1],l=Xd.addDummyNode(t,"border",s,n);i[e][o]=l,t.setParent(l,r),a&&t.setEdge(a,l,{weight:1})}var Zd={adjust:Qd,undo:Jd};function Qd(t){let e=t.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&Fs(t)}function Jd(t){let e=t.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&ep(t),(e==="lr"||e==="rl")&&(tp(t),Fs(t))}function Fs(t){t.nodes().forEach(e=>Si(t.node(e))),t.edges().forEach(e=>Si(t.edge(e)))}function Si(t){let e=t.width;t.width=t.height,t.height=e}function ep(t){t.nodes().forEach(e=>Yn(t.node(e))),t.edges().forEach(e=>{let n=t.edge(e);n.points.forEach(Yn),n.hasOwnProperty("y")&&Yn(n)})}function Yn(t){t.y=-t.y}function tp(t){t.nodes().forEach(e=>Xn(t.node(e))),t.edges().forEach(e=>{let n=t.edge(e);n.points.forEach(Xn),n.hasOwnProperty("x")&&Xn(n)})}function Xn(t){let e=t.x;t.x=t.y,t.y=e}let np=le;var rp=ip;function ip(t){let e={},n=t.nodes().filter(a=>!t.children(a).length),r=Math.max(...n.map(a=>t.node(a).rank)),i=np.range(r+1).map(()=>[]);function o(a){if(e[a])return;e[a]=!0;let l=t.node(a);i[l.rank].push(a),t.successors(a).forEach(o)}return n.sort((a,l)=>t.node(a).rank-t.node(l).rank).forEach(o),i}let op=le.zipObject;var sp=ap;function ap(t,e){let n=0;for(let r=1;r<e.length;++r)n+=lp(t,e[r-1],e[r]);return n}function lp(t,e,n){let r=op(n,n.map((u,c)=>c)),i=e.flatMap(u=>t.outEdges(u).map(c=>({pos:r[c.w],weight:t.edge(c).weight})).sort((c,h)=>c.pos-h.pos)),o=1;for(;o<n.length;)o<<=1;let s=2*o-1;o-=1;let a=new Array(s).fill(0),l=0;return i.forEach(u=>{let c=u.pos+o;a[c]+=u.weight;let h=0;for(;c>0;)c%2&&(h+=a[c+1]),c=c-1>>1,a[c]+=u.weight;l+=u.weight*h}),l}var up=cp;function cp(t,e=[]){return e.map(n=>{let r=t.inEdges(n);if(r.length){let i=r.reduce((o,s)=>{let a=t.edge(s),l=t.node(s.v);return{sum:o.sum+a.weight*l.order,weight:o.weight+a.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}let hp=le;var fp=dp;function dp(t,e){let n={};t.forEach((i,o)=>{let s=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:o};i.barycenter!==void 0&&(s.barycenter=i.barycenter,s.weight=i.weight)}),e.edges().forEach(i=>{let o=n[i.v],s=n[i.w];o!==void 0&&s!==void 0&&(s.indegree++,o.out.push(n[i.w]))});let r=Object.values(n).filter(i=>!i.indegree);return pp(r)}function pp(t){let e=[];function n(i){return o=>{o.merged||(o.barycenter===void 0||i.barycenter===void 0||o.barycenter>=i.barycenter)&&gp(i,o)}}function r(i){return o=>{o.in.push(i),--o.indegree===0&&t.push(o)}}for(;t.length;){let i=t.pop();e.push(i),i.in.reverse().forEach(n(i)),i.out.forEach(r(i))}return e.filter(i=>!i.merged).map(i=>hp.pick(i,["vs","i","barycenter","weight"]))}function gp(t,e){let n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}let mp=le;var wp=_p;function _p(t,e){let n=mp.partition(t,c=>c.hasOwnProperty("barycenter")),r=n.lhs,i=n.rhs.sort((c,h)=>h.i-c.i),o=[],s=0,a=0,l=0;r.sort(yp(!!e)),l=Ii(o,i,l),r.forEach(c=>{l+=c.vs.length,o.push(c.vs),s+=c.barycenter*c.weight,a+=c.weight,l=Ii(o,i,l)});let u={vs:o.flat(!0)};return a&&(u.barycenter=s/a,u.weight=a),u}function Ii(t,e,n){let r;for(;e.length&&(r=e[e.length-1]).i<=n;)e.pop(),t.push(r.vs),n++;return n}function yp(t){return(e,n)=>e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}let bp=up,vp=fp,kp=wp;var Ep=Vs;function Vs(t,e,n,r){let i=t.children(e),o=t.node(e),s=o?o.borderLeft:void 0,a=o?o.borderRight:void 0,l={};s&&(i=i.filter(f=>f!==s&&f!==a));let u=bp(t,i);u.forEach(f=>{if(t.children(f.v).length){let d=Vs(t,f.v,n,r);l[f.v]=d,d.hasOwnProperty("barycenter")&&Mp(f,d)}});let c=vp(u,n);xp(c,l);let h=kp(c,r);if(s&&(h.vs=[s,h.vs,a].flat(!0),t.predecessors(s).length)){let f=t.node(t.predecessors(s)[0]),d=t.node(t.predecessors(a)[0]);h.hasOwnProperty("barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+f.order+d.order)/(h.weight+2),h.weight+=2}return h}function xp(t,e){t.forEach(n=>{n.vs=n.vs.flatMap(r=>e[r]?e[r].vs:r)})}function Mp(t,e){t.barycenter!==void 0?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)}let Np=Fe.Graph,Cp=le;var Tp=$p;function $p(t,e,n){let r=Sp(t),i=new Np({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(o=>t.node(o));return t.nodes().forEach(o=>{let s=t.node(o),a=t.parent(o);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(i.setNode(o),i.setParent(o,a||r),t[n](o).forEach(l=>{let u=l.v===o?l.w:l.v,c=i.edge(u,o),h=c!==void 0?c.weight:0;i.setEdge(u,o,{weight:t.edge(l).weight+h})}),s.hasOwnProperty("minRank")&&i.setNode(o,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),i}function Sp(t){for(var e;t.hasNode(e=Cp.uniqueId("_root")););return e}var Ip=Op;function Op(t,e,n){let r={},i;n.forEach(o=>{let s=t.parent(o),a,l;for(;s;){if(a=t.parent(s),a?(l=r[a],r[a]=s):(l=i,i=s),l&&l!==s){e.setEdge(l,s);return}s=a}})}let Pp=rp,Lp=sp,Ap=Ep,Rp=Tp,Bp=Ip,Dp=Fe.Graph,hn=le;var Fp=Ws;function Ws(t,e){if(e&&typeof e.customOrder=="function"){e.customOrder(t,Ws);return}let n=hn.maxRank(t),r=Oi(t,hn.range(1,n+1),"inEdges"),i=Oi(t,hn.range(n-1,-1,-1),"outEdges"),o=Pp(t);if(Pi(t,o),e&&e.disableOptimalOrderHeuristic)return;let s=Number.POSITIVE_INFINITY,a;for(let l=0,u=0;u<4;++l,++u){Vp(l%2?r:i,l%4>=2),o=hn.buildLayerMatrix(t);let c=Lp(t,o);c<s&&(u=0,a=Object.assign({},o),s=c)}Pi(t,a)}function Oi(t,e,n){return e.map(function(r){return Rp(t,r,n)})}function Vp(t,e){let n=new Dp;t.forEach(function(r){let i=r.graph().root,o=Ap(r,i,n,e);o.vs.forEach((s,a)=>r.node(s).order=a),Bp(r,n,o.vs)})}function Pi(t,e){Object.values(e).forEach(n=>n.forEach((r,i)=>t.node(r).order=i))}let Wp=Fe.Graph,Qt=le;var jp={positionX:Hp,findType1Conflicts:js,findType2Conflicts:zs,addConflict:zr,hasConflict:Gs,verticalAlignment:Hs,horizontalCompaction:qs,alignCoordinates:Xs,findSmallestWidthAlignment:Ys,balance:Us};function js(t,e){let n={};function r(i,o){let s=0,a=0,l=i.length,u=o[o.length-1];return o.forEach((c,h)=>{let f=zp(t,c),d=f?t.node(f).order:l;(f||c===u)&&(o.slice(a,h+1).forEach(g=>{t.predecessors(g).forEach(_=>{let E=t.node(_),$=E.order;($<s||d<$)&&!(E.dummy&&t.node(g).dummy)&&zr(n,_,g)})}),a=h+1,s=d)}),o}return e.length&&e.reduce(r),n}function zs(t,e){let n={};function r(o,s,a,l,u){let c;Qt.range(s,a).forEach(h=>{c=o[h],t.node(c).dummy&&t.predecessors(c).forEach(f=>{let d=t.node(f);d.dummy&&(d.order<l||d.order>u)&&zr(n,f,c)})})}function i(o,s){let a=-1,l,u=0;return s.forEach((c,h)=>{if(t.node(c).dummy==="border"){let f=t.predecessors(c);f.length&&(l=t.node(f[0]).order,r(s,u,h,a,l),u=h,a=l)}r(s,u,s.length,l,o.length)}),s}return e.length&&e.reduce(i),n}function zp(t,e){if(t.node(e).dummy)return t.predecessors(e).find(n=>t.node(n).dummy)}function zr(t,e,n){if(e>n){let i=e;e=n,n=i}let r=t[e];r||(t[e]=r={}),r[n]=!0}function Gs(t,e,n){if(e>n){let r=e;e=n,n=r}return!!t[e]&&t[e].hasOwnProperty(n)}function Hs(t,e,n,r){let i={},o={},s={};return e.forEach(a=>{a.forEach((l,u)=>{i[l]=l,o[l]=l,s[l]=u})}),e.forEach(a=>{let l=-1;a.forEach(u=>{let c=r(u);if(c.length){c=c.sort((f,d)=>s[f]-s[d]);let h=(c.length-1)/2;for(let f=Math.floor(h),d=Math.ceil(h);f<=d;++f){let g=c[f];o[u]===u&&l<s[g]&&!Gs(n,u,g)&&(o[g]=u,o[u]=i[u]=i[g],l=s[g])}}})}),{root:i,align:o}}function qs(t,e,n,r,i){let o={},s=Gp(t,e,n,i),a=i?"borderLeft":"borderRight";function l(h,f){let d=s.nodes(),g=d.pop(),_={};for(;g;)_[g]?h(g):(_[g]=!0,d.push(g),d=d.concat(f(g))),g=d.pop()}function u(h){o[h]=s.inEdges(h).reduce((f,d)=>Math.max(f,o[d.v]+s.edge(d)),0)}function c(h){let f=s.outEdges(h).reduce((g,_)=>Math.min(g,o[_.w]-s.edge(_)),Number.POSITIVE_INFINITY),d=t.node(h);f!==Number.POSITIVE_INFINITY&&d.borderType!==a&&(o[h]=Math.max(o[h],f))}return l(u,s.predecessors.bind(s)),l(c,s.successors.bind(s)),Object.keys(r).forEach(h=>o[h]=o[n[h]]),o}function Gp(t,e,n,r){let i=new Wp,o=t.graph(),s=qp(o.nodesep,o.edgesep,r);return e.forEach(a=>{let l;a.forEach(u=>{let c=n[u];if(i.setNode(c),l){var h=n[l],f=i.edge(h,c);i.setEdge(h,c,Math.max(s(t,u,l),f||0))}l=u})}),i}function Ys(t,e){return Object.values(e).reduce((n,r)=>{let i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;Object.entries(r).forEach(([a,l])=>{let u=Yp(t,a)/2;i=Math.max(l+u,i),o=Math.min(l-u,o)});const s=i-o;return s<n[0]&&(n=[s,r]),n},[Number.POSITIVE_INFINITY,null])[1]}function Xs(t,e){let n=Object.values(e),r=Math.min(...n),i=Math.max(...n);["u","d"].forEach(o=>{["l","r"].forEach(s=>{let a=o+s,l=t[a];if(l===e)return;let u=Object.values(l),c=r-Math.min(...u);s!=="l"&&(c=i-Math.max(...u)),c&&(t[a]=Qt.mapValues(l,h=>h+c))})})}function Us(t,e){return Qt.mapValues(t.ul,(n,r)=>{if(e)return t[e.toLowerCase()][r];{let i=Object.values(t).map(o=>o[r]).sort((o,s)=>o-s);return(i[1]+i[2])/2}})}function Hp(t){let e=Qt.buildLayerMatrix(t),n=Object.assign(js(t,e),zs(t,e)),r={},i;["u","d"].forEach(s=>{i=s==="u"?e:Object.values(e).reverse(),["l","r"].forEach(a=>{a==="r"&&(i=i.map(h=>Object.values(h).reverse()));let l=(s==="u"?t.predecessors:t.successors).bind(t),u=Hs(t,i,n,l),c=qs(t,i,u.root,u.align,a==="r");a==="r"&&(c=Qt.mapValues(c,h=>-h)),r[s+a]=c})});let o=Ys(t,r);return Xs(r,o),Us(r,t.graph().align)}function qp(t,e,n){return(r,i,o)=>{let s=r.node(i),a=r.node(o),l=0,u;if(l+=s.width/2,s.hasOwnProperty("labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(s.dummy?e:t)/2,l+=(a.dummy?e:t)/2,l+=a.width/2,a.hasOwnProperty("labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=a.width/2;break;case"r":u=-a.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function Yp(t,e){return t.node(e).width}let Ks=le,Xp=jp.positionX;var Up=Kp;function Kp(t){t=Ks.asNonCompoundGraph(t),Zp(t),Object.entries(Xp(t)).forEach(([e,n])=>t.node(e).x=n)}function Zp(t){let e=Ks.buildLayerMatrix(t),n=t.graph().ranksep,r=0;e.forEach(i=>{const o=i.reduce((s,a)=>{const l=t.node(a).height;return s>l?s:l},0);i.forEach(s=>t.node(s).y=r+o/2),r+=o+n})}let Li=ad,Ai=fd,Qp=Ad,Jp=le.normalizeRanks,eg=Fd,tg=le.removeEmptyRanks,Ri=zd,ng=Ud,Bi=Zd,rg=Fp,ig=Up,Re=le,og=Fe.Graph;var sg=ag;function ag(t,e){let n=e&&e.debugTiming?Re.time:Re.notime;n("layout",()=>{let r=n("  buildLayoutGraph",()=>wg(t));n("  runLayout",()=>lg(r,n)),n("  updateInputGraph",()=>ug(t,r))})}function lg(t,e){e("    makeSpaceForEdgeLabels",()=>_g(t)),e("    removeSelfEdges",()=>Cg(t)),e("    acyclic",()=>Li.run(t)),e("    nestingGraph.run",()=>Ri.run(t)),e("    rank",()=>Qp(Re.asNonCompoundGraph(t))),e("    injectEdgeLabelProxies",()=>yg(t)),e("    removeEmptyRanks",()=>tg(t)),e("    nestingGraph.cleanup",()=>Ri.cleanup(t)),e("    normalizeRanks",()=>Jp(t)),e("    assignRankMinMax",()=>bg(t)),e("    removeEdgeLabelProxies",()=>vg(t)),e("    normalize.run",()=>Ai.run(t)),e("    parentDummyChains",()=>eg(t)),e("    addBorderSegments",()=>ng(t)),e("    order",()=>rg(t)),e("    insertSelfEdges",()=>Tg(t)),e("    adjustCoordinateSystem",()=>Bi.adjust(t)),e("    position",()=>ig(t)),e("    positionSelfEdges",()=>$g(t)),e("    removeBorderNodes",()=>Ng(t)),e("    normalize.undo",()=>Ai.undo(t)),e("    fixupEdgeLabelCoords",()=>xg(t)),e("    undoCoordinateSystem",()=>Bi.undo(t)),e("    translateGraph",()=>kg(t)),e("    assignNodeIntersects",()=>Eg(t)),e("    reversePoints",()=>Mg(t)),e("    acyclic.undo",()=>Li.undo(t))}function ug(t,e){t.nodes().forEach(n=>{let r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,r.rank=i.rank,e.children(n).length&&(r.width=i.width,r.height=i.height))}),t.edges().forEach(n=>{let r=t.edge(n),i=e.edge(n);r.points=i.points,i.hasOwnProperty("x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}let cg=["nodesep","edgesep","ranksep","marginx","marginy"],hg={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},fg=["acyclicer","ranker","rankdir","align"],dg=["width","height"],Di={width:0,height:0},pg=["minlen","weight","width","height","labeloffset"],gg={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},mg=["labelpos"];function wg(t){let e=new og({multigraph:!0,compound:!0}),n=Kn(t.graph());return e.setGraph(Object.assign({},hg,Un(n,cg),Re.pick(n,fg))),t.nodes().forEach(r=>{let i=Kn(t.node(r));const o=Un(i,dg);Object.keys(Di).forEach(s=>{o[s]===void 0&&(o[s]=Di[s])}),e.setNode(r,o),e.setParent(r,t.parent(r))}),t.edges().forEach(r=>{let i=Kn(t.edge(r));e.setEdge(r,Object.assign({},gg,Un(i,pg),Re.pick(i,mg)))}),e}function _g(t){let e=t.graph();e.ranksep/=2,t.edges().forEach(n=>{let r=t.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function yg(t){t.edges().forEach(e=>{let n=t.edge(e);if(n.width&&n.height){let r=t.node(e.v),o={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e};Re.addDummyNode(t,"edge-proxy",o,"_ep")}})}function bg(t){let e=0;t.nodes().forEach(n=>{let r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=Math.max(e,r.maxRank))}),t.graph().maxRank=e}function vg(t){t.nodes().forEach(e=>{let n=t.node(e);n.dummy==="edge-proxy"&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}function kg(t){let e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=t.graph(),s=o.marginx||0,a=o.marginy||0;function l(u){let c=u.x,h=u.y,f=u.width,d=u.height;e=Math.min(e,c-f/2),n=Math.max(n,c+f/2),r=Math.min(r,h-d/2),i=Math.max(i,h+d/2)}t.nodes().forEach(u=>l(t.node(u))),t.edges().forEach(u=>{let c=t.edge(u);c.hasOwnProperty("x")&&l(c)}),e-=s,r-=a,t.nodes().forEach(u=>{let c=t.node(u);c.x-=e,c.y-=r}),t.edges().forEach(u=>{let c=t.edge(u);c.points.forEach(h=>{h.x-=e,h.y-=r}),c.hasOwnProperty("x")&&(c.x-=e),c.hasOwnProperty("y")&&(c.y-=r)}),o.width=n-e+s,o.height=i-r+a}function Eg(t){t.edges().forEach(e=>{let n=t.edge(e),r=t.node(e.v),i=t.node(e.w),o,s;n.points?(o=n.points[0],s=n.points[n.points.length-1]):(n.points=[],o=i,s=r),n.points.unshift(Re.intersectRect(r,o)),n.points.push(Re.intersectRect(i,s))})}function xg(t){t.edges().forEach(e=>{let n=t.edge(e);if(n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function Mg(t){t.edges().forEach(e=>{let n=t.edge(e);n.reversed&&n.points.reverse()})}function Ng(t){t.nodes().forEach(e=>{if(t.children(e).length){let n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(n.borderLeft[n.borderLeft.length-1]),s=t.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(s.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),t.nodes().forEach(e=>{t.node(e).dummy==="border"&&t.removeNode(e)})}function Cg(t){t.edges().forEach(e=>{if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}})}function Tg(t){var e=Re.buildLayerMatrix(t);e.forEach(n=>{var r=0;n.forEach((i,o)=>{var s=t.node(i);s.order=o+r,(s.selfEdges||[]).forEach(a=>{Re.addDummyNode(t,"selfedge",{width:a.label.width,height:a.label.height,rank:s.rank,order:o+ ++r,e:a.e,label:a.label},"_se")}),delete s.selfEdges})})}function $g(t){t.nodes().forEach(e=>{var n=t.node(e);if(n.dummy==="selfedge"){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,s=n.x-i,a=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*s/3,y:o-a},{x:i+5*s/6,y:o-a},{x:i+s,y:o},{x:i+5*s/6,y:o+a},{x:i+2*s/3,y:o+a}],n.label.x=n.x,n.label.y=n.y}})}function Un(t,e){return Re.mapValues(Re.pick(t,e),Number)}function Kn(t){var e={};return t&&Object.entries(t).forEach(([n,r])=>{typeof n=="string"&&(n=n.toLowerCase()),e[n]=r}),e}let Sg=le,Ig=Fe.Graph;var Og={debugOrdering:Pg};function Pg(t){let e=Sg.buildLayerMatrix(t),n=new Ig({compound:!0,multigraph:!0}).setGraph({});return t.nodes().forEach(r=>{n.setNode(r,{label:r}),n.setParent(r,"layer"+t.node(r).rank)}),t.edges().forEach(r=>n.setEdge(r.v,r.w,{},r.name)),e.forEach((r,i)=>{let o="layer"+i;n.setNode(o,{rank:"same"}),r.reduce((s,a)=>(n.setEdge(s,a,{style:"invis"}),a))}),n}var Lg="1.1.2",vn={graphlib:Fe,layout:sg,debug:Og,util:{time:le.time,notime:le.notime},version:Lg};const Fi=Vh(vn);class Ag{compute(e,n){const r=new Fi.graphlib.Graph;r.setGraph({}),r.setDefaultEdgeLabel(()=>({})),r.setDefaultNodeLabel(()=>({}));const i=new Map,o=new Map,s=new Map,a=new Map,l=k=>{const y=e.childrenT(k);if(y.length===0){const m=e.node(k).build(),{width:b,height:N}=m.boundingBox();r.setNode(k,{width:b,height:N}),i.set(k,m)}else{if(!n.has(k)&&k!==e.root()){const m=e.node(k);s.set(k,{boundingBox:{},name:m.humanReadable()||k})}for(const m of y)if(n.has(m))for(const b of e.hierarchyPreorder(m)){const N=e.node(m).build();a.set(b,m);const{width:v,height:O}=N.boundingBox();r.setNode(m,{width:v,height:O}),o.set(m,N)}else l(m)}};l(e.root());for(const{v:k,w:y}of e.edges()){const m=a.get(k)||k,b=a.get(y)||y;m!==b&&r.setEdge(m,b)}const u=performance.now();Fi.layout(r);const c=performance.now(),{width:h,height:f}=r.graph(),d=new ne(0,0,h,f);for(const[k,y]of i.entries()){const{x:m,y:b,width:N,height:v}=r.node(k);y.moveTo(m-N/2,b-v/2)}for(const[k,y]of o.entries()){const{x:m,y:b,width:N,height:v}=r.node(k);y.moveTo(m-N/2,b-v/2)}const g=20;for(const k of e.hierarchyPostorder()){const y=s.get(k);if(y!==void 0){const m=e.childrenT(k).reduce((b,N)=>{var v,O,D;const z=(v=i.get(N))==null?void 0:v.boundingBox();z!==void 0&&b.push(z);const U=(O=o.get(N))==null?void 0:O.boundingBox();U!==void 0&&b.push(U);const W=(D=s.get(N))==null?void 0:D.boundingBox;if(W!==void 0&&N!==k){const C=2*-g+10,M=ne.fromCenterAndDimension(W.center,W.width+C,W.height+C);b.push(M)}return b},[]);y.boundingBox=ne.fromUnion(...m).padded(g)}}const _=r.edges().map(k=>{const{points:y}=r.edge(k);return[{from:k.v,to:k.w},new Lr(y)]}).map(([k,y])=>y),E={layoutTimeMs:c-u},$=new fs(..._);return{nodes:i,collapsed:o,expanded:s,edges:$,boundingBox:d.union($.boundingBox()),stats:E}}}class Gr extends vn.graphlib.Graph{constructor(e){super({compound:!0}),e!==void 0?Object.assign(this,e):(this.setGraph({}),this.setDefaultEdgeLabel(()=>({})))}setNodeWithParent(e,n,r){this.setNode(e,n),this.setParent(e,r)}parents(e){const n=[];let r=this.parent(e);for(;r!==void 0;)n.push(r),r=this.parent(r);return n}hierarchyPreorder(e){const n=[],r=e!==void 0?e:this.root(),i=o=>{n.push(o);for(const s of this.childrenT(o))i(s)};for(const o of this.childrenT(r))i(o);return n}hierarchyPostorder(e){const n=[],r=e!==void 0?e:this.root(),i=o=>{for(const s of this.childrenT(o))i(s);n.push(o)};for(const o of this.childrenT(r))i(o);return n}childrenT(e){return this.children(e)}parent(e){return super.parent(e)}nodes(){return super.nodes()}modules(){return this.nodes().filter(e=>this.childrenT(e).length>0)}edges(){return super.edges()}root(){return"\0"}toJson(){return vn.graphlib.json.write(this)}static readJson(e){return new Gr(vn.graphlib.json.read(e))}}function Rg(t,e,n,r){const i=new Set,o=new Set;if(r.expand)for(const a of e)for(const l of t.parents(a))n.has(l)?o.add(l):i.add(l);const s=new Set;if(r.collapseOthers)for(const a of t.modules())!o.has(a)&&!n.has(a)&&!i.has(a)&&s.add(a);return{collapse:s,expand:o}}function Bg(t,e){const n=r=>e.has(r)||t.childrenT(r).length===0?1:t.childrenT(r).reduce((i,o)=>i+n(o),0);return t.childrenT(t.root()).reduce((r,i)=>r+n(i),0)}function Dg(t){let e;return{c(){e=X("path"),p(e,"d","M20.441,59.9614212 C21.0957895,59.9614212 22.7266842,56.6764211 22.7266842,52.7482369 L22.7266842,38.6593685 L18.182579,38.6593685 L18.182579,52.7482369 C18.182579,56.6764211 19.8134737,59.9614212 20.441,59.9614212 Z M4.26163159,40.7638948 L36.6204211,40.7638948 C38.9460001,40.7638948 40.4145264,39.317579 40.4145264,37.1453685 C40.4145264,29.5821053 31.9740001,21.9558421 20.441,21.9558421 C8.93526317,21.9558421 0.494736843,29.5821053 0.494736843,37.1453685 C0.494736843,39.317579 1.96884211,40.7638948 4.26163159,40.7638948 Z M5.2911579,36.8756316 C4.71700001,36.8756316 4.4541579,36.5583159 4.56310527,35.8480001 C5.1023158,31.2280527 11.0429474,25.7078948 20.441,25.7078948 C29.8718948,25.7078948 35.7796843,31.2280527 36.346158,35.8480001 C36.4551053,36.5583159 36.1650001,36.8756316 35.5908948,36.8756316 L5.2911579,36.8756316 Z M3.74989474,2.76857895 C3.74989474,3.55452632 4.0611579,4.40605264 4.72705264,5.26868422 C6.03868422,7.0183158 9.13778949,9.44489475 12.3810527,11.5798421 L11.4523158,25.1263685 L15.5584737,25.1263685 L16.4983158,9.67205265 C16.5311053,9.30078949 16.4711053,9.17515791 16.2254211,9.04952633 C12.3641579,7.09368422 9.37084212,4.73952632 9.18573686,4.22889474 C8.96778949,3.90094737 9.18626317,3.66589474 9.48189475,3.66589474 L31.4273685,3.66589474 C31.7013158,3.66589474 31.9142106,3.90094737 31.7291053,4.22889474 C31.5112106,4.73952632 28.5451053,7.09368422 24.6621579,9.04952633 C24.4437369,9.17515791 24.3836843,9.30078949 24.4164737,9.67205265 L25.3563685,25.1263685 L29.4569474,25.1263685 L28.501,11.5798421 C31.7497895,9.44489475 34.8488948,7.0183158 36.1605264,5.26868422 C36.8481053,4.40605264 37.1593685,3.55452632 37.1593685,2.76857895 C37.1593685,1.20726316 35.9421053,0.0500000001 34.1512632,0.0500000001 L6.75800001,0.0500000001 C4.93989475,0.0500000001 3.74989474,1.20726316 3.74989474,2.76857895 Z"),p(e,"transform","translate(11.737 2)"),p(e,"fill",t[0]),p(e,"stroke",t[1])},m(n,r){V(n,e,r)},p(n,[r]){r&1&&p(e,"fill",n[0]),r&2&&p(e,"stroke",n[1])},i:Y,o:Y,d(n){n&&B(e)}}}function Fg(t,e,n){let{fill:r="white"}=e,{stroke:i="white"}=e;return t.$$set=o=>{"fill"in o&&n(0,r=o.fill),"stroke"in o&&n(1,i=o.stroke)},[r,i]}class Vg extends be{constructor(e){super(),ye(this,e,Fg,Dg,we,{fill:0,stroke:1})}}function Wg(t){let e,n,r,i,o,s,a,l,u,c,h,f,d;const g=[{self:t[0].content}];var _=t[0].content.drawable();function E($,k){let y={};for(let m=0;m<g.length;m+=1)y=Ze(y,g[m]);return k!==void 0&&k&1&&(y=Ze(y,St(g,[{self:$[0].content}]))),{props:y}}return _&&(n=$t(_,E(t))),u=new Vg({}),{c(){e=X("g"),n&&ae(n.$$.fragment),r=X("g"),i=X("rect"),s=X("text"),a=Ge("Pin"),l=X("g"),ae(u.$$.fragment),p(i,"x","-37"),p(i,"y","-10"),p(i,"width","50"),p(i,"height","20"),p(i,"rx","10"),p(i,"fill",o=t[1]==="pinned"?"orange":"rgb(51,51,51)"),p(i,"stroke","white"),p(i,"stroke-width","2"),p(s,"x","-18"),p(s,"y",1),p(s,"font-family",Jt.family),p(s,"font-size","10"),p(s,"text-anchor","middle"),p(s,"dominant-baseline","middle"),p(s,"fill","white"),p(l,"transform","scale(0.2) translate(-32 -30)"),p(r,"transform",c=`translate(${t[2].width+t[6].x},${-t[6].y})`),p(r,"cursor","pointer"),p(e,"role","tooltip")},m($,k){V($,e,k),n&&ie(n,e,null),G(e,r),G(r,i),G(r,s),G(s,a),G(r,l),ie(u,l,null),h=!0,f||(d=[re(r,"click",t[3]),re(r,"keydown",t[3]),re(e,"mouseenter",t[4]),re(e,"mouseleave",t[5])],f=!0)},p($,[k]){if(k&1&&_!==(_=$[0].content.drawable())){if(n){Ne();const y=n;j(y.$$.fragment,1,0,()=>{oe(y,1)}),Ce()}_?(n=$t(_,E($,k)),ae(n.$$.fragment),L(n.$$.fragment,1),ie(n,e,r)):n=null}else if(_){const y=k&1?St(g,[{self:$[0].content}]):{};n.$set(y)}(!h||k&2&&o!==(o=$[1]==="pinned"?"orange":"rgb(51,51,51)"))&&p(i,"fill",o),(!h||k&4&&c!==(c=`translate(${$[2].width+$[6].x},${-$[6].y})`))&&p(r,"transform",c)},i($){h||(n&&L(n.$$.fragment,$),L(u.$$.fragment,$),h=!0)},o($){n&&j(n.$$.fragment,$),j(u.$$.fragment,$),h=!1},d($){$&&B(e),n&&oe(n),oe(u),f=!1,ze(d)}}}function jg(t,e,n){let r,{nodeId:i}=e,{tooltip:o}=e,{state:s}=e;const a=It();function l(f){f.stopPropagation(),a("togglePin",{nodeId:i})}function u(f){a("nodeEnter",{...f,nodeId:i})}function c(f){a("nodeLeave",{...f,nodeId:i})}const h={x:1,y:1};return t.$$set=f=>{"nodeId"in f&&n(7,i=f.nodeId),"tooltip"in f&&n(0,o=f.tooltip),"state"in f&&n(1,s=f.state)},t.$$.update=()=>{t.$$.dirty&1&&n(2,r=o.boundingBox())},[o,s,r,l,u,c,h,i]}class zg extends be{constructor(e){super(),ye(this,e,jg,Wg,we,{nodeId:7,tooltip:0,state:1})}}const Zs=300;function Gg(t,e,n){function r(){t.update(i=>(i.set(e,{tooltip:n,state:"active"}),i))}return window.setTimeout(r,Zs)}function Qs(t,e){t.update(n=>{const r=n.get(e);return r!==void 0&&r.state!=="pinned"&&(r.state!=="active"&&window.clearTimeout(r.state),n.set(e,{...r,state:"active"})),n})}function Js(t,e){function n(){t.update(r=>(r.delete(e),r))}t.update(r=>{const i=r.get(e);return i!==void 0&&i.state!=="pinned"&&r.set(e,{...i,state:window.setTimeout(n,Zs)}),r})}function Hg(t,e){t.update(n=>{const r=n.get(e);return r!==void 0&&(r.state==="pinned"?n.set(e,{...r,state:"active"}):n.set(e,{...r,state:"pinned"})),n})}function Vi(t,e,n){const r=t.slice();return r[9]=e[n][0],r[10]=e[n][1].position,r[11]=e[n][1].tooltip,r[12]=e[n][1].state,r}function Wi(t,e){let n,r,i,o;return r=new zg({props:{nodeId:e[9],tooltip:e[11],state:e[12]}}),r.$on("mouseenter",e[2]),r.$on("mouseleave",e[3]),r.$on("togglePin",e[4]),r.$on("nodeEnter",e[7]),r.$on("nodeLeave",e[8]),{key:t,first:null,c(){n=X("g"),ae(r.$$.fragment),p(n,"transform",i=`translate(${e[10].x},${e[10].y})`),this.first=n},m(s,a){V(s,n,a),ie(r,n,null),o=!0},p(s,a){e=s;const l={};a&1&&(l.nodeId=e[9]),a&1&&(l.tooltip=e[11]),a&1&&(l.state=e[12]),r.$set(l),(!o||a&1&&i!==(i=`translate(${e[10].x},${e[10].y})`))&&p(n,"transform",i)},i(s){o||(L(r.$$.fragment,s),o=!0)},o(s){j(r.$$.fragment,s),o=!1},d(s){s&&B(n),oe(r)}}}function qg(t){let e=[],n=new Map,r,i,o=Oe(t[0]);const s=a=>a[9];for(let a=0;a<o.length;a+=1){let l=Vi(t,o,a),u=s(l);n.set(u,e[a]=Wi(u,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=Pe()},m(a,l){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(a,l);V(a,r,l),i=!0},p(a,[l]){l&29&&(o=Oe(a[0]),Ne(),e=bn(e,l,s,1,a,o,n,r.parentNode,yn,Wi,r,Vi),Ce())},i(a){if(!i){for(let l=0;l<o.length;l+=1)L(e[l]);i=!0}},o(a){for(let l=0;l<e.length;l+=1)j(e[l]);i=!1},d(a){a&&B(r);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}const Yg=20;function Xg(t,e,n){let r,i;const{tooltips:o}=ts(Ar);Go(t,o,f=>n(6,i=f));let{nodeLayouts:s}=e;function a(f){Qs(o,f.detail.nodeId)}function l(f){Js(o,f.detail.nodeId)}function u(f){Hg(o,f.detail.nodeId)}function c(f){ke.call(this,t,f)}function h(f){ke.call(this,t,f)}return t.$$set=f=>{"nodeLayouts"in f&&n(5,s=f.nodeLayouts)},t.$$.update=()=>{t.$$.dirty&96&&n(0,r=[...i.entries()].filter(([f])=>s.has(f)).map(([f,{tooltip:d,state:g}])=>{var _;const E=(_=s.get(f))==null?void 0:_.boundingBox(),$=ls(E,d.boundingBox(),d.options.anchor,Yg);return[f,{position:$,tooltip:d,state:g}]}))},[r,o,a,l,u,s,i,c,h]}class Ug extends be{constructor(e){super(),ye(this,e,Xg,qg,we,{nodeLayouts:5})}}function Kg(t){let e,n,r,i,o,s,a,l,u;return{c(){e=X("g"),n=X("rect"),o=X("text"),s=Ge(t[0]),p(n,"width",r=t[1].width),p(n,"height",i=t[1].height),p(n,"fill","rgb(250,250,250)"),p(n,"stroke","rgb(134, 134, 139)"),p(n,"stroke-width","1"),p(n,"rx","6"),p(n,"class","svelte-76qmi8"),p(o,"y","-2"),p(o,"font-family",Jt.family),p(o,"class","svelte-76qmi8"),p(e,"class","expand svelte-76qmi8"),p(e,"transform",a=`translate(${t[1].xMin},${t[1].yMin})`)},m(c,h){V(c,e,h),G(e,n),G(e,o),G(o,s),l||(u=[re(e,"click",t[5]),re(e,"dblclick",t[6]),re(e,"mouseenter",t[2]),re(e,"mouseleave",t[3])],l=!0)},p(c,[h]){h&2&&r!==(r=c[1].width)&&p(n,"width",r),h&2&&i!==(i=c[1].height)&&p(n,"height",i),h&1&&nn(s,c[0]),h&2&&a!==(a=`translate(${c[1].xMin},${c[1].yMin})`)&&p(e,"transform",a)},i:Y,o:Y,d(c){c&&B(e),l=!1,ze(u)}}}function Zg(t,e,n){const r=It();let{nodeId:i}=e,{name:o}=e,{boundingBox:s}=e;function a(){r("nodeEnter",{nodeId:i})}function l(){r("nodeLeave",{nodeId:i})}function u(h){ke.call(this,t,h)}function c(h){ke.call(this,t,h)}return t.$$set=h=>{"nodeId"in h&&n(4,i=h.nodeId),"name"in h&&n(0,o=h.name),"boundingBox"in h&&n(1,s=h.boundingBox)},[o,s,a,l,i,u,c]}class Qg extends be{constructor(e){super(),ye(this,e,Zg,Kg,we,{nodeId:4,name:0,boundingBox:1})}}class Hr{constructor(e,n,r={x:0,y:0},i=1){this.width=e,this.height=n,this.cameraPos=r,this.cameraScale=i}viewToWorld(){return tr.identity().translate(this.cameraPos.x,this.cameraPos.y)}worldToView(){return this.viewToWorld().inverse()}screenToView(){return tr.identity().scale(1/this.cameraScale).translate(-this.width/2,-this.height/2)}viewToScreen(){return this.screenToView().inverse()}worldToScreen(){const e=this.worldToView();return this.viewToScreen().scale(e.k).translate(e.x,e.y)}screenToWorld(){return this.worldToScreen().inverse()}screenWidth(){return this.width}screenHeight(){return this.height}moveBy(e,n){this.cameraPos.x+=e,this.cameraPos.y+=n}moveTo(e,n){this.cameraPos.x=e,this.cameraPos.y=n}resize(e,n){this.width=e,this.height=n}center(){return this.cameraPos}scale(){return this.cameraScale}scaleBy(e){this.cameraScale*=e}scaleTo(e){this.cameraScale=e}fit(e){const{x:n,y:r}=e.center;this.moveTo(n,r);const i=Math.min(this.width/e.width,this.height/e.height);this.scaleTo(i||1)}world(){const e=this.screenToWorld().apply(0,0),n=this.screenToWorld().apply(this.width,this.height);return new ne(e.x,e.y,n.x,n.y)}viewBox(){const e=this.world();return`${e.xMin} ${e.yMin} ${e.width} ${e.height}`}}class Jg{constructor(e){P(this,"scaleMin",Number.MIN_VALUE),P(this,"scaleMax",Number.MAX_VALUE),P(this,"boundingBox",ne.infinity()),this.viewport=e}setViewport(e){this.viewport=e}setScaleExtent(e){return e.min!==void 0&&(this.scaleMin=e.min),e.max!==void 0&&(this.scaleMax=e.max),this}scaleExtent(){return{min:this.scaleMin,max:this.scaleMax}}setTranslationExtent(e){return e.xMin!==void 0&&(this.boundingBox.xMin=e.xMin),e.yMin!==void 0&&(this.boundingBox.yMin=e.yMin),e.xMax!==void 0&&(this.boundingBox.xMax=e.xMax),e.yMax!==void 0&&(this.boundingBox.yMax=e.yMax),this}translationExtent(){return this.boundingBox}limitScale(e){return wn(this.scaleMin,this.scaleMax,e)}limitTranslation(e,n){return e=wn(this.boundingBox.xMin,this.boundingBox.xMax,e),n=wn(this.boundingBox.yMin,this.boundingBox.yMax,n),{x:e,y:n}}scaleBy(e){const n=this.limitScale(this.viewport.scale()*e);this.viewport.scaleTo(n)}scaleTo(e){const n=this.limitScale(e);this.viewport.scaleTo(n)}moveBy(e,n){const{x:r,y:i}=this.viewport.center(),o=this.limitTranslation(r+e,i+n);this.viewport.moveTo(o.x,o.y)}moveTo(e,n){const r=this.limitTranslation(e,n);this.viewport.moveTo(r.x,r.y)}}const wt=[];function br(t,e=Y){let n;const r=new Set;function i(a){if(we(t,a)&&(t=a,n)){const l=!wt.length;for(const u of r)u[1](),wt.push(u,t);if(l){for(let u=0;u<wt.length;u+=2)wt[u][0](wt[u+1]);wt.length=0}}}function o(a){i(a(t))}function s(a,l=Y){const u=[a,l];return r.add(u),r.size===1&&(n=e(i,o)||Y),a(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:s}}function ji(t){return Object.prototype.toString.call(t)==="[object Date]"}function em(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function vr(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((i,o)=>vr(t[o],i));return i=>r.map(o=>o(i))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(ji(t)&&ji(e)){t=t.getTime(),e=e.getTime();const o=e-t;return s=>new Date(t+s*o)}const r=Object.keys(e),i={};return r.forEach(o=>{i[o]=vr(t[o],e[o])}),o=>{const s={};return r.forEach(a=>{s[a]=i[a](o)}),s}}if(n==="number"){const r=e-t;return i=>t+i*r}throw new Error(`Cannot interpolate ${n} values`)}function tm(t,e={}){const n=br(t);let r,i=t;function o(s,a){if(t==null)return n.set(t=s),Promise.resolve();i=s;let l=r,u=!1,{delay:c=0,duration:h=400,easing:f=nh,interpolate:d=vr}=Ze(Ze({},e),a);if(h===0)return l&&(l.abort(),l=null),n.set(t=i),Promise.resolve();const g=ih()+c;let _;return r=oh(E=>{if(E<g)return!0;u||(_=d(t,s),typeof h=="function"&&(h=h(t,s)),u=!0),l&&(l.abort(),l=null);const $=E-g;return $>h?(n.set(t=s),!1):(n.set(t=_(f($/h))),!0)}),r.promise}return{set:o,update:(s,a)=>o(s(i,t),a),subscribe:n.subscribe}}function nm(t){let e,n,r,i,o;return{c(){e=X("rect"),p(e,"x",n=t[0].xMin),p(e,"y",r=t[0].yMin),p(e,"width",i=t[0].width),p(e,"height",o=t[0].height),p(e,"fill","grey"),p(e,"opacity","0.2")},m(s,a){V(s,e,a)},p(s,[a]){a&1&&n!==(n=s[0].xMin)&&p(e,"x",n),a&1&&r!==(r=s[0].yMin)&&p(e,"y",r),a&1&&i!==(i=s[0].width)&&p(e,"width",i),a&1&&o!==(o=s[0].height)&&p(e,"height",o)},i:Y,o:Y,d(s){s&&B(e)}}}function rm(t,e,n){let r,{start:i}=e,{end:o}=e;return t.$$set=s=>{"start"in s&&n(1,i=s.start),"end"in s&&n(2,o=s.end)},t.$$.update=()=>{t.$$.dirty&6&&n(0,r=ne.fromPoints(i,o))},[r,i,o]}class im extends be{constructor(e){super(),ye(this,e,rm,nm,we,{start:1,end:2})}}function om(t){let e,n,r;return{c(){e=X("defs"),n=X("marker"),r=X("path"),p(r,"d","M 0 0 L 10 5 L 0 10 L 4 5 z"),p(r,"fill","var(--gray-tertiary)"),ah(r,"stroke-width","1"),p(n,"id","arrowhead"),p(n,"viewBox","0 0 10 10"),p(n,"refX","9"),p(n,"refY","5"),p(n,"markerUnits","strokeWidth"),p(n,"markerWidth","10"),p(n,"markerHeight","12"),p(n,"orient","auto")},m(i,o){V(i,e,o),G(e,n),G(n,r)},p:Y,d(i){i&&B(e)}}}function sm(t){let e;const n=t[1].default,r=Ho(n,t,t[2],null),i=r||om();return{c(){i&&i.c()},m(o,s){i&&i.m(o,s),e=!0},p(o,s){r&&r.p&&(!e||s&4)&&Xo(r,n,o,o[2],e?Yo(n,o[2],s,null):Uo(o[2]),null)},i(o){e||(L(i,o),e=!0)},o(o){j(i,o),e=!1},d(o){i&&i.d(o)}}}function am(t){let e,n;return e=new Or({props:{self:t[0],$$slots:{default:[sm]},$$scope:{ctx:t}}}),{c(){ae(e.$$.fragment)},m(r,i){ie(e,r,i),n=!0},p(r,[i]){const o={};i&1&&(o.self=r[0]),i&4&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){oe(e,r)}}}function lm(t,e,n){let{$$slots:r={},$$scope:i}=e,{self:o}=e;return t.$$set=s=>{"self"in s&&n(0,o=s.self),"$$scope"in s&&n(2,i=s.$$scope)},[o,r,i]}class um extends be{constructor(e){super(),ye(this,e,lm,am,we,{self:0})}}function zi(t,e,n){const r=t.slice();return r[34]=e[n][0],r[35]=e[n][1],r}function Gi(t,e,n){const r=t.slice();return r[34]=e[n][0],r[35]=e[n][1],r}function Hi(t,e,n){const r=t.slice();return r[34]=e[n][0],r[40]=e[n][1].name,r[41]=e[n][1].boundingBox,r}function qi(t,e){let n,r,i;function o(...s){return e[19](e[34],...s)}return r=new Qg({props:{nodeId:e[34],name:e[40],boundingBox:e[41]}}),r.$on("dblclick",o),r.$on("nodeEnter",e[20]),r.$on("nodeLeave",e[21]),{key:t,first:null,c(){n=Pe(),ae(r.$$.fragment),this.first=n},m(s,a){V(s,n,a),ie(r,s,a),i=!0},p(s,a){e=s;const l={};a[0]&4&&(l.nodeId=e[34]),a[0]&4&&(l.name=e[40]),a[0]&4&&(l.boundingBox=e[41]),r.$set(l)},i(s){i||(L(r.$$.fragment,s),i=!0)},o(s){j(r.$$.fragment,s),i=!1},d(s){s&&B(n),oe(r,s)}}}function Yi(t,e){let n,r,i;function o(...s){return e[22](e[34],...s)}return r=new Rr({props:{self:e[35],decoration:e[1].get(e[34])}}),r.$on("click",o),r.$on("nodeEnter",e[23]),r.$on("nodeLeave",e[24]),{key:t,first:null,c(){n=Pe(),ae(r.$$.fragment),this.first=n},m(s,a){V(s,n,a),ie(r,s,a),i=!0},p(s,a){e=s;const l={};a[0]&4&&(l.self=e[35]),a[0]&6&&(l.decoration=e[1].get(e[34])),r.$set(l)},i(s){i||(L(r.$$.fragment,s),i=!0)},o(s){j(r.$$.fragment,s),i=!1},d(s){s&&B(n),oe(r,s)}}}function Xi(t,e){let n,r,i;function o(...s){return e[25](e[34],...s)}return r=new Rr({props:{self:e[35],decoration:e[1].get(e[34])}}),r.$on("dblclick",o),r.$on("nodeEnter",e[26]),r.$on("nodeLeave",e[27]),{key:t,first:null,c(){n=Pe(),ae(r.$$.fragment),this.first=n},m(s,a){V(s,n,a),ie(r,s,a),i=!0},p(s,a){e=s;const l={};a[0]&4&&(l.self=e[35]),a[0]&6&&(l.decoration=e[1].get(e[34])),r.$set(l)},i(s){i||(L(r.$$.fragment,s),i=!0)},o(s){j(r.$$.fragment,s),i=!1},d(s){s&&B(n),oe(r,s)}}}function Ui(t){let e,n;return e=new im({props:{start:t[3].start,end:t[3].end}}),{c(){ae(e.$$.fragment)},m(r,i){ie(e,r,i),n=!0},p(r,i){const o={};i[0]&8&&(o.start=r[3].start),i[0]&8&&(o.end=r[3].end),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){oe(e,r)}}}function cm(t){let e,n,r=[],i=new Map,o,s,a=[],l=new Map,u,c=[],h=new Map,f,d,g,_,E,$,k,y,m,b,N=Oe([...t[2].expanded.entries()]);const v=C=>C[34];for(let C=0;C<N.length;C+=1){let M=Hi(t,N,C),R=v(M);i.set(R,r[C]=qi(R,M))}s=new um({props:{self:t[2].edges}});let O=Oe([...t[2].nodes.entries()]);const D=C=>C[34];for(let C=0;C<O.length;C+=1){let M=Gi(t,O,C),R=D(M);l.set(R,a[C]=Yi(R,M))}let z=Oe([...t[2].collapsed.entries()]);const U=C=>C[34];for(let C=0;C<z.length;C+=1){let M=zi(t,z,C),R=U(M);h.set(R,c[C]=Xi(R,M))}let W=t[3].kind==="brushing"&&Ui(t);return g=new Ug({props:{nodeLayouts:t[2].nodes}}),g.$on("nodeEnter",t[28]),g.$on("nodeLeave",t[29]),{c(){e=X("svg"),n=X("g");for(let C=0;C<r.length;C+=1)r[C].c();o=Pe(),ae(s.$$.fragment);for(let C=0;C<a.length;C+=1)a[C].c();u=Pe();for(let C=0;C<c.length;C+=1)c[C].c();f=Pe(),W&&W.c(),d=Pe(),ae(g.$$.fragment),p(n,"transform",_=t[6].toString()),p(e,"role","figure"),p(e,"width",E=t[0].screenWidth()),p(e,"height",$=t[0].screenHeight()),p(e,"style",k=`cursor: ${t[5]}`)},m(C,M){V(C,e,M),G(e,n);for(let R=0;R<r.length;R+=1)r[R]&&r[R].m(n,null);G(n,o),ie(s,n,null);for(let R=0;R<a.length;R+=1)a[R]&&a[R].m(n,null);G(n,u);for(let R=0;R<c.length;R+=1)c[R]&&c[R].m(n,null);G(n,f),W&&W.m(n,null),G(n,d),ie(g,n,null),t[30](e),y=!0,m||(b=[re(window,"mousemove",t[9]),re(window,"mouseup",t[8]),re(window,"keydown",t[14]),re(window,"keyup",t[15]),re(e,"mousedown",t[7]),re(e,"wheel",t[10])],m=!0)},p(C,M){M[0]&2052&&(N=Oe([...C[2].expanded.entries()]),Ne(),r=bn(r,M,v,1,C,N,i,n,yn,qi,o,Hi),Ce());const R={};M[0]&4&&(R.self=C[2].edges),s.$set(R),M[0]&8198&&(O=Oe([...C[2].nodes.entries()]),Ne(),a=bn(a,M,D,1,C,O,l,n,yn,Yi,u,Gi),Ce()),M[0]&4102&&(z=Oe([...C[2].collapsed.entries()]),Ne(),c=bn(c,M,U,1,C,z,h,n,yn,Xi,f,zi),Ce()),C[3].kind==="brushing"?W?(W.p(C,M),M[0]&8&&L(W,1)):(W=Ui(C),W.c(),L(W,1),W.m(n,d)):W&&(Ne(),j(W,1,1,()=>{W=null}),Ce());const K={};M[0]&4&&(K.nodeLayouts=C[2].nodes),g.$set(K),(!y||M[0]&64&&_!==(_=C[6].toString()))&&p(n,"transform",_),(!y||M[0]&1&&E!==(E=C[0].screenWidth()))&&p(e,"width",E),(!y||M[0]&1&&$!==($=C[0].screenHeight()))&&p(e,"height",$),(!y||M[0]&32&&k!==(k=`cursor: ${C[5]}`))&&p(e,"style",k)},i(C){if(!y){for(let M=0;M<N.length;M+=1)L(r[M]);L(s.$$.fragment,C);for(let M=0;M<O.length;M+=1)L(a[M]);for(let M=0;M<z.length;M+=1)L(c[M]);L(W),L(g.$$.fragment,C),y=!0}},o(C){for(let M=0;M<r.length;M+=1)j(r[M]);j(s.$$.fragment,C);for(let M=0;M<a.length;M+=1)j(a[M]);for(let M=0;M<c.length;M+=1)j(c[M]);j(W),j(g.$$.fragment,C),y=!1},d(C){C&&B(e);for(let M=0;M<r.length;M+=1)r[M].d();oe(s);for(let M=0;M<a.length;M+=1)a[M].d();for(let M=0;M<c.length;M+=1)c[M].d();W&&W.d(),oe(g),t[30](null),m=!1,ze(b)}}}function hm(t){switch(t.kind){case"initial":return"grab";case"panning":return"grabbing";case"brushing":case"awaitBrushing":return"default"}}function fm(t,e,n){let r,i,o,{decorations:s}=e,{drawable:a}=e,{viewport:l}=e,{multiSelection:u}=e;const c=new Jg(l);let h;function f(T){var F;let q=h.createSVGPoint();return"targetTouches"in T?(q.x=T.targetTouches[0].clientX,q.y=T.targetTouches[0].clientY):(q.x=T.clientX,q.y=T.clientY),q=q.matrixTransform((F=h.getScreenCTM())==null?void 0:F.inverse()),q}let d={kind:"initial"};function g(T){if(T.preventDefault(),!("targetTouches"in T)&&T.button!==0)return;const{x:F,y:q}=f(T),Q=l.screenToWorld().apply(F,q);T.shiftKey&&u?n(3,d={kind:"brushing",start:Q,end:Q}):(n(3,d={kind:"panning",start:Q,tmp:new Hr(l.screenWidth(),l.screenHeight(),l.center(),l.scale())}),c.setViewport(d.tmp))}function _(){switch(d.kind){case"initial":return;case"panning":{l.scaleTo(d.tmp.scale());const{x:T,y:F}=d.tmp.center();l.moveTo(T,F),c.setViewport(l),n(3,d={kind:"initial"});break}case"brushing":{const T=ne.fromPoints(d.start,d.end),F=[...a.nodes.entries()].filter(([q,Q])=>T.encloses(Q.boundingBox())).map(([q,Q])=>q);y("brush",{nodes:F});break}}n(3,d={kind:"initial"})}function E(T){const{x:F,y:q}=f(T),Q=l.screenToWorld().apply(F,q);switch(d.kind){case"initial":return;case"panning":{const pe=d.start.x-Q.x,ue=d.start.y-Q.y;c.moveBy(pe,ue),n(0,l);break}case"brushing":{n(3,d.end=Q,d);break}}}function $(T){T.preventDefault();const F=-T.deltaY*(T.deltaMode===1?.05:T.deltaMode?1:.002),q=l.scale();if(c.scaleBy(Math.pow(2,F)),q===l.scale())return;const Q=l.center(),{x:pe,y:ue}=f(T),ge=l.screenToWorld().apply(pe,ue);c.moveBy(-(Q.x-ge.x)*F,-(Q.y-ge.y)*F),n(0,l)}async function k(T,F){const q=ne.fromCenterAndDimension(T.center,Math.max(l.screenWidth(),T.width),Math.max(l.screenHeight(),T.height)),{x:Q,y:pe}=q.center,ue=Math.min(l.screenWidth()/T.width,l.screenHeight()/T.height)||1;if(F!==void 0&&F){const ge=tm({...l.center(),k:l.scale()},{duration:1e3,easing:em});ge.subscribe(ve=>{c.moveTo(ve.x,ve.y),c.scaleTo(ve.k),n(0,l)}),await ge.set({x:Q,y:pe,k:ue})}else c.moveTo(Q,pe),c.scaleTo(ue),n(0,l)}const y=It();function m(T,F){T.stopPropagation(),y("collapse",{nodeId:F})}function b(T,F){T.stopPropagation(),y("expand",{nodeId:F})}function N(T,F){T.stopPropagation(),y("nodeClick",{nodeId:F,original:T})}function v(T){d.kind==="initial"&&T.shiftKey&&u&&n(3,d={kind:"awaitBrushing"})}function O(){d.kind==="awaitBrushing"&&n(3,d={kind:"initial"})}const D=(T,F)=>{m(F,T)};function z(T){ke.call(this,t,T)}function U(T){ke.call(this,t,T)}const W=(T,F)=>{N(F,T)};function C(T){ke.call(this,t,T)}function M(T){ke.call(this,t,T)}const R=(T,F)=>{b(F,T)};function K(T){ke.call(this,t,T)}function fe(T){ke.call(this,t,T)}function de(T){ke.call(this,t,T)}function _e(T){ke.call(this,t,T)}function se(T){nt[T?"unshift":"push"](()=>{h=T,n(4,h)})}return t.$$set=T=>{"decorations"in T&&n(1,s=T.decorations),"drawable"in T&&n(2,a=T.drawable),"viewport"in T&&n(0,l=T.viewport),"multiSelection"in T&&n(16,u=T.multiSelection)},t.$$.update=()=>{t.$$.dirty[0]&1&&n(18,r=l.world()),t.$$.dirty[0]&262149&&c.setScaleExtent({min:Math.min(l.screenWidth()/a.boundingBox.width,l.screenHeight()/a.boundingBox.height)*.5,max:1}).setTranslationExtent(a.boundingBox.padded({l:r.width*.4,r:r.width*.4,t:r.height*.4,b:r.height*.4})),t.$$.dirty[0]&1&&n(6,i=l.worldToScreen().toString()),t.$$.dirty[0]&8&&n(5,o=hm(d))},[l,s,a,d,h,o,i,g,_,E,$,m,b,N,v,O,u,k,r,D,z,U,W,C,M,R,K,fe,de,_e,se]}class dm extends be{constructor(e){super(),ye(this,e,fm,cm,we,{decorations:1,drawable:2,viewport:0,multiSelection:16,setFocus:17},null,[-1,-1])}get setFocus(){return this.$$.ctx[17]}}function pm(t){let e,n,r,i,o,s,a,l,u,c,h,f,d,g,_,E,$;return{c(){e=he("div"),n=he("canvas"),r=Ue(),i=X("svg"),o=X("rect"),h=X("rect"),p(n,"class","svelte-133ndzu"),p(o,"fill","rgb(0, 122, 255)"),p(o,"x",s=t[6].x),p(o,"y",a=t[6].y),p(o,"width",l=t[6].w),p(o,"height",u=t[6].h),p(o,"opacity","0.1"),p(o,"style",c=t[5]?"cursor: grabbing":"cursor: grab"),p(h,"fill","none"),p(h,"stroke","rgb(0, 122, 255)"),p(h,"x",f=t[6].x),p(h,"y",d=t[6].y),p(h,"width",g=t[6].w),p(h,"height",_=t[6].h),p(i,"role","navigation"),p(i,"width",t[0]),p(i,"height",t[1]),p(i,"class","svelte-133ndzu"),p(e,"class","container svelte-133ndzu")},m(k,y){V(k,e,y),G(e,n),t[11](n),G(e,r),G(e,i),G(i,o),t[12](o),G(i,h),t[13](i),E||($=re(i,"mousedown",t[7]),E=!0)},p(k,[y]){y&64&&s!==(s=k[6].x)&&p(o,"x",s),y&64&&a!==(a=k[6].y)&&p(o,"y",a),y&64&&l!==(l=k[6].w)&&p(o,"width",l),y&64&&u!==(u=k[6].h)&&p(o,"height",u),y&32&&c!==(c=k[5]?"cursor: grabbing":"cursor: grab")&&p(o,"style",c),y&64&&f!==(f=k[6].x)&&p(h,"x",f),y&64&&d!==(d=k[6].y)&&p(h,"y",d),y&64&&g!==(g=k[6].w)&&p(h,"width",g),y&64&&_!==(_=k[6].h)&&p(h,"height",_),y&1&&p(i,"width",k[0]),y&2&&p(i,"height",k[1])},i:Y,o:Y,d(k){k&&B(e),t[11](null),t[12](null),t[13](null),E=!1,$()}}}function gm(t,e,n){let r,i;const o=It();function s(b){const N=r.worldToScreen().apply(b.xMin,b.yMin),v=r.worldToScreen().apply(b.xMax,b.yMax);return{x:N.x,y:N.y,w:v.x-N.x,h:v.y-N.y}}let{drawable:a}=e,{width:l}=e,{height:u}=e,{worldExtent:c}=e,h,f;function d(b){var N;let v=f.createSVGPoint();v.x=b.clientX,v.y=b.clientY,v=v.matrixTransform((N=f.getScreenCTM())==null?void 0:N.inverse());const O=r.screenToWorld().apply(v.x,v.y);o("viewportCenterDidChange",{center:O})}let g;function _(b){const N=r.screenToWorld().apply(0,0),v=r.screenToWorld().apply(b.dx,b.dy),O=c.center;O.x+=v.x-N.x,O.y+=v.y-N.y,o("viewportCenterDidChange",{center:O})}let E=!1;const $=_u().on("drag",_).on("start",()=>n(5,E=!0)).on("end",()=>n(5,E=!1));es(()=>{Ht(g).call($)});function k(b){nt[b?"unshift":"push"](()=>{h=b,n(2,h),n(0,l),n(1,u),n(8,a)})}function y(b){nt[b?"unshift":"push"](()=>{g=b,n(4,g)})}function m(b){nt[b?"unshift":"push"](()=>{f=b,n(3,f)})}return t.$$set=b=>{"drawable"in b&&n(8,a=b.drawable),"width"in b&&n(0,l=b.width),"height"in b&&n(1,u=b.height),"worldExtent"in b&&n(9,c=b.worldExtent)},t.$$.update=()=>{if(t.$$.dirty&3&&n(10,r=new Hr(l,u)),t.$$.dirty&1280&&r.fit(a.boundingBox.padded(2)),t.$$.dirty&512&&n(6,i=s(c)),t.$$.dirty&263&&h){let b=h.getContext("2d");n(2,h.width=l,h),n(2,h.height=u,h),b.fillStyle="white",b.fillRect(0,0,l,u),b.lineWidth=.5;for(const{boundingBox:N}of a.expanded.values()){const v=s(N);b.fillStyle="rgb(250, 250, 250)",b.fillRect(v.x,v.y,v.w,v.h),b.strokeStyle="rgb(134, 134, 139)",b.strokeRect(v.x,v.y,v.w,v.h)}for(const N of a.nodes.values()){const v=s(N.boundingBox());b.fillStyle="rgb(134, 134, 139)",b.fillRect(v.x,v.y,v.w,v.h)}for(const N of a.collapsed.values()){const v=s(N.boundingBox());b.fillStyle="rgb(134, 134, 139)",b.fillRect(v.x,v.y,v.w,v.h)}}},[l,u,h,f,g,E,i,d,a,c,r,k,y,m]}class mm extends be{constructor(e){super(),ye(this,e,gm,pm,we,{drawable:8,width:0,height:1,worldExtent:9})}}function Ki(t,e,n){const r=t.slice();return r[5]=e[n],r[7]=n,r}function wm(t){let e,n;return{c(){e=he("span"),n=Ge(t[0]),p(e,"class","svelte-122vmdc")},m(r,i){V(r,e,i),G(e,n)},p(r,i){i&1&&nn(n,r[0])},d(r){r&&B(e)}}}function _m(t){let e,n,r,i,o=Oe(t[3]),s=[];for(let c=0;c<o.length;c+=1)s[c]=Qi(Ki(t,o,c));function a(c,h){if(h&6&&(n=null),h&6&&(r=null),n==null&&(n=!!c[1].collapsed.has(c[2])),n)return bm;if(r==null&&(r=!!c[1].expanded.has(c[2])),r)return ym}let l=a(t,-1),u=l&&l(t);return{c(){for(let c=0;c<s.length;c+=1)s[c].c();e=Ue(),u&&u.c(),i=Pe()},m(c,h){for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(c,h);V(c,e,h),u&&u.m(c,h),V(c,i,h)},p(c,h){if(h&8){o=Oe(c[3]);let f;for(f=0;f<o.length;f+=1){const d=Ki(c,o,f);s[f]?s[f].p(d,h):(s[f]=Qi(d),s[f].c(),s[f].m(e.parentNode,e))}for(;f<s.length;f+=1)s[f].d(1);s.length=o.length}l!==(l=a(c,h))&&(u&&u.d(1),u=l&&l(c),u&&(u.c(),u.m(i.parentNode,i)))},d(c){c&&(B(e),B(i)),Jo(s,c),u&&u.d(c)}}}function Zi(t){let e;return{c(){e=he("span"),e.textContent="",p(e,"class","svelte-122vmdc")},m(n,r){V(n,e,r)},d(n){n&&B(e)}}}function Qi(t){let e,n=t[5]+"",r,i,o,s=t[7]<t[3].length-1&&Zi();return{c(){e=he("span"),r=Ge(n),i=Ue(),s&&s.c(),o=Pe(),p(e,"class","svelte-122vmdc")},m(a,l){V(a,e,l),G(e,r),V(a,i,l),s&&s.m(a,l),V(a,o,l)},p(a,l){l&8&&n!==(n=a[5]+"")&&nn(r,n),a[7]<a[3].length-1?s||(s=Zi(),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(a){a&&(B(e),B(i),B(o)),s&&s.d(a)}}}function ym(t){let e;return{c(){e=he("span"),e.textContent="(Double click to collapse)",p(e,"class","svelte-122vmdc")},m(n,r){V(n,e,r)},d(n){n&&B(e)}}}function bm(t){let e;return{c(){e=he("span"),e.textContent="(Double click to expand)",p(e,"class","svelte-122vmdc")},m(n,r){V(n,e,r)},d(n){n&&B(e)}}}function vm(t){let e;function n(o,s){return o[2]?_m:wm}let r=n(t),i=r(t);return{c(){e=he("div"),i.c()},m(o,s){V(o,e,s),i.m(e,null)},p(o,[s]){r===(r=n(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e,null)))},i:Y,o:Y,d(o){o&&B(e),i.d()}}}function km(t,e,n){let r,{defaultText:i="Hover over any node to show more information."}=e,{network:o}=e,{drawable:s}=e,{currentNode:a}=e;return t.$$set=l=>{"defaultText"in l&&n(0,i=l.defaultText),"network"in l&&n(4,o=l.network),"drawable"in l&&n(1,s=l.drawable),"currentNode"in l&&n(2,a=l.currentNode)},t.$$.update=()=>{t.$$.dirty&20&&n(3,r=a?[a,...o.parents(a)].reverse().map(l=>o.node(l).humanReadable()||l):[])},[i,s,a,r,o]}class Em extends be{constructor(e){super(),ye(this,e,km,vm,we,{defaultText:0,network:4,drawable:1,currentNode:2})}}function Ji(t){let e,n,r;function i(s){t[34](s)}let o={decorations:t[8],drawable:t[15],multiSelection:t[7]};return t[13]!==void 0&&(o.viewport=t[13]),e=new dm({props:o}),t[33](e),nt.push(()=>dh(e,"viewport",i)),e.$on("expand",t[18]),e.$on("collapse",t[19]),e.$on("nodeEnter",t[20]),e.$on("nodeLeave",t[21]),e.$on("nodeClick",t[22]),e.$on("brush",t[25]),{c(){ae(e.$$.fragment)},m(s,a){ie(e,s,a),r=!0},p(s,a){const l={};a[0]&256&&(l.decorations=s[8]),a[0]&32768&&(l.drawable=s[15]),a[0]&128&&(l.multiSelection=s[7]),!n&&a[0]&8192&&(n=!0,l.viewport=s[13],ch(()=>n=!1)),e.$set(l)},i(s){r||(L(e.$$.fragment,s),r=!0)},o(s){j(e.$$.fragment,s),r=!1},d(s){t[33](null),oe(e,s)}}}function eo(t){let e,n,r,i,o,s=t[3]&&to(t),a=t[17]&&no(t),l=t[4]&&ro(t);return{c(){e=he("div"),s&&s.c(),n=Ue(),r=he("div"),a&&a.c(),i=Ue(),l&&l.c(),p(r,"class","myc-navigation-controls svelte-15hd81r"),p(e,"class","myc-navigation svelte-15hd81r")},m(u,c){V(u,e,c),s&&s.m(e,null),G(e,n),G(e,r),a&&a.m(r,null),G(r,i),l&&l.m(r,null),o=!0},p(u,c){u[3]?s?(s.p(u,c),c[0]&8&&L(s,1)):(s=to(u),s.c(),L(s,1),s.m(e,n)):s&&(Ne(),j(s,1,1,()=>{s=null}),Ce()),u[17]?a?a.p(u,c):(a=no(u),a.c(),a.m(r,i)):a&&(a.d(1),a=null),u[4]?l?l.p(u,c):(l=ro(u),l.c(),l.m(r,null)):l&&(l.d(1),l=null)},i(u){o||(L(s),o=!0)},o(u){j(s),o=!1},d(u){u&&B(e),s&&s.d(),a&&a.d(),l&&l.d()}}}function to(t){let e,n;return e=new Em({props:{network:t[0],currentNode:t[16],drawable:t[15]}}),{c(){ae(e.$$.fragment)},m(r,i){ie(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.network=r[0]),i[0]&65536&&(o.currentNode=r[16]),i[0]&32768&&(o.drawable=r[15]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){oe(e,r)}}}function no(t){let e,n,r,i;return{c(){e=he("div"),n=he("button"),n.textContent="Collapse All",p(n,"class","resetView svelte-15hd81r")},m(o,s){V(o,e,s),G(e,n),r||(i=re(n,"click",t[35]),r=!0)},p:Y,d(o){o&&B(e),r=!1,i()}}}function ro(t){let e,n,r,i;return{c(){e=he("div"),n=he("button"),n.textContent="Show All",p(n,"class","resetView svelte-15hd81r")},m(o,s){V(o,e,s),G(e,n),r||(i=re(n,"click",t[36]),r=!0)},p:Y,d(o){o&&B(e),r=!1,i()}}}function io(t){let e,n;return{c(){e=Ge("Powered by "),n=he("a"),n.textContent="Mycelium",p(n,"href","https://apple.github.io/ml-mycelium"),p(n,"target","_blank"),p(n,"class","svelte-15hd81r")},m(r,i){V(r,e,i),V(r,n,i)},d(r){r&&(B(e),B(n))}}}function oo(t){let e,n,r;return n=new mm({props:{width:t[1]*fn,height:t[2]*fn,worldExtent:t[13].world(),drawable:t[15]}}),n.$on("viewportCenterDidChange",t[24]),{c(){e=he("div"),ae(n.$$.fragment),p(e,"class","myc-minimap svelte-15hd81r")},m(i,o){V(i,e,o),ie(n,e,null),r=!0},p(i,o){const s={};o[0]&2&&(s.width=i[1]*fn),o[0]&4&&(s.height=i[2]*fn),o[0]&8192&&(s.worldExtent=i[13].world()),o[0]&32768&&(s.drawable=i[15]),n.$set(s)},i(i){r||(L(n.$$.fragment,i),r=!0)},o(i){j(n.$$.fragment,i),r=!1},d(i){i&&B(e),oe(n)}}}function xm(t){let e,n=t[0],r,i,o,s,a,l,u,c=Ji(t),h=(t[3]||t[4])&&eo(t),f=t[5]&&io(),d=t[6]&&oo(t);return{c(){e=he("div"),c.c(),r=Ue(),h&&h.c(),i=Ue(),o=he("div"),f&&f.c(),s=Ue(),d&&d.c(),p(o,"class","myc-overlay svelte-15hd81r"),p(e,"class","myc-container svelte-15hd81r")},m(g,_){V(g,e,_),c.m(e,null),G(e,r),h&&h.m(e,null),G(e,i),G(e,o),f&&f.m(o,null),G(e,s),d&&d.m(e,null),a=!0,l||(u=re(window,"keydown",t[23]),l=!0)},p(g,_){_[0]&1&&we(n,n=g[0])?(Ne(),j(c,1,1,Y),Ce(),c=Ji(g),c.c(),L(c,1),c.m(e,r)):c.p(g,_),g[3]||g[4]?h?(h.p(g,_),_[0]&24&&L(h,1)):(h=eo(g),h.c(),L(h,1),h.m(e,i)):h&&(Ne(),j(h,1,1,()=>{h=null}),Ce()),g[5]?f||(f=io(),f.c(),f.m(o,null)):f&&(f.d(1),f=null),g[6]?d?(d.p(g,_),_[0]&64&&L(d,1)):(d=oo(g),d.c(),L(d,1),d.m(e,null)):d&&(Ne(),j(d,1,1,()=>{d=null}),Ce())},i(g){a||(L(c),L(h),L(d),a=!0)},o(g){j(c),j(h),j(d),a=!1},d(g){g&&B(e),c.d(g),h&&h.d(),f&&f.d(),d&&d.d(),l=!1,u()}}}const fn=.2;function Mm(t,e,n){let r,i,o,s,a=Y,l=()=>(a(),a=dr(O,x=>n(37,s=x)),O),u,c=Y,h=()=>(c(),c=dr(D,x=>n(38,u=x)),D);t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>c());let{network:f}=e,{width:d}=e,{height:g}=e,{showBreadcrumbs:_}=e,{showResetView:E}=e,{watermark:$}=e,{minimap:k}=e,{autoResize:y}=e,{multiSelection:m}=e,{decorations:b=new Map}=e,{collapsed:N=new Set(f.modules())}=e,{layoutProvider:v}=e;const O=br(new Map);l();const D=br(new Map);h(),uh(Ar,{selections:O,tooltips:D});const z=new Map,U=It();function W(x,H){C.resize(x,H),n(13,C)}let C=new Hr(d,g);es(async()=>{await de()});let M=[],R;function K(x){const{yMin:H,yMax:ee}=x,Z=20,xe=_?25/(C.screenHeight()||1)*(ee-H):0;return x.padded({l:Z,r:Z,t:Z+xe,b:Z})}async function fe(x,H){var ee;x=Array.isArray(x)?x:[x];let Z=ne.infinity();for(const xe of x){const Me=(ee=i.nodes.get(xe))==null?void 0:ee.boundingBox();Me&&(Z=Z.union(Me))}Z.isEmpty()||await R.setFocus(K(Z),H)}async function de(x){await R.setFocus(K(i.boundingBox),x)}async function _e(x,H){!m&&x.length>1&&(console.warn("Received multiple selections but `multiSelection` config was set to `false`."),x=[x[0]]);const ee={expand:!0,collapseOthers:{threshold:1e3},...H},{expand:Z,collapse:xe}=Rg(f,x,N,ee);let Me=!1;ee.expand&&(Z.size>1&&ee.expand==="single"||Z.size>0&&(Z.forEach(Ie=>N.delete(Ie)),Me=!0)),xe.size>0&&ee.collapseOthers!==!1&&(ee.collapseOthers===!0||Bg(f,N)>ee.collapseOthers.threshold)&&(xe.forEach(Ie=>N.add(Ie)),Me=!0),Me?(n(26,N),await cn(),jn(O,s=new Map(x.map(Ie=>[Ie,new Set])),s),await de(!0)):jn(O,s=new Map(x.map(Ie=>[Ie,new Set])),s)}async function se(x){const H=s;return jn(O,s=x,s),await cn(),H}async function T(){return await se(new Map)}async function F(){n(26,N=new Set(f.modules())),await de(!0)}async function q(x){ue(x),N.delete(x.detail.nodeId),n(26,N),await cn(),await de(!0)}async function Q(x){ue(x),N.add(x.detail.nodeId),n(26,N),await cn(),await de(!0)}function pe(x){var H;M[M.length-1]!==x.detail.nodeId&&(M.push(x.detail.nodeId),n(32,M));const ee=x.detail.nodeId,Z=(H=i.nodes.get(ee))==null?void 0:H.options.tooltip;if(Z){const xe=u.get(ee);xe===void 0?z.set(ee,Gg(D,ee,Z().build())):xe.state!=="active"&&xe.state!=="pinned"&&Qs(D,ee)}}function ue(x){M.pop(),n(32,M);const H=x.detail.nodeId;clearTimeout(z.get(H)),Js(D,H)}async function ge(x){const H=i.nodes.get(x.detail.nodeId);H!=null&&H.options.selectable&&(m&&x.detail.original.metaKey?ve(await se(new Map([...s.entries(),[x.detail.nodeId,new Set]]))):ve(await se(new Map([[x.detail.nodeId,new Set]]))))}function ve(x){const H=([ee,Z])=>({primaryNodeId:ee,secondaryIds:[...Z.values()]});U("selectionDidChange",{selections:[...s.entries()].map(H),previous:[...x.entries()].map(H)})}async function Ve(x){x.key==="Escape"&&ve(await T())}function it(x){const{x:H,y:ee}=x.detail.center;C.moveTo(H,ee),n(13,C)}async function J(x){ve(await se(new Map(x.detail.nodes.map(H=>[H,new Set]))))}function ce(x){nt[x?"unshift":"push"](()=>{R=x,n(14,R)})}function Lt(x){C=x,n(13,C)}const on=()=>F(),At=async()=>{await de(!0)};return t.$$set=x=>{"network"in x&&n(0,f=x.network),"width"in x&&n(1,d=x.width),"height"in x&&n(2,g=x.height),"showBreadcrumbs"in x&&n(3,_=x.showBreadcrumbs),"showResetView"in x&&n(4,E=x.showResetView),"watermark"in x&&n(5,$=x.watermark),"minimap"in x&&n(6,k=x.minimap),"autoResize"in x&&n(27,y=x.autoResize),"multiSelection"in x&&n(7,m=x.multiSelection),"decorations"in x&&n(8,b=x.decorations),"collapsed"in x&&n(26,N=x.collapsed),"layoutProvider"in x&&n(28,v=x.layoutProvider)},t.$$.update=()=>{t.$$.dirty[0]&67108865&&n(17,r=N.size<f.modules().length),t.$$.dirty[0]&335544321&&n(15,i=v.compute(f,N)),t.$$.dirty[0]&6&&W(d,g),t.$$.dirty[1]&2&&n(16,o=M.at(M.length-1))},[f,d,g,_,E,$,k,m,b,O,D,de,F,C,R,i,o,r,q,Q,pe,ue,ge,Ve,it,J,N,y,v,fe,_e,T,M,ce,Lt,on,At]}class Nm extends be{constructor(e){super(),ye(this,e,Mm,xm,we,{network:0,width:1,height:2,showBreadcrumbs:3,showResetView:4,watermark:5,minimap:6,autoResize:27,multiSelection:7,decorations:8,collapsed:26,layoutProvider:28,selectionStore:9,tooltipStore:10,setFocus:29,resetFocus:11,setSelections:30,clearSelections:31,collapseAll:12},null,[-1,-1])}get selectionStore(){return this.$$.ctx[9]}get tooltipStore(){return this.$$.ctx[10]}get setFocus(){return this.$$.ctx[29]}get resetFocus(){return this.$$.ctx[11]}get setSelections(){return this.$$.ctx[30]}get clearSelections(){return this.$$.ctx[31]}get collapseAll(){return this.$$.ctx[12]}}class qr{constructor(e,n){P(this,"decorations"),this.app=e,this.options=n,this.decorations=new Map}static create(e,n,r){const i={width:n.getBoundingClientRect().width,height:n.getBoundingClientRect().height,autoResize:!0,showBreadcrumbs:!0,showResetView:!0,watermark:!0,minimap:!0,layoutProvider:new Ag,multiSelection:!0,...r};i.watermark&&(console.info(""),console.info("| Powered by the Mycelium network     |"),console.info("| visualizer. For more information:   |"),console.info("| https://apple.github.io/ml-mycelium |"),console.info(""));const o=new Nm({target:n,props:{network:e,...i}});return i.autoResize&&new ResizeObserver(()=>{o.$set({width:n.clientWidth,height:n.clientHeight})}).observe(n),new qr(o,i)}onSelectionDidChange(e){this.app.$on("selectionDidChange",n=>{e(n.detail)})}async setSelection(e,n){await this.app.setSelections([e],n)}async setSelections(e,n){await this.app.setSelections(e,n)}async collapseAll(){await this.app.collapseAll()}async clearSelections(){await this.app.clearSelections()}async setFocus(e,n){await this.app.setFocus(e,n)}async resetFocus(e){await this.app.resetFocus(e)}setDecoration(e,n){this.decorations.set(e,n),this.app.$set({decorations:this.decorations})}removeDecoration(e){this.decorations.delete(e),this.app.$set({decorations:this.decorations})}clearDecorations(){this.decorations.clear(),this.app.$set({decorations:this.decorations})}setNetwork(e){this.app.$set({network:e,collapsed:new Set(e.modules())})}getOptions(){return this.options}}function Cm(t){let e;return{c(){e=S("div"),I(e,"width",t[0]+"px"),I(e,"height",t[1]+"px"),I(e,"outline","1px dashed lightgrey"),I(e,"border-radius","3px")},m(n,r){Le(n,e,r),t[5](e)},p(n,[r]){r&1&&I(e,"width",n[0]+"px"),r&2&&I(e,"height",n[1]+"px")},i:$e,o:$e,d(n){n&&Te(e),t[5](null)}}}function Tm(t,e){function n(r){for(const i of r.out)t.setEdge(r.nodeId,i.nodeId),i.name!=="power"&&n(i)}n(e.source)}function $m(t,e,n){let{circuit:r}=e,{width:i=500}=e,{height:o=500}=e;function s(f,d=!1,g=!1){let _=d?"yellow":"lightgrey";return new Gn.Node(f,new Gn.VStack(new Gn.Text(f))).with({backgroundColor:_}).with({...g&&{badge:{color:d?"steelblue":"crimson",text:d?"1":"0"}}})}function a(f,d,g=!1,_=!1){f.setNode(d,s(d,g,_))}function l(f,d){let g=0,_=0;function E($){let k=!1,y=!1;$.name==="wire"?($.nodeId="wire"+g,g++):$.name==="switch"?($.nodeId="switch"+_,$.on&&(k=!0),y=!0,_++):$.name==="signal"?($.nodeId="signal",y=!0):($.nodeId="power",k=!0),$.data===1&&(k=!0),a(f,$.nodeId,k,y);for(const m of $.out)m.name==="power"||m.nodeId!==void 0||E(m)}E(d.source)}let u,c;function h(f){Qn[f?"unshift":"push"](()=>{u=f,n(2,u)})}return t.$$set=f=>{"circuit"in f&&n(3,r=f.circuit),"width"in f&&n(0,i=f.width),"height"in f&&n(1,o=f.height)},t.$$.update=()=>{if(t.$$.dirty&28&&u){const f=new Gr;r.resetNodeIds(),l(f,r),Tm(f,r),c?(console.log(r),c.setNetwork(f)):n(4,c=qr.create(f,u,{showBreadcrumbs:!1,minimap:!1,watermark:!1,showResetView:!1}))}},[i,o,u,r,c,h]}class Sm extends dt{constructor(e){super(),ft(this,e,$m,Cm,ht,{circuit:3,width:0,height:1})}}function so(t,e,n){const r=t.slice();return r[2]=e[n],r[3]=e,r[4]=n,r}function ao(t){let e,n,r,i,o,s=t[0].signal.data===1?"on (1)":"off (0)",a,l=Ur(t[0].other.filter(uo)),u=[];for(let c=0;c<l.length;c+=1)u[c]=lo(so(t,l,c));return{c(){for(let c=0;c<u.length;c+=1)u[c].c();e=A(),n=S("div"),r=te("Output Signal "),i=S("div"),o=A(),a=te(s),I(i,"height","10px"),I(i,"width","10px"),I(i,"background",t[0].signal.data===1?"steelblue":"crimson"),I(n,"display","flex"),I(n,"gap","5px"),I(n,"align-items","center")},m(c,h){for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(c,h);Le(c,e,h),Le(c,n,h),w(n,r),w(n,i),w(n,o),w(n,a)},p(c,h){if(h&1){l=Ur(c[0].other.filter(uo));let f;for(f=0;f<l.length;f+=1){const d=so(c,l,f);u[f]?u[f].p(d,h):(u[f]=lo(d),u[f].c(),u[f].m(e.parentNode,e))}for(;f<u.length;f+=1)u[f].d(1);u.length=l.length}h&1&&I(i,"background",c[0].signal.data===1?"steelblue":"crimson"),h&1&&s!==(s=c[0].signal.data===1?"on (1)":"off (0)")&&Nt(a,s)},d(c){c&&(Te(e),Te(n)),ia(u,c)}}}function lo(t){let e,n,r=t[2].name+"",i,o,s,a,l,u,c=t[2].on?"on (1)":"off (0)",h,f,d;function g(){return t[1](t[2],t[3],t[4])}return{c(){e=S("div"),n=S("button"),i=te(r),o=A(),s=te(t[4]),a=A(),l=S("div"),u=A(),h=te(c),I(l,"height","10px"),I(l,"width","10px"),I(l,"background",t[2].on?"steelblue":"crimson"),I(e,"display","flex"),I(e,"gap","5px"),I(e,"align-items","center"),I(e,"margin-right","10px")},m(_,E){Le(_,e,E),w(e,n),w(n,i),w(n,o),w(n,s),w(e,a),w(e,l),w(e,u),w(e,h),f||(d=In(n,"click",g),f=!0)},p(_,E){t=_,E&1&&r!==(r=t[2].name+"")&&Nt(i,r),E&1&&I(l,"background",t[2].on?"steelblue":"crimson"),E&1&&c!==(c=t[2].on?"on (1)":"off (0)")&&Nt(h,c)},d(_){_&&Te(e),f=!1,d()}}}function Im(t){let e,n,r,i=t[0]&&ao(t);return n=new Sm({props:{circuit:t[0]}}),{c(){i&&i.c(),e=A(),Je(n.$$.fragment)},m(o,s){i&&i.m(o,s),Le(o,e,s),Ye(n,o,s),r=!0},p(o,[s]){o[0]?i?i.p(o,s):(i=ao(o),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null);const a={};s&1&&(a.circuit=o[0]),n.$set(a)},i(o){r||(qe(n.$$.fragment,o),r=!0)},o(o){Qe(n.$$.fragment,o),r=!1},d(o){o&&Te(e),i&&i.d(o),Xe(n,o)}}}const uo=t=>t.name==="switch";function Om(t,e,n){let{circuit:r}=e;const i=(o,s,a)=>{n(0,s[a].on=!o.on,r),r.reset(),r.simulate()};return t.$$set=o=>{"circuit"in o&&n(0,r=o.circuit)},[r,i]}class Zn extends dt{constructor(e){super(),ft(this,e,Om,Im,ht,{circuit:0})}}function Pm(t){let e,n,r,i,o,s,a,l,u,c,h,f,d,g,_,E,$,k,y,m,b,N,v,O,D,z,U,W,C,M,R,K,fe,de,_e,se,T,F,q,Q,pe,ue,ge,ve,Ve,it,J,ce,Lt,on,At,x,H,ee,Z,xe,Me,Ie;return E=new va({}),W=new xa({}),q=new _a({}),J=new Zn({props:{circuit:ga()}}),Z=new Zn({props:{circuit:da()}}),Me=new Zn({props:{circuit:pa()}}),{c(){e=S("div"),n=S("details"),r=S("summary"),r.innerHTML="<b>Electrical Sim</b>",i=A(),o=S("div"),o.textContent=`I want to simulate the basic properties of electricity here. I want
			to show that I can create universal boolean logic gates simply by
			modulating electricity.`,s=A(),a=S("div"),a.innerHTML=`<b class="neon" style="--color: cyan;">Question:</b> Why is electricity
			good at representing info?`,l=A(),u=S("div"),u.textContent=`Electricity can be modeled similar to the flow of water (although
			the analogy breaks down in key places). But the point is we can
			propagate a signal over a wire (or pipe).`,c=A(),h=S("div"),h.textContent=`Simply put, I can have a wire where a signal travels down. Depending
			on the material we can change how this signal gets sent (speed,
			power, ...).`,f=A(),d=S("div"),g=S("div"),g.innerHTML=`<b class="neon" style="--color: orange;">Example</b>: using a
				pipe, I could send a signal down a wire to do something at the
				other end. For modeling purposes, this happens instantly.`,_=A(),Je(E.$$.fragment),$=A(),k=S("div"),k.textContent=`Now it actually aint this simple. Given I have an electrical signal,
			the electrons don't just bend to my will.`,y=A(),m=S("div"),m.innerHTML=`<b class="neon" style="--color: red;">So How do I coax the electrons to signal?</b>: A quick simple model for getting an electron to do what you want
			is with + and -. Just think of these as two signals. Electrons are
			made up of the - signal and will actively want to move towards +
			signals.`,b=A(),N=S("div"),N.textContent=`In other words, at my example above, I needed the switch side to
			somehow ejects - electrons and have the lightbulb have + that the -
			electrons can move towards. One such way to make the lightbulb +
			like is to remove as many electrons from the lightbulb so that the
			electrons want to move there.`,v=A(),O=S("div"),O.textContent=`This is unfeasible since it also costs energy to do that. Instead,
			leverage the fact that we are ejecting electrons from the switch. In
			other words, as we remove - from the switch, it itself will become +
			like.`,D=A(),z=S("div"),U=te(`In other words, complete the circuit so to speak. Just add another
			wire that goes past the signal destination (light bulb) back to the
			source.
			`),Je(W.$$.fragment),C=A(),M=S("div"),M.textContent=`Note that this only works if the power source stops electrons from
			flowing backwards. This lets the electrons flow over the longer path
			to reach the ++ part of it instead of just staying in the power
			source.`,R=A(),K=S("div"),fe=S("b"),fe.textContent="Can we encode interesting operations in this simple system?",de=te(`: for example, can we encode a few boolean logic gate? If so, then
			we could reconstruct another other logic gate and compute anything
			(also worth revisiting deeply later).`),_e=A(),se=S("div"),T=S("b"),T.textContent="Not Gate",F=A(),Je(q.$$.fragment),Q=A(),pe=S("div"),pe.textContent=`When the switch is off, the output signal is on. But when the switch
			is on the output signal is off. This is because electricity will
			find the shortest path to the + signal. So most of the electrons
			will find there way down the signal once we turn on the switch.`,ue=A(),ge=S("div"),ge.textContent=`The funny thing is, you can see why electricity represents boolean
			operations so well. In my visualization, to show the property that
			electricity takes the shorter path requires boolean operations in
			the code itself. So it's almost like nature has those properties
			built in, and we just combine them to look nicer in our brain. This
			is a circular argument though because by definition we are
			describing electricity with boolean logic.`,ve=A(),Ve=S("div"),it=te(`To change up notation, here I'll have a graph where wires are also
			nodes and edges just show what is connected to what . Note that if
			there is a branch, two new wires are created. So the not gate in
			this notation looks like
			`),Je(J.$$.fragment),ce=A(),Lt=S("div"),Lt.textContent=`Some of these wires can be merged, but again, I show branching (like
			the wire branching from the middle splits the top into two). Again,
			the edges aren't wires in this diagram, wires are separate nodes and
			conceptual connections are edges.`,on=A(),At=S("div"),x=S("details"),H=S("summary"),H.textContent=`In this same notation, you can represent the original
					circuits too`,ee=te(`
				Incomplete circuit:
				`),Je(Z.$$.fragment),xe=te(`

				One switch:
				`),Je(Me.$$.fragment),tt(r,"class","neon"),I(r,"cursor","pointer"),I(r,"--color","lime"),tt(fe,"class","neon"),I(fe,"--color","deeppink"),tt(T,"class","neon"),I(T,"--color","fuchsia"),tt(H,"class","neon"),I(H,"cursor","pointer"),I(H,"--color","lime"),n.open=!0},m(me,ea){Le(me,e,ea),w(e,n),w(n,r),w(n,i),w(n,o),w(n,s),w(n,a),w(n,l),w(n,u),w(n,c),w(n,h),w(n,f),w(n,d),w(d,g),w(d,_),Ye(E,d,null),w(n,$),w(n,k),w(n,y),w(n,m),w(n,b),w(n,N),w(n,v),w(n,O),w(n,D),w(n,z),w(z,U),Ye(W,z,null),w(n,C),w(n,M),w(n,R),w(n,K),w(K,fe),w(K,de),w(n,_e),w(n,se),w(se,T),w(se,F),Ye(q,se,null),w(n,Q),w(n,pe),w(n,ue),w(n,ge),w(n,ve),w(n,Ve),w(Ve,it),Ye(J,Ve,null),w(n,ce),w(n,Lt),w(n,on),w(n,At),w(At,x),w(x,H),w(x,ee),Ye(Z,x,null),w(x,xe),Ye(Me,x,null),Ie=!0},p:$e,i(me){Ie||(qe(E.$$.fragment,me),qe(W.$$.fragment,me),qe(q.$$.fragment,me),qe(J.$$.fragment,me),qe(Z.$$.fragment,me),qe(Me.$$.fragment,me),Ie=!0)},o(me){Qe(E.$$.fragment,me),Qe(W.$$.fragment,me),Qe(q.$$.fragment,me),Qe(J.$$.fragment,me),Qe(Z.$$.fragment,me),Qe(Me.$$.fragment,me),Ie=!1},d(me){me&&Te(e),Xe(E),Xe(W),Xe(q),Xe(J),Xe(Z),Xe(Me)}}}class Lm extends dt{constructor(e){super(),ft(this,e,null,Pm,ht,{})}}function Am(t){let e,n,r;return n=new Lm({}),{c(){e=S("main"),Je(n.$$.fragment),tt(e,"class","svelte-kqkoi6")},m(i,o){Le(i,e,o),Ye(n,e,null),r=!0},p:$e,i(i){r||(qe(n.$$.fragment,i),r=!0)},o(i){Qe(n.$$.fragment,i),r=!1},d(i){i&&Te(e),Xe(n)}}}class Rm extends dt{constructor(e){super(),ft(this,e,null,Am,ht,{})}}new Rm({target:document.getElementById("app")});
