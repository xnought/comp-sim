var Js=Object.defineProperty;var ea=(t,e,n)=>e in t?Js(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Rn=(t,e,n)=>ea(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Te(){}function uo(t){return t()}function qr(){return Object.create(null)}function $n(t){t.forEach(uo)}function co(t){return typeof t=="function"}function ft(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ta(t){return Object.keys(t).length===0}function w(t,e){t.appendChild(e)}function Oe(t,e,n){t.insertBefore(e,n||null)}function Ce(t){t.parentNode&&t.parentNode.removeChild(t)}function na(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function S(t){return document.createElement(t)}function ne(t){return document.createTextNode(t)}function R(){return ne(" ")}function Sn(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function nt(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ra(t){return Array.from(t.childNodes)}function Ct(t,e){e=""+e,t.data!==e&&(t.data=e)}function I(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}let vr;function jt(t){vr=t}const yt=[],Zn=[];let vt=[];const Yr=[],ia=Promise.resolve();let Qn=!1;function oa(){Qn||(Qn=!0,ia.then(ho))}function Jn(t){vt.push(t)}const Bn=new Set;let mt=0;function ho(){if(mt!==0)return;const t=vr;do{try{for(;mt<yt.length;){const e=yt[mt];mt++,jt(e),sa(e.$$)}}catch(e){throw yt.length=0,mt=0,e}for(jt(null),yt.length=0,mt=0;Zn.length;)Zn.pop()();for(let e=0;e<vt.length;e+=1){const n=vt[e];Bn.has(n)||(Bn.add(n),n())}vt.length=0}while(yt.length);for(;Yr.length;)Yr.pop()();Qn=!1,Bn.clear(),jt(t)}function sa(t){if(t.fragment!==null){t.update(),$n(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Jn)}}function aa(t){const e=[],n=[];vt.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),vt=e}const fn=new Set;let la;function qe(t,e){t&&t.i&&(fn.delete(t),t.i(e))}function Je(t,e,n,r){if(t&&t.o){if(fn.has(t))return;fn.add(t),la.c.push(()=>{fn.delete(t)}),t.o(e)}}function Xr(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function et(t){t&&t.c()}function Ye(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),Jn(()=>{const o=t.$$.on_mount.map(uo).filter(co);t.$$.on_destroy?t.$$.on_destroy.push(...o):$n(o),t.$$.on_mount=[]}),i.forEach(Jn)}function Xe(t,e){const n=t.$$;n.fragment!==null&&(aa(n.after_update),$n(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ua(t,e){t.$$.dirty[0]===-1&&(yt.push(t),oa(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function dt(t,e,n,r,i,o,s=null,a=[-1]){const l=vr;jt(t);const u=t.$$={fragment:null,ctx:[],props:o,update:Te,not_equal:i,bound:qr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:qr(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};s&&s(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(h,f,...d)=>{const g=d.length?d[0]:f;return u.ctx&&i(u.ctx[h],u.ctx[h]=g)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](g),c&&ua(t,h)),f}):[],u.update(),c=!0,$n(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const h=ra(e.target);u.fragment&&u.fragment.l(h),h.forEach(Ce)}else u.fragment&&u.fragment.c();e.intro&&qe(t.$$.fragment),Ye(t,e.target,e.anchor),ho()}jt(l)}let pt=class{constructor(){Rn(this,"$$");Rn(this,"$$set")}$destroy(){Xe(this,1),this.$destroy=Te}$on(e,n){if(!co(n))return Te;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!ta(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};const ca="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ca);class zt{constructor(){this.in=[],this.out=[],this.data=0,this.name="switch",this.on=!0}switchOn(){this.on=!0}switchOff(){this.on=!1}}class kt{constructor(){this.in=[],this.out=[],this.data=0,this.name="power"}}class kr{constructor(){this.in=[],this.out=[],this.data=0,this.name="signal"}}class vn{constructor(){this.in=[],this.out=[],this.data=0,this.name="wire"}}class Er{constructor(e,n,r){this.source=e,this.signal=n,this.other=r}resetNodeIds(){this.signal.nodeId=void 0;for(const e of this.other)e.nodeId=void 0;this.source.nodeId=void 0}reset(){this.signal.data=0,this.signal.nodeId=void 0;for(const e of this.other)e.data=0,e.closest=1/0,e.nodeId=void 0;this.source.nodeId=void 0}precomputeDistances(){function e(n){if(n instanceof kt)return 0;if(n instanceof zt&&!n.on||n.out.length===0)return 1/0;let r=[];for(const i of n.out)r.push(e(i));return(n instanceof zt?0:1)+Math.min(...r)}for(const n of this.other)n.closest=e(n);this.signal.closest=e(this.signal)}connect(e,n){e.out.push(n),n.in.push(e)}simulate(){function e(n){if(n.in.length===0||n instanceof zt&&!n.on||n.out.length===0)return;n.data=1;let r=n.out[0];for(const i of n.out)i instanceof kt||i.closest<=r.closest&&(r=i);r instanceof kt||e(r)}this.reset(),this.precomputeDistances(),e(this.source)}}function ha(){const t=new kt,e=new kr,n=new vn,r=new Er(t,e,[n]);return r.connect(t,n),r.connect(n,e),r.simulate(),r}function fa(){const t=new kt,e=new kr,n=new vn,r=new zt,i=new vn,o=new Er(t,e,[n,r,i]);return o.connect(t,r),o.connect(r,n),o.connect(n,e),o.connect(e,i),o.connect(i,t),r.switchOn(),o.simulate(),o}function da(){const t=new kt,e=new kr,n=Array(7).fill(0).map(()=>new vn),r=new zt,i=new Er(t,e,[...n,r]);return i.connect(t,n[0]),i.connect(n[0],n[1]),i.connect(n[1],e),i.connect(e,n[2]),i.connect(n[2],n[3]),i.connect(n[3],n[4]),i.connect(n[4],n[5]),i.connect(n[5],t),i.connect(n[0],n[6]),i.connect(n[6],r),i.connect(r,n[4]),r.switchOn(),i.simulate(),i}function pa(t){let e,n,r,i,o,s,a,l,u,c,h,f,d,g,_,E,$,k,y,m,b,M,v,O,D,z=t[0]?"|":"/",U,W,N,x,A,K,de,pe,_e,ae,C,F,q,Q,ge,ce,me,ke,De,ot;return{c(){e=S("div"),n=S("div"),n.textContent="+power-",r=R(),i=S("span"),o=S("span"),o.textContent="-------------",s=S("span"),s.textContent="------------",a=ne("Light Bulb"),l=R(),u=S("div"),c=S("div"),h=S("div"),h.textContent="|",f=R(),d=S("div"),g=ne("|"),_=R(),E=S("div"),$=ne("|"),k=R(),y=S("div"),m=S("div"),m.textContent="|",b=R(),M=S("div"),v=S("div"),O=S("button"),O.textContent="switch",D=R(),U=ne(z),W=R(),N=S("div"),x=ne("|"),A=R(),K=S("div"),de=S("div"),de.textContent="|",pe=R(),_e=S("div"),ae=ne("|"),C=R(),F=S("div"),q=ne("|"),Q=R(),ge=S("div"),ce=S("span"),ce.textContent="---------------------",me=S("span"),ke=ne("--------------------"),I(o,"color","yellow"),I(i,"color",t[0]?"rgba(255,255,255,0.5)":"yellow"),I(e,"display","flex"),I(e,"width","500px"),I(h,"color","yellow"),I(d,"color",t[0]?"yellow":"rgba(255,255,255,0.5)"),I(E,"color",t[0]?"rgba(255,255,255,0.5)":"yellow"),nt(c,"class","w svelte-1c1c3yo"),I(m,"color","yellow"),I(O,"position","absolute"),I(O,"left","-70px"),I(v,"position","relative"),I(M,"color",t[0]?"yellow":"rgba(255,255,255,0.5)"),I(N,"color",t[0]?"rgba(255,255,255,0.5)":"yellow"),nt(y,"class","w svelte-1c1c3yo"),I(de,"color","yellow"),I(_e,"color",t[0]?"yellow":"rgba(255,255,255,0.5)"),I(F,"color",t[0]?"rgba(255,255,255,0.5)":"yellow"),nt(K,"class","w svelte-1c1c3yo"),I(ce,"color","yellow"),I(me,"color",t[0]?"rgba(255,255,255,0.5)":"yellow"),I(u,"width","300px")},m(J,he){Oe(J,e,he),w(e,n),w(e,r),w(e,i),w(i,o),w(i,s),w(i,a),Oe(J,l,he),Oe(J,u,he),w(u,c),w(c,h),w(c,f),w(c,d),w(d,g),w(c,_),w(c,E),w(E,$),w(u,k),w(u,y),w(y,m),w(y,b),w(y,M),w(M,v),w(v,O),w(v,D),w(v,U),w(y,W),w(y,N),w(N,x),w(u,A),w(u,K),w(K,de),w(K,pe),w(K,_e),w(_e,ae),w(K,C),w(K,F),w(F,q),w(u,Q),w(u,ge),w(ge,ce),w(ge,me),w(me,ke),De||(ot=Sn(O,"click",t[1]),De=!0)},p(J,[he]){he&1&&I(i,"color",J[0]?"rgba(255,255,255,0.5)":"yellow"),he&1&&I(d,"color",J[0]?"yellow":"rgba(255,255,255,0.5)"),he&1&&I(E,"color",J[0]?"rgba(255,255,255,0.5)":"yellow"),he&1&&z!==(z=J[0]?"|":"/")&&Ct(U,z),he&1&&I(M,"color",J[0]?"yellow":"rgba(255,255,255,0.5)"),he&1&&I(N,"color",J[0]?"rgba(255,255,255,0.5)":"yellow"),he&1&&I(_e,"color",J[0]?"yellow":"rgba(255,255,255,0.5)"),he&1&&I(F,"color",J[0]?"rgba(255,255,255,0.5)":"yellow"),he&1&&I(me,"color",J[0]?"rgba(255,255,255,0.5)":"yellow")},i:Te,o:Te,d(J){J&&(Ce(e),Ce(l),Ce(u)),De=!1,ot()}}}function ga(t,e,n){let r=!1;return[r,()=>n(0,r=!r)]}class ma extends pt{constructor(e){super(),dt(this,e,ga,pa,ft,{})}}function wa(t){let e,n,r,i,o,s=t[0]?"on":"off",a,l,u,c,h,f;return{c(){e=S("div"),n=S("div"),r=S("button"),r.textContent="power switch",i=R(),o=S("span"),a=ne(s),l=R(),u=S("span"),c=ne("-----------------------------Light Bulb"),I(o,"background",t[0]?"lime":"red"),I(u,"color",t[0]?"yellow":"rgba(255,255,255,0.5)"),I(e,"display","flex"),I(e,"width","500px")},m(d,g){Oe(d,e,g),w(e,n),w(n,r),w(n,i),w(n,o),w(o,a),w(e,l),w(e,u),w(u,c),h||(f=Sn(r,"click",t[1]),h=!0)},p(d,[g]){g&1&&s!==(s=d[0]?"on":"off")&&Ct(a,s),g&1&&I(o,"background",d[0]?"lime":"red"),g&1&&I(u,"color",d[0]?"yellow":"rgba(255,255,255,0.5)")},i:Te,o:Te,d(d){d&&Ce(e),h=!1,f()}}}function _a(t,e,n){let r=!1;return[r,()=>n(0,r=!r)]}class ya extends pt{constructor(e){super(),dt(this,e,_a,wa,ft,{})}}function ba(t){let e,n,r,i,o,s=t[0]?"on":"off",a,l,u,c,h,f,d,g;return{c(){e=S("div"),n=S("div"),r=S("button"),r.textContent="power switch",i=R(),o=S("span"),a=ne(s),l=R(),u=S("span"),c=S("div"),c.textContent="-----------------------------Light Bulb",h=R(),f=S("div"),f.textContent="<-----------------------------|",I(o,"background",t[0]?"lime":"red"),I(u,"color",t[0]?"yellow":"rgba(255,255,255,0.5)"),I(e,"display","flex"),I(e,"width","500px")},m(_,E){Oe(_,e,E),w(e,n),w(n,r),w(n,i),w(n,o),w(o,a),w(e,l),w(e,u),w(u,c),w(u,h),w(u,f),d||(g=Sn(r,"click",t[1]),d=!0)},p(_,[E]){E&1&&s!==(s=_[0]?"on":"off")&&Ct(a,s),E&1&&I(o,"background",_[0]?"lime":"red"),E&1&&I(u,"color",_[0]?"yellow":"rgba(255,255,255,0.5)")},i:Te,o:Te,d(_){_&&Ce(e),d=!1,g()}}}function va(t,e,n){let r=!1;return[r,()=>n(0,r=!r)]}class ka extends pt{constructor(e){super(),dt(this,e,va,ba,ft,{})}}var Ea=Object.defineProperty,xa=(t,e,n)=>e in t?Ea(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,P=(t,e,n)=>xa(t,typeof e!="symbol"?e+"":e,n);const Pe={black:"#000000",white:"#ffffff",foreground:{blue:"#0066CC",red:"#E30000",orange:"#BF4800",yellow:"#D08B00",green:"#008009",purple:"#6D56D6",gray:"#1D1D1F",graySecondary:"#6E6E73",graySecondaryAlt:"#515154",grayTertiary:"#86868B"},background:{gray:"rgb(250, 250, 250)",darkGray:"rgb(51,51,51)"}},Jt={family:"SF Mono, ui-monospace, monospace",weight:{regular:200,semibold:500,bold:600}},Ma={y:8,x:4},Na=Object.freeze(Object.defineProperty({__proto__:null,colors:Pe,font:Jt,spacing:Ma},Symbol.toStringTag,{value:"Module"}));let er=class Bt{constructor(e,n,r){P(this,"x"),P(this,"y"),P(this,"k"),this.x=e,this.y=n,this.k=r}static identity(){return new Bt(0,0,1)}translate(e,n){return e===0&&n===0?this:new Bt(this.x+this.k*e,this.y+this.k*n,this.k)}scale(e){return e===1?this:new Bt(this.x,this.y,this.k*e)}apply(e,n){return{x:e*this.k+this.x,y:n*this.k+this.y}}inverse(){return Bt.identity().scale(1/this.k).translate(-this.x,-this.y)}toString(){return`translate(${this.x},${this.y}) scale(${this.k})`}};var Ca={value:()=>{}};function xr(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new dn(n)}function dn(t){this._=t}function Ta(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}dn.prototype=xr.prototype={constructor:dn,on:function(t,e){var n=this._,r=Ta(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=$a(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=Ur(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ur(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new dn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function $a(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ur(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ca,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var tr="http://www.w3.org/1999/xhtml";const Kr={svg:"http://www.w3.org/2000/svg",xhtml:tr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function In(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Kr.hasOwnProperty(e)?{space:Kr[e],local:t}:t}function Sa(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===tr&&e.documentElement.namespaceURI===tr?e.createElement(t):e.createElementNS(n,t)}}function Ia(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function fo(t){var e=In(t);return(e.local?Ia:Sa)(e)}function Oa(){}function Mr(t){return t==null?Oa:function(){return this.querySelector(t)}}function Pa(t){typeof t!="function"&&(t=Mr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),l,u,c=0;c<s;++c)(l=o[c])&&(u=t.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new $e(r,this._parents)}function La(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Aa(){return[]}function po(t){return t==null?Aa:function(){return this.querySelectorAll(t)}}function Ra(t){return function(){return La(t.apply(this,arguments))}}function Ba(t){typeof t=="function"?t=Ra(t):t=po(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(r.push(t.call(l,l.__data__,u,s)),i.push(l));return new $e(r,i)}function go(t){return function(){return this.matches(t)}}function mo(t){return function(e){return e.matches(t)}}var Da=Array.prototype.find;function Fa(t){return function(){return Da.call(this.children,t)}}function Va(){return this.firstElementChild}function Wa(t){return this.select(t==null?Va:Fa(typeof t=="function"?t:mo(t)))}var ja=Array.prototype.filter;function za(){return Array.from(this.children)}function Ga(t){return function(){return ja.call(this.children,t)}}function Ha(t){return this.selectAll(t==null?za:Ga(typeof t=="function"?t:mo(t)))}function qa(t){typeof t!="function"&&(t=go(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&a.push(l);return new $e(r,this._parents)}function wo(t){return new Array(t.length)}function Ya(){return new $e(this._enter||this._groups.map(wo),this._parents)}function kn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}kn.prototype={constructor:kn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Xa(t){return function(){return t}}function Ua(t,e,n,r,i,o){for(var s=0,a,l=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new kn(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function Ka(t,e,n,r,i,o,s){var a,l,u=new Map,c=e.length,h=o.length,f=new Array(c),d;for(a=0;a<c;++a)(l=e[a])&&(f[a]=d=s.call(l,l.__data__,a,e)+"",u.has(d)?i[a]=l:u.set(d,l));for(a=0;a<h;++a)d=s.call(t,o[a],a,o)+"",(l=u.get(d))?(r[a]=l,l.__data__=o[a],u.delete(d)):n[a]=new kn(t,o[a]);for(a=0;a<c;++a)(l=e[a])&&u.get(f[a])===l&&(i[a]=l)}function Za(t){return t.__data__}function Qa(t,e){if(!arguments.length)return Array.from(this,Za);var n=e?Ka:Ua,r=this._parents,i=this._groups;typeof t!="function"&&(t=Xa(t));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],h=i[u],f=h.length,d=Ja(t.call(c,c&&c.__data__,u,r)),g=d.length,_=a[u]=new Array(g),E=s[u]=new Array(g),$=l[u]=new Array(f);n(c,h,_,E,$,d,e);for(var k=0,y=0,m,b;k<g;++k)if(m=_[k]){for(k>=y&&(y=k+1);!(b=E[y])&&++y<g;);m._next=b||null}}return s=new $e(s,r),s._enter=a,s._exit=l,s}function Ja(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function el(){return new $e(this._exit||this._groups.map(wo),this._parents)}function tl(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function nl(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var u=n[l],c=r[l],h=u.length,f=a[l]=new Array(h),d,g=0;g<h;++g)(d=u[g]||c[g])&&(f[g]=d);for(;l<i;++l)a[l]=n[l];return new $e(a,this._parents)}function rl(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function il(t){t||(t=ol);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(e)}return new $e(i,this._parents).order()}function ol(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function sl(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function al(){return Array.from(this)}function ll(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function ul(){let t=0;for(const e of this)++t;return t}function cl(){return!this.node()}function hl(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function fl(t){return function(){this.removeAttribute(t)}}function dl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function pl(t,e){return function(){this.setAttribute(t,e)}}function gl(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ml(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function wl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function _l(t,e){var n=In(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?dl:fl:typeof e=="function"?n.local?wl:ml:n.local?gl:pl)(n,e))}function _o(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function yl(t){return function(){this.style.removeProperty(t)}}function bl(t,e,n){return function(){this.style.setProperty(t,e,n)}}function vl(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function kl(t,e,n){return arguments.length>1?this.each((e==null?yl:typeof e=="function"?vl:bl)(t,e,n??"")):Tt(this.node(),t)}function Tt(t,e){return t.style.getPropertyValue(e)||_o(t).getComputedStyle(t,null).getPropertyValue(e)}function El(t){return function(){delete this[t]}}function xl(t,e){return function(){this[t]=e}}function Ml(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Nl(t,e){return arguments.length>1?this.each((e==null?El:typeof e=="function"?Ml:xl)(t,e)):this.node()[t]}function yo(t){return t.trim().split(/^|\s+/)}function Nr(t){return t.classList||new bo(t)}function bo(t){this._node=t,this._names=yo(t.getAttribute("class")||"")}bo.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function vo(t,e){for(var n=Nr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ko(t,e){for(var n=Nr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Cl(t){return function(){vo(this,t)}}function Tl(t){return function(){ko(this,t)}}function $l(t,e){return function(){(e.apply(this,arguments)?vo:ko)(this,t)}}function Sl(t,e){var n=yo(t+"");if(arguments.length<2){for(var r=Nr(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?$l:e?Cl:Tl)(n,e))}function Il(){this.textContent=""}function Ol(t){return function(){this.textContent=t}}function Pl(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ll(t){return arguments.length?this.each(t==null?Il:(typeof t=="function"?Pl:Ol)(t)):this.node().textContent}function Al(){this.innerHTML=""}function Rl(t){return function(){this.innerHTML=t}}function Bl(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Dl(t){return arguments.length?this.each(t==null?Al:(typeof t=="function"?Bl:Rl)(t)):this.node().innerHTML}function Fl(){this.nextSibling&&this.parentNode.appendChild(this)}function Vl(){return this.each(Fl)}function Wl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jl(){return this.each(Wl)}function zl(t){var e=typeof t=="function"?t:fo(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Gl(){return null}function Hl(t,e){var n=typeof t=="function"?t:fo(t),r=e==null?Gl:typeof e=="function"?e:Mr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ql(){var t=this.parentNode;t&&t.removeChild(this)}function Yl(){return this.each(ql)}function Xl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ul(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Kl(t){return this.select(t?Ul:Xl)}function Zl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ql(t){return function(e){t.call(this,e,this.__data__)}}function Jl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function eu(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function tu(t,e,n){return function(){var r=this.__on,i,o=Ql(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function nu(t,e,n){var r=Jl(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=e?tu:eu,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function Eo(t,e,n){var r=_o(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ru(t,e){return function(){return Eo(this,t,e)}}function iu(t,e){return function(){return Eo(this,t,e.apply(this,arguments))}}function ou(t,e){return this.each((typeof e=="function"?iu:ru)(t,e))}function*su(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var xo=[null];function $e(t,e){this._groups=t,this._parents=e}function en(){return new $e([[document.documentElement]],xo)}function au(){return this}$e.prototype=en.prototype={constructor:$e,select:Pa,selectAll:Ba,selectChild:Wa,selectChildren:Ha,filter:qa,data:Qa,enter:Ya,exit:el,join:tl,merge:nl,selection:au,order:rl,sort:il,call:sl,nodes:al,node:ll,size:ul,empty:cl,each:hl,attr:_l,style:kl,property:Nl,classed:Sl,text:Ll,html:Dl,raise:Vl,lower:jl,append:zl,insert:Hl,remove:Yl,clone:Kl,datum:Zl,on:nu,dispatch:ou,[Symbol.iterator]:su};function Ht(t){return typeof t=="string"?new $e([[document.querySelector(t)]],[document.documentElement]):new $e([[t]],xo)}function lu(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Zr(t,e){if(t=lu(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const uu={passive:!1},qt={capture:!0,passive:!1};function Dn(t){t.stopImmediatePropagation()}function Et(t){t.preventDefault(),t.stopImmediatePropagation()}function cu(t){var e=t.document.documentElement,n=Ht(t).on("dragstart.drag",Et,qt);"onselectstart"in e?n.on("selectstart.drag",Et,qt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function hu(t,e){var n=t.document.documentElement,r=Ht(t).on("dragstart.drag",null);e&&(r.on("click.drag",Et,qt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const on=t=>()=>t;function nr(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}nr.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function fu(t){return!t.ctrlKey&&!t.button}function du(){return this.parentNode}function pu(t,e){return e??{x:t.x,y:t.y}}function gu(){return navigator.maxTouchPoints||"ontouchstart"in this}function mu(){var t=fu,e=du,n=pu,r=gu,i={},o=xr("start","drag","end"),s=0,a,l,u,c,h=0;function f(m){m.on("mousedown.drag",d).filter(r).on("touchstart.drag",E).on("touchmove.drag",$,uu).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(m,b){if(!(c||!t.call(this,m,b))){var M=y(this,e.call(this,m,b),m,b,"mouse");M&&(Ht(m.view).on("mousemove.drag",g,qt).on("mouseup.drag",_,qt),cu(m.view),Dn(m),u=!1,a=m.clientX,l=m.clientY,M("start",m))}}function g(m){if(Et(m),!u){var b=m.clientX-a,M=m.clientY-l;u=b*b+M*M>h}i.mouse("drag",m)}function _(m){Ht(m.view).on("mousemove.drag mouseup.drag",null),hu(m.view,u),Et(m),i.mouse("end",m)}function E(m,b){if(t.call(this,m,b)){var M=m.changedTouches,v=e.call(this,m,b),O=M.length,D,z;for(D=0;D<O;++D)(z=y(this,v,m,b,M[D].identifier,M[D]))&&(Dn(m),z("start",m,M[D]))}}function $(m){var b=m.changedTouches,M=b.length,v,O;for(v=0;v<M;++v)(O=i[b[v].identifier])&&(Et(m),O("drag",m,b[v]))}function k(m){var b=m.changedTouches,M=b.length,v,O;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),v=0;v<M;++v)(O=i[b[v].identifier])&&(Dn(m),O("end",m,b[v]))}function y(m,b,M,v,O,D){var z=o.copy(),U=Zr(D||M,b),W,N,x;if((x=n.call(m,new nr("beforestart",{sourceEvent:M,target:f,identifier:O,active:s,x:U[0],y:U[1],dx:0,dy:0,dispatch:z}),v))!=null)return W=x.x-U[0]||0,N=x.y-U[1]||0,function A(K,de,pe){var _e=U,ae;switch(K){case"start":i[O]=A,ae=s++;break;case"end":delete i[O],--s;case"drag":U=Zr(pe||de,b),ae=s;break}z.call(K,m,new nr(K,{sourceEvent:de,subject:x,target:f,identifier:O,active:ae,x:U[0]+W,y:U[1]+N,dx:U[0]-_e[0],dy:U[1]-_e[1],dispatch:z}),v)}}return f.filter=function(m){return arguments.length?(t=typeof m=="function"?m:on(!!m),f):t},f.container=function(m){return arguments.length?(e=typeof m=="function"?m:on(m),f):e},f.subject=function(m){return arguments.length?(n=typeof m=="function"?m:on(m),f):n},f.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:on(!!m),f):r},f.on=function(){var m=o.on.apply(o,arguments);return m===o?f:m},f.clickDistance=function(m){return arguments.length?(h=(m=+m)*m,f):Math.sqrt(h)},f}function Cr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Mo(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function tn(){}var Yt=.7,En=1/Yt,xt="\\s*([+-]?\\d+)\\s*",Xt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wu=/^#([0-9a-f]{3,8})$/,_u=new RegExp(`^rgb\\(${xt},${xt},${xt}\\)$`),yu=new RegExp(`^rgb\\(${Fe},${Fe},${Fe}\\)$`),bu=new RegExp(`^rgba\\(${xt},${xt},${xt},${Xt}\\)$`),vu=new RegExp(`^rgba\\(${Fe},${Fe},${Fe},${Xt}\\)$`),ku=new RegExp(`^hsl\\(${Xt},${Fe},${Fe}\\)$`),Eu=new RegExp(`^hsla\\(${Xt},${Fe},${Fe},${Xt}\\)$`),Qr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cr(tn,Ut,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Jr,formatHex:Jr,formatHex8:xu,formatHsl:Mu,formatRgb:ei,toString:ei});function Jr(){return this.rgb().formatHex()}function xu(){return this.rgb().formatHex8()}function Mu(){return No(this).formatHsl()}function ei(){return this.rgb().formatRgb()}function Ut(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=wu.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ti(e):n===3?new xe(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?sn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?sn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_u.exec(t))?new xe(e[1],e[2],e[3],1):(e=yu.exec(t))?new xe(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=bu.exec(t))?sn(e[1],e[2],e[3],e[4]):(e=vu.exec(t))?sn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ku.exec(t))?ii(e[1],e[2]/100,e[3]/100,1):(e=Eu.exec(t))?ii(e[1],e[2]/100,e[3]/100,e[4]):Qr.hasOwnProperty(t)?ti(Qr[t]):t==="transparent"?new xe(NaN,NaN,NaN,0):null}function ti(t){return new xe(t>>16&255,t>>8&255,t&255,1)}function sn(t,e,n,r){return r<=0&&(t=e=n=NaN),new xe(t,e,n,r)}function Nu(t){return t instanceof tn||(t=Ut(t)),t?(t=t.rgb(),new xe(t.r,t.g,t.b,t.opacity)):new xe}function rr(t,e,n,r){return arguments.length===1?Nu(t):new xe(t,e,n,r??1)}function xe(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Cr(xe,rr,Mo(tn,{brighter(t){return t=t==null?En:Math.pow(En,t),new xe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Yt:Math.pow(Yt,t),new xe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new xe(ct(this.r),ct(this.g),ct(this.b),xn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ni,formatHex:ni,formatHex8:Cu,formatRgb:ri,toString:ri}));function ni(){return`#${lt(this.r)}${lt(this.g)}${lt(this.b)}`}function Cu(){return`#${lt(this.r)}${lt(this.g)}${lt(this.b)}${lt((isNaN(this.opacity)?1:this.opacity)*255)}`}function ri(){const t=xn(this.opacity);return`${t===1?"rgb(":"rgba("}${ct(this.r)}, ${ct(this.g)}, ${ct(this.b)}${t===1?")":`, ${t})`}`}function xn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ct(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function lt(t){return t=ct(t),(t<16?"0":"")+t.toString(16)}function ii(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ae(t,e,n,r)}function No(t){if(t instanceof Ae)return new Ae(t.h,t.s,t.l,t.opacity);if(t instanceof tn||(t=Ut(t)),!t)return new Ae;if(t instanceof Ae)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new Ae(s,a,l,t.opacity)}function Tu(t,e,n,r){return arguments.length===1?No(t):new Ae(t,e,n,r??1)}function Ae(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Cr(Ae,Tu,Mo(tn,{brighter(t){return t=t==null?En:Math.pow(En,t),new Ae(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Yt:Math.pow(Yt,t),new Ae(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new xe(Fn(t>=240?t-240:t+120,i,r),Fn(t,i,r),Fn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ae(oi(this.h),an(this.s),an(this.l),xn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=xn(this.opacity);return`${t===1?"hsl(":"hsla("}${oi(this.h)}, ${an(this.s)*100}%, ${an(this.l)*100}%${t===1?")":`, ${t})`}`}}));function oi(t){return t=(t||0)%360,t<0?t+360:t}function an(t){return Math.max(0,Math.min(1,t||0))}function Fn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Co=t=>()=>t;function $u(t,e){return function(n){return t+n*e}}function Su(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Iu(t){return(t=+t)==1?To:function(e,n){return n-e?Su(e,n,t):Co(isNaN(e)?n:e)}}function To(t,e){var n=e-t;return n?$u(t,n):Co(isNaN(t)?e:t)}const si=function t(e){var n=Iu(e);function r(i,o){var s=n((i=rr(i)).r,(o=rr(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=To(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function tt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var ir=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vn=new RegExp(ir.source,"g");function Ou(t){return function(){return t}}function Pu(t){return function(e){return t(e)+""}}function Lu(t,e){var n=ir.lastIndex=Vn.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(r=ir.exec(t))&&(i=Vn.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:tt(r,i)})),n=Vn.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Pu(l[0].x):Ou(e):(e=l.length,function(u){for(var c=0,h;c<e;++c)a[(h=l[c]).i]=h.x(u);return a.join("")})}var ai=180/Math.PI,or={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $o(t,e,n,r,i,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ai,skewX:Math.atan(l)*ai,scaleX:s,scaleY:a}}var ln;function Au(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?or:$o(e.a,e.b,e.c,e.d,e.e,e.f)}function Ru(t){return t==null||(ln||(ln=document.createElementNS("http://www.w3.org/2000/svg","g")),ln.setAttribute("transform",t),!(t=ln.transform.baseVal.consolidate()))?or:(t=t.matrix,$o(t.a,t.b,t.c,t.d,t.e,t.f))}function So(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,h,f,d,g){if(u!==h||c!==f){var _=d.push("translate(",null,e,null,n);g.push({i:_-4,x:tt(u,h)},{i:_-2,x:tt(c,f)})}else(h||f)&&d.push("translate("+h+e+f+n)}function s(u,c,h,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:tt(u,c)})):c&&h.push(i(h)+"rotate("+c+r)}function a(u,c,h,f){u!==c?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:tt(u,c)}):c&&h.push(i(h)+"skewX("+c+r)}function l(u,c,h,f,d,g){if(u!==h||c!==f){var _=d.push(i(d)+"scale(",null,",",null,")");g.push({i:_-4,x:tt(u,h)},{i:_-2,x:tt(c,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(u,c){var h=[],f=[];return u=t(u),c=t(c),o(u.translateX,u.translateY,c.translateX,c.translateY,h,f),s(u.rotate,c.rotate,h,f),a(u.skewX,c.skewX,h,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,f),u=c=null,function(d){for(var g=-1,_=f.length,E;++g<_;)h[(E=f[g]).i]=E.x(d);return h.join("")}}}var Bu=So(Au,"px, ","px)","deg)"),Du=So(Ru,", ",")",")"),$t=0,Dt=0,Rt=0,Io=1e3,Mn,Ft,Nn=0,ht=0,On=0,Kt=typeof performance=="object"&&performance.now?performance:Date,Oo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Tr(){return ht||(Oo(Fu),ht=Kt.now()+On)}function Fu(){ht=0}function Cn(){this._call=this._time=this._next=null}Cn.prototype=Po.prototype={constructor:Cn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Tr():+n)+(e==null?0:+e),!this._next&&Ft!==this&&(Ft?Ft._next=this:Mn=this,Ft=this),this._call=t,this._time=n,sr()},stop:function(){this._call&&(this._call=null,this._time=1/0,sr())}};function Po(t,e,n){var r=new Cn;return r.restart(t,e,n),r}function Vu(){Tr(),++$t;for(var t=Mn,e;t;)(e=ht-t._time)>=0&&t._call.call(void 0,e),t=t._next;--$t}function li(){ht=(Nn=Kt.now())+On,$t=Dt=0;try{Vu()}finally{$t=0,ju(),ht=0}}function Wu(){var t=Kt.now(),e=t-Nn;e>Io&&(On-=e,Nn=t)}function ju(){for(var t,e=Mn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Mn=n);Ft=t,sr(r)}function sr(t){if(!$t){Dt&&(Dt=clearTimeout(Dt));var e=t-ht;e>24?(t<1/0&&(Dt=setTimeout(li,t-Kt.now()-On)),Rt&&(Rt=clearInterval(Rt))):(Rt||(Nn=Kt.now(),Rt=setInterval(Wu,Io)),$t=1,Oo(li))}}function ui(t,e,n){var r=new Cn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var zu=xr("start","end","cancel","interrupt"),Gu=[],Lo=0,ci=1,ar=2,pn=3,hi=4,lr=5,gn=6;function Pn(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Hu(t,n,{name:e,index:r,group:i,on:zu,tween:Gu,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Lo})}function $r(t,e){var n=Re(t,e);if(n.state>Lo)throw new Error("too late; already scheduled");return n}function Ve(t,e){var n=Re(t,e);if(n.state>pn)throw new Error("too late; already running");return n}function Re(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Hu(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Po(o,0,n.time);function o(u){n.state=ci,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,h,f,d;if(n.state!==ci)return l();for(c in r)if(d=r[c],d.name===n.name){if(d.state===pn)return ui(s);d.state===hi?(d.state=gn,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=gn,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(ui(function(){n.state===pn&&(n.state=hi,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=ar,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ar){for(n.state=pn,i=new Array(f=n.tween.length),c=0,h=-1;c<f;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=lr,1),h=-1,f=i.length;++h<f;)i[h].call(t,c);n.state===lr&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=gn,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function qu(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>ar&&r.state<lr,r.state=gn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function Yu(t){return this.each(function(){qu(this,t)})}function Xu(t,e){var n,r;return function(){var i=Ve(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Uu(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Ve(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=a;break}l===u&&i.push(a)}o.tween=i}}function Ku(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Re(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?Xu:Uu)(n,t,e))}function Sr(t,e,n){var r=t._id;return t.each(function(){var i=Ve(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Re(i,r).value[e]}}function Ao(t,e){var n;return(typeof e=="number"?tt:e instanceof Ut?si:(n=Ut(e))?(e=n,si):Lu)(t,e)}function Zu(t){return function(){this.removeAttribute(t)}}function Qu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ju(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function ec(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function tc(t,e,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a)))}}function nc(t,e,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a)))}}function rc(t,e){var n=In(t),r=n==="transform"?Du:Ao;return this.attrTween(t,typeof e=="function"?(n.local?nc:tc)(n,r,Sr(this,"attr."+t,e)):e==null?(n.local?Qu:Zu)(n):(n.local?ec:Ju)(n,r,e))}function ic(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function oc(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function sc(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&oc(t,o)),n}return i._value=e,i}function ac(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&ic(t,o)),n}return i._value=e,i}function lc(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=In(t);return this.tween(n,(r.local?sc:ac)(r,e))}function uc(t,e){return function(){$r(this,t).delay=+e.apply(this,arguments)}}function cc(t,e){return e=+e,function(){$r(this,t).delay=e}}function hc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?uc:cc)(e,t)):Re(this.node(),e).delay}function fc(t,e){return function(){Ve(this,t).duration=+e.apply(this,arguments)}}function dc(t,e){return e=+e,function(){Ve(this,t).duration=e}}function pc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?fc:dc)(e,t)):Re(this.node(),e).duration}function gc(t,e){if(typeof e!="function")throw new Error;return function(){Ve(this,t).ease=e}}function mc(t){var e=this._id;return arguments.length?this.each(gc(e,t)):Re(this.node(),e).ease}function wc(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ve(this,t).ease=n}}function _c(t){if(typeof t!="function")throw new Error;return this.each(wc(this._id,t))}function yc(t){typeof t!="function"&&(t=go(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&a.push(l);return new Ke(r,this._parents,this._name,this._id)}function bc(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=e[a],u=n[a],c=l.length,h=s[a]=new Array(c),f,d=0;d<c;++d)(f=l[d]||u[d])&&(h[d]=f);for(;a<r;++a)s[a]=e[a];return new Ke(s,this._parents,this._name,this._id)}function vc(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function kc(t,e,n){var r,i,o=vc(e)?$r:Ve;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function Ec(t,e){var n=this._id;return arguments.length<2?Re(this.node(),n).on.on(t):this.each(kc(n,t,e))}function xc(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Mc(){return this.on("end.remove",xc(this._id))}function Nc(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Mr(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,u=o[s]=new Array(l),c,h,f=0;f<l;++f)(c=a[f])&&(h=t.call(c,c.__data__,f,a))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h,Pn(u[f],e,n,f,u,Re(c,n)));return new Ke(o,this._parents,e,n)}function Cc(t){var e=this._name,n=this._id;typeof t!="function"&&(t=po(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,h=0;h<u;++h)if(c=l[h]){for(var f=t.call(c,c.__data__,h,l),d,g=Re(c,n),_=0,E=f.length;_<E;++_)(d=f[_])&&Pn(d,e,n,_,f,g);o.push(f),s.push(c)}return new Ke(o,s,e,n)}var Tc=en.prototype.constructor;function $c(){return new Tc(this._groups,this._parents)}function Sc(t,e){var n,r,i;return function(){var o=Tt(this,t),s=(this.style.removeProperty(t),Tt(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function Ro(t){return function(){this.style.removeProperty(t)}}function Ic(t,e,n){var r,i=n+"",o;return function(){var s=Tt(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function Oc(t,e,n){var r,i,o;return function(){var s=Tt(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),Tt(this,t))),s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}function Pc(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var l=Ve(this,t),u=l.on,c=l.value[o]==null?a||(a=Ro(e)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(s,i=c),l.on=r}}function Lc(t,e,n){var r=(t+="")=="transform"?Bu:Ao;return e==null?this.styleTween(t,Sc(t,r)).on("end.style."+t,Ro(t)):typeof e=="function"?this.styleTween(t,Oc(t,r,Sr(this,"style."+t,e))).each(Pc(this._id,t)):this.styleTween(t,Ic(t,r,e),n).on("end.style."+t,null)}function Ac(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Rc(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Ac(t,s,n)),r}return o._value=e,o}function Bc(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Rc(t,e,n??""))}function Dc(t){return function(){this.textContent=t}}function Fc(t){return function(){var e=t(this);this.textContent=e??""}}function Vc(t){return this.tween("text",typeof t=="function"?Fc(Sr(this,"text",t)):Dc(t==null?"":t+""))}function Wc(t){return function(e){this.textContent=t.call(this,e)}}function jc(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Wc(i)),e}return r._value=t,r}function zc(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,jc(t))}function Gc(){for(var t=this._name,e=this._id,n=Bo(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=Re(l,e);Pn(l,t,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ke(r,this._parents,t,n)}function Hc(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var u=Ve(this,r),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),u.on=e}),i===0&&o()})}var qc=0;function Ke(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Bo(){return++qc}var He=en.prototype;Ke.prototype={constructor:Ke,select:Nc,selectAll:Cc,selectChild:He.selectChild,selectChildren:He.selectChildren,filter:yc,merge:bc,selection:$c,transition:Gc,call:He.call,nodes:He.nodes,node:He.node,size:He.size,empty:He.empty,each:He.each,on:Ec,attr:rc,attrTween:lc,style:Lc,styleTween:Bc,text:Vc,textTween:zc,remove:Mc,tween:Ku,delay:hc,duration:pc,ease:mc,easeVarying:_c,end:Hc,[Symbol.iterator]:He[Symbol.iterator]};function Yc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Xc={time:null,delay:0,duration:250,ease:Yc};function Uc(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Kc(t){var e,n;t instanceof Ke?(e=t._id,t=t._name):(e=Bo(),(n=Xc).time=Tr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&Pn(l,t,e,u,s,n||Uc(l,e));return new Ke(r,this._parents,t,e)}en.prototype.interrupt=Yu;en.prototype.transition=Kc;const ur=Math.PI,cr=2*ur,at=1e-6,Zc=cr-at;function Do(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Qc(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Do;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Fo{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Do:Qc(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-e,u=i-n,c=s-e,h=a-n,f=c*c+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>at)if(!(Math.abs(h*l-u*c)>at)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-s,g=i-a,_=l*l+u*u,E=d*d+g*g,$=Math.sqrt(_),k=Math.sqrt(f),y=o*Math.tan((ur-Math.acos((_+f-E)/(2*$*k)))/2),m=y/k,b=y/$;Math.abs(m-1)>at&&this._append`L${e+m*c},${n+m*h}`,this._append`A${o},${o},0,0,${+(h*d>c*g)},${this._x1=e+b*l},${this._y1=n+b*u}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=e+a,c=n+l,h=1^s,f=s?i-o:o-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>at||Math.abs(this._y1-c)>at)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%cr+cr),f>Zc?this._append`A${r},${r},0,1,${h},${e-a},${n-l}A${r},${r},0,1,${h},${this._x1=u},${this._y1=c}`:f>at&&this._append`A${r},${r},0,${+(f>=ur)},${h},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Vo(){return new Fo}Vo.prototype=Fo.prototype;function Vt(t,e,n){this.k=t,this.x=e,this.y=n}Vt.prototype={constructor:Vt,scale:function(t){return t===1?this:new Vt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Vt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Vt.prototype;class hr{constructor(e){P(this,"context",Vo()),P(this,"x0",NaN),P(this,"x1",NaN),P(this,"y0",NaN),P(this,"y1",NaN),P(this,"state",0);for(let n=0;n<e.length;n++){const r=e[n];if(this.point(r.x,r.y),n===e.length-1)switch(this.state){case 3:this.curve(this.x1,this.y1),this.context.lineTo(this.x1,this.y1);break;case 2:this.context.lineTo(this.x1,this.y1);break}}}point(e,n){switch(e=+e,n=+n,this.state){case 0:this.state=1,this.context.moveTo(e,n);break;case 1:this.state=2;break;case 2:this.state=3,this.context.lineTo((5*this.x0+this.x1)/6,(5*this.y0+this.y1)/6),this.curve(e,n);break;default:this.curve(e,n);break}this.x0=this.x1,this.x1=e,this.y0=this.y1,this.y1=n}curve(e,n){this.context.bezierCurveTo((2*this.x0+this.x1)/3,(2*this.y0+this.y1)/3,(this.x0+2*this.x1)/3,(this.y0+2*this.y1)/3,(this.x0+4*this.x1+e)/6,(this.y0+4*this.y1+n)/6)}build(){return this.context.toString()}}class re{constructor(e,n,r,i){this.xMin=e,this.yMin=n,this.xMax=r,this.yMax=i,this.xMin=e,this.xMax=r,this.yMin=n,this.yMax=i}static infinity(){return new re(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE)}isEmpty(){return this.xMin===Number.MAX_VALUE||this.yMin===Number.MAX_VALUE||this.xMax===Number.MIN_VALUE||this.yMax===Number.MIN_VALUE}static fromCenterAndDimension(e,n,r){return new re(e.x-n/2,e.y-r/2,e.x+n/2,e.y+r/2)}static fromPoints(...e){return e.reduce((n,r)=>(n.xMin=Math.min(n.xMin,r.x),n.yMin=Math.min(n.yMin,r.y),n.xMax=Math.max(n.xMax,r.x),n.yMax=Math.max(n.yMax,r.y),n),re.infinity())}static fromUnion(...e){return e.reduce((n,r)=>n.union(r),re.infinity())}get width(){return this.xMax-this.xMin}get height(){return this.yMax-this.yMin}get center(){return{x:this.xMin+this.width/2,y:this.yMin+this.height/2}}padded(e){const{l:n,r,b:i,t:o}=typeof e=="object"?e:{l:e,r:e,t:e,b:e};return new re(this.xMin-n,this.yMin-o,this.xMax+r,this.yMax+i)}union(e){return new re(Math.min(this.xMin,e.xMin),Math.min(this.yMin,e.yMin),Math.max(this.xMax,e.xMax),Math.max(this.yMax,e.yMax))}transformed(e){const n=e.apply(this.xMin,this.yMin),r=e.apply(this.xMax,this.yMax);return new re(n.x,n.y,r.x,r.y)}contains(e,n){return this.xMin<=e&&this.yMin<=n&&e<=this.xMax&&n<=this.yMax}encloses(e){return this.contains(e.xMin,e.yMin)&&this.contains(e.xMax,e.yMax)}intersects(e){return this.xMin<=e.xMin&&e.xMin<=this.xMax||this.xMin<=e.xMax&&e.xMax<=this.xMax||this.yMin<=e.yMin&&e.yMin<=this.yMax||this.yMin<=e.yMax&&e.yMax<=this.yMax}}function*Jc(t,e){let n=!0;for(const r of t)n||(yield e),n=!1,yield r}function mn(t,e,n){return Math.min(Math.max(n,t),e)}class it{constructor(e){P(this,"options"),this.options=e}with(e){return this.options={...this.options,...e},this}}function Y(){}const eh=t=>t;function Ze(t,e){for(const n in e)t[n]=e[n];return t}function Wo(t){return t()}function fi(){return Object.create(null)}function We(t){t.forEach(Wo)}function jo(t){return typeof t=="function"}function we(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function th(t){return Object.keys(t).length===0}function fr(t,...e){if(t==null){for(const r of e)r(void 0);return Y}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function zo(t,e,n){t.$$.on_destroy.push(fr(e,n))}function Go(t,e,n,r){if(t){const i=Ho(t,e,n,r);return t[0](i)}}function Ho(t,e,n,r){return t[1]&&r?Ze(n.ctx.slice(),t[1](r(e))):n.ctx}function qo(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],s=Math.max(e.dirty.length,i.length);for(let a=0;a<s;a+=1)o[a]=e.dirty[a]|i[a];return o}return e.dirty|i}return e.dirty}function Yo(t,e,n,r,i,o){if(i){const s=Ho(e,n,r,o);t.p(s,i)}}function Xo(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function Wn(t,e,n){return t.set(n),e}const Uo=typeof window<"u";let nh=Uo?()=>window.performance.now():()=>Date.now(),Ko=Uo?t=>requestAnimationFrame(t):Y;const Mt=new Set;function Zo(t){Mt.forEach(e=>{e.c(t)||(Mt.delete(e),e.f())}),Mt.size!==0&&Ko(Zo)}function rh(t){let e;return Mt.size===0&&Ko(Zo),{promise:new Promise(n=>{Mt.add(e={c:t,f:n})}),abort(){Mt.delete(e)}}}function G(t,e){t.appendChild(e)}function V(t,e,n){t.insertBefore(e,n||null)}function B(t){t.parentNode&&t.parentNode.removeChild(t)}function Qo(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function fe(t){return document.createElement(t)}function X(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function je(t){return document.createTextNode(t)}function Ue(){return je(" ")}function Ie(){return je("")}function ie(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ih(t){return Array.from(t.childNodes)}function nn(t,e){e=""+e,t.data!==e&&(t.data=e)}function oh(t,e,n,r){t.style.setProperty(e,n,"")}function sh(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function St(t,e){return new t(e)}let Zt;function Gt(t){Zt=t}function Ln(){if(!Zt)throw new Error("Function called outside component initialization");return Zt}function Jo(t){Ln().$$.on_mount.push(t)}function Ot(){const t=Ln();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=sh(e,n,{cancelable:r});return i.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}function ah(t,e){return Ln().$$.context.set(t,e),e}function es(t){return Ln().$$.context.get(t)}function Ee(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const bt=[],rt=[];let Nt=[];const dr=[],ts=Promise.resolve();let pr=!1;function ns(){pr||(pr=!0,ts.then(rs))}function un(){return ns(),ts}function gr(t){Nt.push(t)}function lh(t){dr.push(t)}const jn=new Set;let wt=0;function rs(){if(wt!==0)return;const t=Zt;do{try{for(;wt<bt.length;){const e=bt[wt];wt++,Gt(e),uh(e.$$)}}catch(e){throw bt.length=0,wt=0,e}for(Gt(null),bt.length=0,wt=0;rt.length;)rt.pop()();for(let e=0;e<Nt.length;e+=1){const n=Nt[e];jn.has(n)||(jn.add(n),n())}Nt.length=0}while(bt.length);for(;dr.length;)dr.pop()();pr=!1,jn.clear(),Gt(t)}function uh(t){if(t.fragment!==null){t.update(),We(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(gr)}}function ch(t){const e=[],n=[];Nt.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),Nt=e}const wn=new Set;let ut;function Me(){ut={r:0,c:[],p:ut}}function Ne(){ut.r||We(ut.c),ut=ut.p}function L(t,e){t&&t.i&&(wn.delete(t),t.i(e))}function j(t,e,n,r){if(t&&t.o){if(wn.has(t))return;wn.add(t),ut.c.push(()=>{wn.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Se(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function _n(t,e){j(t,1,1,()=>{e.delete(t.key)})}function yn(t,e,n,r,i,o,s,a,l,u,c,h){let f=t.length,d=o.length,g=f;const _={};for(;g--;)_[t[g].key]=g;const E=[],$=new Map,k=new Map,y=[];for(g=d;g--;){const v=h(i,o,g),O=n(v);let D=s.get(O);D?y.push(()=>D.p(v,e)):(D=u(O,v),D.c()),$.set(O,E[g]=D),O in _&&k.set(O,Math.abs(g-_[O]))}const m=new Set,b=new Set;function M(v){L(v,1),v.m(a,c),s.set(v.key,v),c=v.first,d--}for(;f&&d;){const v=E[d-1],O=t[f-1],D=v.key,z=O.key;v===O?(c=v.first,f--,d--):$.has(z)?!s.has(D)||m.has(D)?M(v):b.has(z)?f--:k.get(D)>k.get(z)?(b.add(D),M(v)):(m.add(z),f--):(l(O,s),f--)}for(;f--;){const v=t[f];$.has(v.key)||l(v,s)}for(;d;)M(E[d-1]);return We(y),E}function It(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const s=t[o],a=e[o];if(a){for(const l in s)l in a||(r[l]=1);for(const l in a)i[l]||(n[l]=a[l],i[l]=1);t[o]=a}else for(const l in s)i[l]=1}for(const s in r)s in n||(n[s]=void 0);return n}function hh(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function le(t){t&&t.c()}function oe(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),gr(()=>{const o=t.$$.on_mount.map(Wo).filter(jo);t.$$.on_destroy?t.$$.on_destroy.push(...o):We(o),t.$$.on_mount=[]}),i.forEach(gr)}function se(t,e){const n=t.$$;n.fragment!==null&&(ch(n.after_update),We(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function fh(t,e){t.$$.dirty[0]===-1&&(bt.push(t),ns(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function be(t,e,n,r,i,o,s=null,a=[-1]){const l=Zt;Gt(t);const u=t.$$={fragment:null,ctx:[],props:o,update:Y,not_equal:i,bound:fi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:fi(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};s&&s(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(h,f,...d)=>{const g=d.length?d[0]:f;return u.ctx&&i(u.ctx[h],u.ctx[h]=g)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](g),c&&fh(t,h)),f}):[],u.update(),c=!0,We(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const h=ih(e.target);u.fragment&&u.fragment.l(h),h.forEach(B)}else u.fragment&&u.fragment.c();e.intro&&L(t.$$.fragment),oe(t,e.target,e.anchor),rs()}Gt(l)}class ve{constructor(){P(this,"$$"),P(this,"$$set")}$destroy(){se(this,1),this.$destroy=Y}$on(e,n){if(!jo(n))return Y;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!th(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const dh="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(dh);var di={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function pi(t,e,n){const r=t.slice();return r[3]=e[n],r}function ph(t){let e,n,r,i,o;return{c(){e=X("rect"),p(e,"x",n=t[3].boundingBox().transformed(t[3].transform).xMin),p(e,"y",r=t[3].boundingBox().transformed(t[3].transform).yMin),p(e,"width",i=t[3].boundingBox().transformed(t[3].transform).width),p(e,"height",o=t[3].boundingBox().transformed(t[3].transform).height),p(e,"fill","magenta"),p(e,"opacity","0.1")},m(s,a){V(s,e,a)},p(s,a){a&1&&n!==(n=s[3].boundingBox().transformed(s[3].transform).xMin)&&p(e,"x",n),a&1&&r!==(r=s[3].boundingBox().transformed(s[3].transform).yMin)&&p(e,"y",r),a&1&&i!==(i=s[3].boundingBox().transformed(s[3].transform).width)&&p(e,"width",i),a&1&&o!==(o=s[3].boundingBox().transformed(s[3].transform).height)&&p(e,"height",o)},d(s){s&&B(e)}}}function gi(t){let e,n,r,i,o=di.VITE_WIREFRAME_CONTAINER&&ph(t);const s=[{self:t[3]}];var a=t[3].drawable();function l(u,c){let h={};for(let f=0;f<s.length;f+=1)h=Ze(h,s[f]);return c!==void 0&&c&1&&(h=Ze(h,It(s,[{self:u[3]}]))),{props:h}}return a&&(n=St(a,l(t))),{c(){o&&o.c(),e=Ie(),n&&le(n.$$.fragment),r=Ie()},m(u,c){o&&o.m(u,c),V(u,e,c),n&&oe(n,u,c),V(u,r,c),i=!0},p(u,c){if(di.VITE_WIREFRAME_CONTAINER&&o.p(u,c),c&1&&a!==(a=u[3].drawable())){if(n){Me();const h=n;j(h.$$.fragment,1,0,()=>{se(h,1)}),Ne()}a?(n=St(a,l(u,c)),le(n.$$.fragment),L(n.$$.fragment,1),oe(n,r.parentNode,r)):n=null}else if(a){const h=c&1?It(s,[{self:u[3]}]):{};n.$set(h)}},i(u){i||(n&&L(n.$$.fragment,u),i=!0)},o(u){n&&j(n.$$.fragment,u),i=!1},d(u){u&&(B(e),B(r)),o&&o.d(u),n&&se(n,u)}}}function gh(t){let e,n,r;const i=t[2].default,o=Go(i,t,t[1],null);let s=Se(t[0].children),a=[];for(let u=0;u<s.length;u+=1)a[u]=gi(pi(t,s,u));const l=u=>j(a[u],1,1,()=>{a[u]=null});return{c(){e=X("g"),o&&o.c();for(let u=0;u<a.length;u+=1)a[u].c();p(e,"transform",n=t[0].transform.toString())},m(u,c){V(u,e,c),o&&o.m(e,null);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(e,null);r=!0},p(u,[c]){if(o&&o.p&&(!r||c&2)&&Yo(o,i,u,u[1],r?qo(i,u[1],c,null):Xo(u[1]),null),c&1){s=Se(u[0].children);let h;for(h=0;h<s.length;h+=1){const f=pi(u,s,h);a[h]?(a[h].p(f,c),L(a[h],1)):(a[h]=gi(f),a[h].c(),L(a[h],1),a[h].m(e,null))}for(Me(),h=s.length;h<a.length;h+=1)l(h);Ne()}(!r||c&1&&n!==(n=u[0].transform.toString()))&&p(e,"transform",n)},i(u){if(!r){L(o,u);for(let c=0;c<s.length;c+=1)L(a[c]);r=!0}},o(u){j(o,u),a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)j(a[c]);r=!1},d(u){u&&B(e),o&&o.d(u),Qo(a,u)}}}function mh(t,e,n){let{$$slots:r={},$$scope:i}=e,{self:o}=e;return t.$$set=s=>{"self"in s&&n(0,o=s.self),"$$scope"in s&&n(1,i=s.$$scope)},[o,i,r]}let Ir=class extends ve{constructor(e){super(),be(this,e,mh,gh,we,{self:0})}};class wh{constructor(){P(this,"onClick")}}class Pt extends wh{constructor(){super(),P(this,"transform"),this.transform=er.identity()}moveTo(e,n){this.transform.x=e,this.transform.y=n}}class rn extends Pt{constructor(...e){super(),P(this,"children"),this.children=e}boundingBox(){return re.fromUnion(...this.children.map(e=>e.boundingBox().transformed(e.transform)))}drawable(){return Ir}}class is extends it{constructor(...e){super({spacing:0,spread:!1,minWidth:Number.MIN_VALUE,maxWidth:Number.MAX_VALUE}),P(this,"children"),this.children=e}build(e={}){const n=this.children.map(o=>o.build(e));let r=0;if(this.options.spread&&e.targetWidth!==void 0){const o=n.length-1,s=n.reduce((l,u)=>l+u.boundingBox().width,this.options.spacing*o),a=e.targetWidth-s;r=Math.max(a/(this.children.length-1),0)}const i={x:0,y:0};for(const o of n)o.moveTo(i.x,i.y),i.x+=o.boundingBox().width+this.options.spacing+r;return new Or(this.options,...n)}}class os extends it{constructor(...e){super({spacing:0,spread:!1,minWidth:Number.MIN_VALUE,maxWidth:Number.MAX_VALUE}),P(this,"children"),this.children=e}padded(e){return new Lt(this,e)}build(e={}){const n=Math.max(this.options.minWidth,this.children.reduce((o,s)=>Math.max(o,s.build(e).boundingBox().width),-1/0)),r=this.children.map(o=>o.build({...e,targetWidth:n})),i={x:0,y:0};for(const o of r)o.moveTo(i.x,i.y),i.y+=o.boundingBox().height+this.options.spacing;return new Or(this.options,...r)}}class Or extends rn{constructor(e,...n){super(...n),this.options=e,this.options=e}boundingBox(){const e=super.boundingBox();return e.xMax=mn(this.options.minWidth,this.options.maxWidth,e.xMax),e}}class _h{constructor(...e){P(this,"children"),this.children=e}build(e={}){const n=this.children.map(o=>o.build(e)),{width:r,height:i}=re.fromUnion(...n.map(o=>o.boundingBox()));for(const o of n){const{width:s,height:a}=o.boundingBox();o.moveTo(r/2-s/2,i/2-a/2)}return new rn(...n)}}const ss={l:8,r:8,t:10,b:10};function as(t,e,n,r){switch(n){case"topRight":return{x:t.xMax+r,y:t.yMin};case"bottomMiddle":return{x:t.center.x-e.width/2,y:t.yMax+r}}}let yh=class extends it{constructor(e){super({anchor:"topRight"}),P(this,"content"),this.content=e}build(e={}){return new ls(new us(new Lt(this.content,ss)).with({radius:6,borderColor:"none",backgroundColor:Pe.background.darkGray}).build({defaultOptions:{text:{foregroundColor:"white"}}}),this.options)}};class ls extends Pt{constructor(e,n){super(),this.content=e,this.options=n}boundingBox(){return this.content.boundingBox().padded(ss)}drawable(){throw Error("not implemented")}}class us extends it{constructor(e){super({backgroundColor:Pe.white,borderColor:Pe.foreground.grayTertiary,borderWidth:1,borderDash:void 0,radius:void 0}),this.inner=e}content(){return this.inner}build(e={}){const n=this.inner.build(e),r=n.boundingBox();return new cs(n,new Rr(r.width,r.height).with(this.options).build(e))}}class cs extends rn{constructor(e,n){super(n,e)}boundingBox(){return super.boundingBox()}}function bh(t){let e,n;return{c(){e=X("path"),p(e,"stroke",Pe.foreground.grayTertiary),p(e,"stroke-width","1"),p(e,"fill","none"),p(e,"pointer-events","none"),p(e,"marker-end","url(#arrowhead)"),p(e,"d",n=new hr(t[0]).build())},m(r,i){V(r,e,i)},p(r,[i]){i&1&&n!==(n=new hr(r[0]).build())&&p(e,"d",n)},i:Y,o:Y,d(r){r&&B(e)}}}function vh(t,e,n){let r,{self:i}=e;return t.$$set=o=>{"self"in o&&n(1,i=o.self)},t.$$.update=()=>{t.$$.dirty&2&&n(0,r=i.points.map(o=>i.transform.apply(o.x,o.y)))},[r,i]}let kh=class extends ve{constructor(e){super(),be(this,e,vh,bh,we,{self:1})}};class Eh{constructor(e){this.points=e,this.points=e}build(){return new Pr(this.points)}}class Pr extends Pt{constructor(e){super(),P(this,"points"),this.points=e}path(){const e=this.points.map(n=>this.transform.apply(n.x,n.y));return new hr(e).build()}boundingBox(){return re.fromPoints(...this.points)}drawable(){return kh}}class hs extends rn{}var mi={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function xh(t){let e,n,r,i,o;return{c(){e=X("rect"),p(e,"x",n=t[0].boundingBox().transformed(t[0].transform).xMin),p(e,"y",r=t[0].boundingBox().transformed(t[0].transform).yMin),p(e,"width",i=t[0].boundingBox().transformed(t[0].transform).width),p(e,"height",o=t[0].boundingBox().transformed(t[0].transform).height),p(e,"fill","magenta"),p(e,"opacity","0.3")},m(s,a){V(s,e,a)},p(s,a){a&1&&n!==(n=s[0].boundingBox().transformed(s[0].transform).xMin)&&p(e,"x",n),a&1&&r!==(r=s[0].boundingBox().transformed(s[0].transform).yMin)&&p(e,"y",r),a&1&&i!==(i=s[0].boundingBox().transformed(s[0].transform).width)&&p(e,"width",i),a&1&&o!==(o=s[0].boundingBox().transformed(s[0].transform).height)&&p(e,"height",o)},d(s){s&&B(e)}}}function Mh(t){let e,n,r=t[0].text+"",i,o,s,a=mi.VITE_WIREFRAME_TEXT&&xh(t);return{c(){a&&a.c(),e=Ue(),n=X("text"),i=je(r),p(n,"x",o=t[0].transform.x),p(n,"y",s=t[0].transform.y),p(n,"dominant-baseline","hanging"),p(n,"font-family",t[2]),p(n,"font-size",t[1]),p(n,"fill",t[3]),p(n,"font-weight",t[4])},m(l,u){a&&a.m(l,u),V(l,e,u),V(l,n,u),G(n,i)},p(l,[u]){mi.VITE_WIREFRAME_TEXT&&a.p(l,u),u&1&&r!==(r=l[0].text+"")&&nn(i,r),u&1&&o!==(o=l[0].transform.x)&&p(n,"x",o),u&1&&s!==(s=l[0].transform.y)&&p(n,"y",s)},i:Y,o:Y,d(l){l&&(B(e),B(n)),a&&a.d(l)}}}function Nh(t,e,n){let{self:r}=e;const{fontSize:i,font:o,foregroundColor:s,fontWeight:a}=r.options;return t.$$set=l=>{"self"in l&&n(0,r=l.self)},[r,i,o,s,a]}let Ch=class extends ve{constructor(e){super(),be(this,e,Nh,Mh,we,{self:0})}};class Th{constructor(){P(this,"canvas"),P(this,"ctx"),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}measureTextWidth(e,n){return this.ctx.font=`${n.fontSize}px ${n.font}`,this.ctx.textBaseline="top",this.ctx.measureText(e).width}}class fs extends it{constructor(e){super({font:Jt.family,fontSize:16,fontWeight:200}),P(this,"text"),this.text=e}padded(e){return new Lt(this,e)}build(e){var n;return new ds(this.text,{...(n=e==null?void 0:e.defaultOptions)==null?void 0:n.text,...this.options})}}class ds extends Pt{constructor(e,n){super(),P(this,"text"),P(this,"options"),P(this,"width"),P(this,"height"),this.text=e,this.options=n,this.width=new Th().measureTextWidth(this.text,this.options),this.height=n.fontSize}boundingBox(){return new re(0,0,this.width,this.height)}drawable(){return Ch}}const Lr=Symbol();function $h(t){let e,n,r;return{c(){e=X("rect"),p(e,"x",n=t[0].transform.x),p(e,"y",r=t[0].transform.y),p(e,"width",t[6]),p(e,"height",t[7]),p(e,"rx",t[1]),p(e,"fill",t[4]),p(e,"stroke",t[5]),p(e,"stroke-width",t[3]),p(e,"stroke-dasharray",t[2])},m(i,o){V(i,e,o)},p(i,[o]){o&1&&n!==(n=i[0].transform.x)&&p(e,"x",n),o&1&&r!==(r=i[0].transform.y)&&p(e,"y",r),o&2&&p(e,"rx",i[1]),o&16&&p(e,"fill",i[4]),o&32&&p(e,"stroke",i[5]),o&8&&p(e,"stroke-width",i[3]),o&4&&p(e,"stroke-dasharray",i[2])},i:Y,o:Y,d(i){i&&B(e)}}}function Sh(t,e,n){let r,i,o,s,a,{self:l}=e;const u=l.boundingBox().width,c=l.boundingBox().height;return t.$$set=h=>{"self"in h&&n(0,l=h.self)},t.$$.update=()=>{t.$$.dirty&1&&n(5,{borderColor:r,backgroundColor:i,borderWidth:o,borderDash:s,radius:a}=l.options,r,(n(4,i),n(0,l)),(n(3,o),n(0,l)),(n(2,s),n(0,l)),(n(1,a),n(0,l)))},[l,a,s,o,i,r,u,c]}let ps=class extends ve{constructor(e){super(),be(this,e,Sh,$h,we,{self:0})}};function wi(t){let e,n,r,i,o=t[2].text&&_i(t);return{c(){e=X("g"),n=X("circle"),o&&o.c(),p(n,"r","10"),p(n,"fill",r=t[2].color),p(n,"stroke","white"),p(n,"stroke-width","2"),p(e,"class","badge"),p(e,"transform",i=`translate(${t[3].width+t[5].x},${-t[5].y})`)},m(s,a){V(s,e,a),G(e,n),o&&o.m(e,null)},p(s,a){a&4&&r!==(r=s[2].color)&&p(n,"fill",r),s[2].text?o?o.p(s,a):(o=_i(s),o.c(),o.m(e,null)):o&&(o.d(1),o=null),a&8&&i!==(i=`translate(${s[3].width+s[5].x},${-s[5].y})`)&&p(e,"transform",i)},d(s){s&&B(e),o&&o.d()}}}function _i(t){let e,n=t[2].text+"",r;return{c(){e=X("text"),r=je(n),p(e,"y",1),p(e,"font-family",Jt.family),p(e,"font-size","10"),p(e,"text-anchor","middle"),p(e,"dominant-baseline","middle"),p(e,"fill","white")},m(i,o){V(i,e,o),G(e,r)},p(i,o){o&4&&n!==(n=i[2].text+"")&&nn(r,n)},d(i){i&&B(e)}}}function Ih(t){let e,n,r,i,o,s,a,l;n=new ps({props:{self:t[1]}});const u=[{self:t[0].content}];var c=t[0].content.drawable();function h(d,g){let _={};for(let E=0;E<u.length;E+=1)_=Ze(_,u[E]);return g!==void 0&&g&1&&(_=Ze(_,It(u,[{self:d[0].content}]))),{props:_}}c&&(r=St(c,h(t)));let f=t[2]&&wi(t);return{c(){e=X("g"),le(n.$$.fragment),r&&le(r.$$.fragment),i=je(` -->
  `),f&&f.c(),p(e,"transform",o=`translate(${t[3].xMin},${t[3].yMin})`),p(e,"cursor","pointer")},m(d,g){V(d,e,g),oe(n,e,null),r&&oe(r,e,null),G(e,i),f&&f.m(e,null),s=!0,a||(l=[ie(e,"click",t[13]),ie(e,"dblclick",t[14]),ie(e,"mouseenter",t[6]),ie(e,"mouseleave",t[7])],a=!0)},p(d,[g]){const _={};if(g&2&&(_.self=d[1]),n.$set(_),g&1&&c!==(c=d[0].content.drawable())){if(r){Me();const E=r;j(E.$$.fragment,1,0,()=>{se(E,1)}),Ne()}c?(r=St(c,h(d,g)),le(r.$$.fragment),L(r.$$.fragment,1),oe(r,e,i)):r=null}else if(c){const E=g&1?It(u,[{self:d[0].content}]):{};r.$set(E)}d[2]?f?f.p(d,g):(f=wi(d),f.c(),f.m(e,null)):f&&(f.d(1),f=null),(!s||g&8&&o!==(o=`translate(${d[3].xMin},${d[3].yMin})`))&&p(e,"transform",o)},i(d){s||(L(n.$$.fragment,d),r&&L(r.$$.fragment,d),s=!0)},o(d){j(n.$$.fragment,d),r&&j(r.$$.fragment,d),s=!1},d(d){d&&B(e),se(n),r&&se(r),f&&f.d(),a=!1,We(l)}}}function Oh(t,e,n){let r,i,o,s,a,l;const u=Ot();let{self:c}=e,{decoration:h}=e;const{selections:f}=es(Lr);zo(t,f,y=>n(12,l=y));const d={x:1,y:1};let g=!1;function _(y){n(9,g=!0),u("nodeEnter",{...y,nodeId:r})}function E(y){n(9,g=!1),u("nodeLeave",{...y,nodeId:r})}function $(y){Ee.call(this,t,y)}function k(y){Ee.call(this,t,y)}return t.$$set=y=>{"self"in y&&n(0,c=y.self),"decoration"in y&&n(8,h=y.decoration)},t.$$.update=()=>{t.$$.dirty&1&&n(11,r=c.nodeId),t.$$.dirty&6144&&n(10,i=l.has(r)),t.$$.dirty&1&&n(3,o=c.boundingBox()),t.$$.dirty&1&&n(2,s=c.options.badge),t.$$.dirty&1793&&n(1,a=new Rr(c.content.boundingBox().width,c.content.boundingBox().height).with({borderColor:Pe.foreground.grayTertiary,borderWidth:1,radius:6,borderDash:c.options.borderDash,backgroundColor:c.options.backgroundColor}).with({...h}).with(g?{borderColor:Pe.foreground.blue}:{}).with(i?{borderColor:Pe.foreground.blue,borderWidth:3}:{}).build())},[c,a,s,o,f,d,_,E,h,g,i,r,l,$,k]}let Ar=class extends ve{constructor(e){super(),be(this,e,Oh,Ih,we,{self:0,decoration:8})}};function Ph(t){return new is(new fs(t)).with({minWidth:30})}class Lh extends it{constructor(e,...n){super({selectable:!1,borderDash:void 0,badge:void 0,tooltip:void 0,backgroundColor:Pe.white,borderColor:Pe.foreground.grayTertiary,humanReadable:void 0,padding:{l:8,r:8,t:10,b:10}}),P(this,"contents"),this.nodeId=e,this.contents=n.length>0?n:[Ph(this.options.humanReadable||this.nodeId)]}humanReadable(){return this.options.humanReadable}build(e={}){const n=[...Jc(this.contents.map(r=>new Lt(r,this.options.padding)),new ws().with({color:this.options.borderColor,dash:this.options.borderDash}))];return new gs(this.nodeId,new os(...n).build(e),this.options)}}class gs extends Pt{constructor(e,n,r){super(),this.nodeId=e,this.content=n,this.options=r}boundingBox(){return this.content.boundingBox().transformed(this.transform)}drawable(){return Ar}}class Rr extends it{constructor(e,n){super({backgroundColor:Pe.black,borderColor:"none",borderWidth:0,borderDash:void 0,radius:void 0}),P(this,"width"),P(this,"height"),this.width=e,this.height=n}padded(e){return new Lt(this,e)}build(e={}){return new Br(this.width,this.height,this.options)}}class Br extends Pt{constructor(e,n,r){super(),this.width=e,this.height=n,this.options=r}boundingBox(){return new re(0,0,this.width,this.height)}drawable(){return ps}}function Ah(t){return t.l!==void 0}class Lt{constructor(e,n){P(this,"p"),this.inner=e,this.inner=e,this.p=Ah(n)?n:{l:n,r:n,t:n,b:n}}content(){return this.inner}padding(){return this.p}build(e={}){const{l:n,t:r,r:i}=this.p,o=e.targetWidth?this.inner.build({...e,targetWidth:e.targetWidth-n-i}):this.inner.build({...e});return o.moveTo(n,r),new ms(o,this.p)}}class ms extends rn{constructor(e,n){super(e),P(this,"padding"),this.padding=n}boundingBox(){return super.boundingBox().padded(this.padding)}drawable(){return Ir}}const Rh=1,Bh=100;class ws extends it{constructor(e){super({color:Pe.foreground.grayTertiary,dash:void 0}),P(this,"width"),this.width=e}build(e={}){const n=this.width||e.targetWidth||Bh;return new Br(n,Rh,{backgroundColor:this.options.color,borderColor:"none",borderWidth:0,radius:void 0,borderDash:this.options.dash})}}const zn=Object.freeze(Object.defineProperty({__proto__:null,Edge:Eh,EdgeDisplayObject:Pr,EdgesDisplayObject:hs,Frame:us,FrameDisplayObject:cs,HStack:is,Node:Lh,NodeDisplayObject:gs,Padded:Lt,PaddedDisplayObject:ms,Rect:Rr,RectDisplayObject:Br,Separator:ws,StackContainer:Or,Text:fs,TextDisplayObject:ds,Theme:Na,Tooltip:yh,TooltipDisplayObject:ls,VStack:os,ZStack:_h,positionTooltip:as},Symbol.toStringTag,{value:"Module"}));function Dh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fh="\0",st="\0",yi="";let Vh=class{constructor(e){P(this,"_isDirected",!0),P(this,"_isMultigraph",!1),P(this,"_isCompound",!1),P(this,"_label"),P(this,"_defaultNodeLabelFn",()=>{}),P(this,"_defaultEdgeLabelFn",()=>{}),P(this,"_nodes",{}),P(this,"_in",{}),P(this,"_preds",{}),P(this,"_out",{}),P(this,"_sucs",{}),P(this,"_edgeObjs",{}),P(this,"_edgeLabels",{}),P(this,"_nodeCount",0),P(this,"_edgeCount",0),P(this,"_parent"),P(this,"_children"),e&&(this._isDirected=e.hasOwnProperty("directed")?e.directed:!0,this._isMultigraph=e.hasOwnProperty("multigraph")?e.multigraph:!1,this._isCompound=e.hasOwnProperty("compound")?e.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[st]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return this._defaultNodeLabelFn=e,typeof e!="function"&&(this._defaultNodeLabelFn=()=>e),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var e=this;return this.nodes().filter(n=>Object.keys(e._in[n]).length===0)}sinks(){var e=this;return this.nodes().filter(n=>Object.keys(e._out[n]).length===0)}setNodes(e,n){var r=arguments,i=this;return e.forEach(function(o){r.length>1?i.setNode(o,n):i.setNode(o)}),this}setNode(e,n){return this._nodes.hasOwnProperty(e)?(arguments.length>1&&(this._nodes[e]=n),this):(this._nodes[e]=arguments.length>1?n:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=st,this._children[e]={},this._children[st][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return this._nodes.hasOwnProperty(e)}removeNode(e){var n=this;if(this._nodes.hasOwnProperty(e)){var r=i=>n.removeEdge(n._edgeObjs[i]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach(function(i){n.setParent(i)}),delete this._children[e]),Object.keys(this._in[e]).forEach(r),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(r),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=st;else{n+="";for(var r=n;r!==void 0;r=this.parent(r))if(r===e)throw new Error("Setting "+n+" as parent of "+e+" would create a cycle");this.setNode(n)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=n,this._children[n][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var n=this._parent[e];if(n!==st)return n}}children(e=st){if(this._isCompound){var n=this._children[e];if(n)return Object.keys(n)}else{if(e===st)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var n=this._preds[e];if(n)return Object.keys(n)}successors(e){var n=this._sucs[e];if(n)return Object.keys(n)}neighbors(e){var n=this.predecessors(e);if(n){const i=new Set(n);for(var r of this.successors(e))i.add(r);return Array.from(i.values())}}isLeaf(e){var n;return this.isDirected()?n=this.successors(e):n=this.neighbors(e),n.length===0}filterNodes(e){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var r=this;Object.entries(this._nodes).forEach(function([s,a]){e(s)&&n.setNode(s,a)}),Object.values(this._edgeObjs).forEach(function(s){n.hasNode(s.v)&&n.hasNode(s.w)&&n.setEdge(s,r.edge(s))});var i={};function o(s){var a=r.parent(s);return a===void 0||n.hasNode(a)?(i[s]=a,a):a in i?i[a]:o(a)}return this._isCompound&&n.nodes().forEach(s=>n.setParent(s,o(s))),n}setDefaultEdgeLabel(e){return this._defaultEdgeLabelFn=e,typeof e!="function"&&(this._defaultEdgeLabelFn=()=>e),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(e,n){var r=this,i=arguments;return e.reduce(function(o,s){return i.length>1?r.setEdge(o,s,n):r.setEdge(o,s),s}),this}setEdge(){var e,n,r,i,o=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(e=s.v,n=s.w,r=s.name,arguments.length===2&&(i=arguments[1],o=!0)):(e=s,n=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),e=""+e,n=""+n,r!==void 0&&(r=""+r);var a=Wt(this._isDirected,e,n,r);if(this._edgeLabels.hasOwnProperty(a))return o&&(this._edgeLabels[a]=i),this;if(r!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(n),this._edgeLabels[a]=o?i:this._defaultEdgeLabelFn(e,n,r);var l=Wh(this._isDirected,e,n,r);return e=l.v,n=l.w,Object.freeze(l),this._edgeObjs[a]=l,bi(this._preds[n],e),bi(this._sucs[e],n),this._in[n][a]=l,this._out[e][a]=l,this._edgeCount++,this}edge(e,n,r){var i=arguments.length===1?Gn(this._isDirected,arguments[0]):Wt(this._isDirected,e,n,r);return this._edgeLabels[i]}edgeAsObj(){const e=this.edge(...arguments);return typeof e!="object"?{label:e}:e}hasEdge(e,n,r){var i=arguments.length===1?Gn(this._isDirected,arguments[0]):Wt(this._isDirected,e,n,r);return this._edgeLabels.hasOwnProperty(i)}removeEdge(e,n,r){var i=arguments.length===1?Gn(this._isDirected,arguments[0]):Wt(this._isDirected,e,n,r),o=this._edgeObjs[i];return o&&(e=o.v,n=o.w,delete this._edgeLabels[i],delete this._edgeObjs[i],vi(this._preds[n],e),vi(this._sucs[e],n),delete this._in[n][i],delete this._out[e][i],this._edgeCount--),this}inEdges(e,n){var r=this._in[e];if(r){var i=Object.values(r);return n?i.filter(o=>o.v===n):i}}outEdges(e,n){var r=this._out[e];if(r){var i=Object.values(r);return n?i.filter(o=>o.w===n):i}}nodeEdges(e,n){var r=this.inEdges(e,n);if(r)return r.concat(this.outEdges(e,n))}};function bi(t,e){t[e]?t[e]++:t[e]=1}function vi(t,e){--t[e]||delete t[e]}function Wt(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}return i+yi+o+yi+(r===void 0?Fh:r)}function Wh(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}var a={v:i,w:o};return r&&(a.name=r),a}function Gn(t,e){return Wt(t,e.v,e.w,e.name)}var Dr=Vh,jh="2.2.2",zh={Graph:Dr,version:jh},Gh=Dr,Hh={write:qh,read:Uh};function qh(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:Yh(t),edges:Xh(t)};return t.graph()!==void 0&&(e.value=structuredClone(t.graph())),e}function Yh(t){return t.nodes().map(function(e){var n=t.node(e),r=t.parent(e),i={v:e};return n!==void 0&&(i.value=n),r!==void 0&&(i.parent=r),i})}function Xh(t){return t.edges().map(function(e){var n=t.edge(e),r={v:e.v,w:e.w};return e.name!==void 0&&(r.name=e.name),n!==void 0&&(r.value=n),r})}function Uh(t){var e=new Gh(t.options).setGraph(t.value);return t.nodes.forEach(function(n){e.setNode(n.v,n.value),n.parent&&e.setParent(n.v,n.parent)}),t.edges.forEach(function(n){e.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),e}var Kh=Zh;function Zh(t){var e={},n=[],r;function i(o){e.hasOwnProperty(o)||(e[o]=!0,r.push(o),t.successors(o).forEach(i),t.predecessors(o).forEach(i))}return t.nodes().forEach(function(o){r=[],i(o),r.length&&n.push(r)}),n}let Qh=class{constructor(){P(this,"_arr",[]),P(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(e){return e.key})}has(e){return this._keyIndices.hasOwnProperty(e)}priority(e){var n=this._keyIndices[e];if(n!==void 0)return this._arr[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(e,n){var r=this._keyIndices;if(e=String(e),!r.hasOwnProperty(e)){var i=this._arr,o=i.length;return r[e]=o,i.push({key:e,priority:n}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key}decrease(e,n){var r=this._keyIndices[e];if(n>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[r].priority+" New: "+n);this._arr[r].priority=n,this._decrease(r)}_heapify(e){var n=this._arr,r=2*e,i=r+1,o=e;r<n.length&&(o=n[r].priority<n[o].priority?r:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==e&&(this._swap(e,o),this._heapify(o)))}_decrease(e){for(var n=this._arr,r=n[e].priority,i;e!==0&&(i=e>>1,!(n[i].priority<r));)this._swap(e,i),e=i}_swap(e,n){var r=this._arr,i=this._keyIndices,o=r[e],s=r[n];r[e]=s,r[n]=o,i[s.key]=e,i[o.key]=n}};var _s=Qh,Jh=_s,ys=tf,ef=()=>1;function tf(t,e,n,r){return nf(t,String(e),n||ef,r||function(i){return t.outEdges(i)})}function nf(t,e,n,r){var i={},o=new Jh,s,a,l=function(u){var c=u.v!==s?u.v:u.w,h=i[c],f=n(u),d=a.distance+f;if(f<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+u+" Weight: "+f);d<h.distance&&(h.distance=d,h.predecessor=s,o.decrease(c,d))};for(t.nodes().forEach(function(u){var c=u===e?0:Number.POSITIVE_INFINITY;i[u]={distance:c},o.add(u,c)});o.size()>0&&(s=o.removeMin(),a=i[s],a.distance!==Number.POSITIVE_INFINITY);)r(s).forEach(l);return i}var rf=ys,of=sf;function sf(t,e,n){return t.nodes().reduce(function(r,i){return r[i]=rf(t,i,e,n),r},{})}var bs=af;function af(t){var e=0,n=[],r={},i=[];function o(s){var a=r[s]={onStack:!0,lowlink:e,index:e++};if(n.push(s),t.successors(s).forEach(function(c){r.hasOwnProperty(c)?r[c].onStack&&(a.lowlink=Math.min(a.lowlink,r[c].index)):(o(c),a.lowlink=Math.min(a.lowlink,r[c].lowlink))}),a.lowlink===a.index){var l=[],u;do u=n.pop(),r[u].onStack=!1,l.push(u);while(s!==u);i.push(l)}}return t.nodes().forEach(function(s){r.hasOwnProperty(s)||o(s)}),i}var lf=bs,uf=cf;function cf(t){return lf(t).filter(function(e){return e.length>1||e.length===1&&t.hasEdge(e[0],e[0])})}var hf=df,ff=()=>1;function df(t,e,n){return pf(t,e||ff,n||function(r){return t.outEdges(r)})}function pf(t,e,n){var r={},i=t.nodes();return i.forEach(function(o){r[o]={},r[o][o]={distance:0},i.forEach(function(s){o!==s&&(r[o][s]={distance:Number.POSITIVE_INFINITY})}),n(o).forEach(function(s){var a=s.v===o?s.w:s.v,l=e(s);r[o][a]={distance:l,predecessor:o}})}),i.forEach(function(o){var s=r[o];i.forEach(function(a){var l=r[a];i.forEach(function(u){var c=l[o],h=s[u],f=l[u],d=c.distance+h.distance;d<f.distance&&(f.distance=d,f.predecessor=h.predecessor)})})}),r}function vs(t){var e={},n={},r=[];function i(o){if(n.hasOwnProperty(o))throw new mr;e.hasOwnProperty(o)||(n[o]=!0,e[o]=!0,t.predecessors(o).forEach(i),delete n[o],r.push(o))}if(t.sinks().forEach(i),Object.keys(e).length!==t.nodeCount())throw new mr;return r}class mr extends Error{constructor(){super(...arguments)}}var ks=vs;vs.CycleException=mr;var ki=ks,gf=mf;function mf(t){try{ki(t)}catch(e){if(e instanceof ki.CycleException)return!1;throw e}return!0}var Es=wf;function wf(t,e,n){Array.isArray(e)||(e=[e]);var r=t.isDirected()?a=>t.successors(a):a=>t.neighbors(a),i=n==="post"?_f:yf,o=[],s={};return e.forEach(a=>{if(!t.hasNode(a))throw new Error("Graph does not have node: "+a);i(a,r,s,o)}),o}function _f(t,e,n,r){for(var i=[[t,!1]];i.length>0;){var o=i.pop();o[1]?r.push(o[0]):n.hasOwnProperty(o[0])||(n[o[0]]=!0,i.push([o[0],!0]),xs(e(o[0]),s=>i.push([s,!1])))}}function yf(t,e,n,r){for(var i=[t];i.length>0;){var o=i.pop();n.hasOwnProperty(o)||(n[o]=!0,r.push(o),xs(e(o),s=>i.push(s)))}}function xs(t,e){for(var n=t.length;n--;)e(t[n],n,t);return t}var bf=Es,vf=kf;function kf(t,e){return bf(t,e,"post")}var Ef=Es,xf=Mf;function Mf(t,e){return Ef(t,e,"pre")}var Nf=Dr,Cf=_s,Tf=$f;function $f(t,e){var n=new Nf,r={},i=new Cf,o;function s(l){var u=l.v===o?l.w:l.v,c=i.priority(u);if(c!==void 0){var h=e(l);h<c&&(r[u]=o,i.decrease(u,h))}}if(t.nodeCount()===0)return n;t.nodes().forEach(function(l){i.add(l,Number.POSITIVE_INFINITY),n.setNode(l)}),i.decrease(t.nodes()[0],0);for(var a=!1;i.size()>0;){if(o=i.removeMin(),r.hasOwnProperty(o))n.setEdge(o,r[o]);else{if(a)throw new Error("Input graph is not connected: "+t);a=!0}t.nodeEdges(o).forEach(s)}return n}var Sf={components:Kh,dijkstra:ys,dijkstraAll:of,findCycles:uf,floydWarshall:hf,isAcyclic:gf,postorder:vf,preorder:xf,prim:Tf,tarjan:bs,topsort:ks},Ei=zh,Be={Graph:Ei.Graph,json:Hh,alg:Sf,version:Ei.version};let If=class{constructor(){let e={};e._next=e._prev=e,this._sentinel=e}dequeue(){let e=this._sentinel,n=e._prev;if(n!==e)return xi(n),n}enqueue(e){let n=this._sentinel;e._prev&&e._next&&xi(e),e._next=n._next,n._next._prev=e,n._next=e,e._prev=n}toString(){let e=[],n=this._sentinel,r=n._prev;for(;r!==n;)e.push(JSON.stringify(r,Of)),r=r._prev;return"["+e.join(", ")+"]"}};function xi(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function Of(t,e){if(t!=="_next"&&t!=="_prev")return e}var Pf=If;let Lf=Be.Graph,Af=Pf;var Rf=Df;let Bf=()=>1;function Df(t,e){if(t.nodeCount()<=1)return[];let n=Vf(t,e||Bf);return Ff(n.graph,n.buckets,n.zeroIdx).flatMap(i=>t.outEdges(i.v,i.w))}function Ff(t,e,n){let r=[],i=e[e.length-1],o=e[0],s;for(;t.nodeCount();){for(;s=o.dequeue();)Hn(t,e,n,s);for(;s=i.dequeue();)Hn(t,e,n,s);if(t.nodeCount()){for(let a=e.length-2;a>0;--a)if(s=e[a].dequeue(),s){r=r.concat(Hn(t,e,n,s,!0));break}}}return r}function Hn(t,e,n,r,i){let o=i?[]:void 0;return t.inEdges(r.v).forEach(s=>{let a=t.edge(s),l=t.node(s.v);i&&o.push({v:s.v,w:s.w}),l.out-=a,wr(e,n,l)}),t.outEdges(r.v).forEach(s=>{let a=t.edge(s),l=s.w,u=t.node(l);u.in-=a,wr(e,n,u)}),t.removeNode(r.v),o}function Vf(t,e){let n=new Lf,r=0,i=0;t.nodes().forEach(a=>{n.setNode(a,{v:a,in:0,out:0})}),t.edges().forEach(a=>{let l=n.edge(a.v,a.w)||0,u=e(a),c=l+u;n.setEdge(a.v,a.w,c),i=Math.max(i,n.node(a.v).out+=u),r=Math.max(r,n.node(a.w).in+=u)});let o=Wf(i+r+3).map(()=>new Af),s=r+1;return n.nodes().forEach(a=>{wr(o,s,n.node(a))}),{graph:n,buckets:o,zeroIdx:s}}function wr(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}function Wf(t){const e=[];for(let n=0;n<t;n++)e.push(n);return e}let Ms=Be.Graph;var ue={addBorderNode:Kf,addDummyNode:Ns,asNonCompoundGraph:zf,buildLayerMatrix:Yf,intersectRect:qf,mapValues:nd,maxRank:Cs,normalizeRanks:Xf,notime:Jf,partition:Zf,pick:td,predecessorWeights:Hf,range:$s,removeEmptyRanks:Uf,simplify:jf,successorWeights:Gf,time:Qf,uniqueId:Ts,zipObject:Fr};function Ns(t,e,n,r){let i;do i=Ts(r);while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function jf(t){let e=new Ms().setGraph(t.graph());return t.nodes().forEach(n=>e.setNode(n,t.node(n))),t.edges().forEach(n=>{let r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e}function zf(t){let e=new Ms({multigraph:t.isMultigraph()}).setGraph(t.graph());return t.nodes().forEach(n=>{t.children(n).length||e.setNode(n,t.node(n))}),t.edges().forEach(n=>{e.setEdge(n,t.edge(n))}),e}function Gf(t){let e=t.nodes().map(n=>{let r={};return t.outEdges(n).forEach(i=>{r[i.w]=(r[i.w]||0)+t.edge(i).weight}),r});return Fr(t.nodes(),e)}function Hf(t){let e=t.nodes().map(n=>{let r={};return t.inEdges(n).forEach(i=>{r[i.v]=(r[i.v]||0)+t.edge(i).weight}),r});return Fr(t.nodes(),e)}function qf(t,e){let n=t.x,r=t.y,i=e.x-n,o=e.y-r,s=t.width/2,a=t.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");let l,u;return Math.abs(o)*s>Math.abs(i)*a?(o<0&&(a=-a),l=a*i/o,u=a):(i<0&&(s=-s),l=s,u=s*o/i),{x:n+l,y:r+u}}function Yf(t){let e=$s(Cs(t)+1).map(()=>[]);return t.nodes().forEach(n=>{let r=t.node(n),i=r.rank;i!==void 0&&(e[i][r.order]=n)}),e}function Xf(t){let e=Math.min(...t.nodes().map(n=>{let r=t.node(n).rank;return r===void 0?Number.MAX_VALUE:r}));t.nodes().forEach(n=>{let r=t.node(n);r.hasOwnProperty("rank")&&(r.rank-=e)})}function Uf(t){let e=Math.min(...t.nodes().map(o=>t.node(o).rank)),n=[];t.nodes().forEach(o=>{let s=t.node(o).rank-e;n[s]||(n[s]=[]),n[s].push(o)});let r=0,i=t.graph().nodeRankFactor;Array.from(n).forEach((o,s)=>{o===void 0&&s%i!==0?--r:o!==void 0&&r&&o.forEach(a=>t.node(a).rank+=r)})}function Kf(t,e,n,r){let i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),Ns(t,"border",i,e)}function Cs(t){return Math.max(...t.nodes().map(e=>{let n=t.node(e).rank;return n===void 0?Number.MIN_VALUE:n}))}function Zf(t,e){let n={lhs:[],rhs:[]};return t.forEach(r=>{e(r)?n.lhs.push(r):n.rhs.push(r)}),n}function Qf(t,e){let n=Date.now();try{return e()}finally{console.log(t+" time: "+(Date.now()-n)+"ms")}}function Jf(t,e){return e()}let ed=0;function Ts(t){var e=++ed;return toString(t)+e}function $s(t,e,n=1){e==null&&(e=t,t=0);let r=o=>o<e;n<0&&(r=o=>e<o);const i=[];for(let o=t;r(o);o+=n)i.push(o);return i}function td(t,e){const n={};for(const r of e)t[r]!==void 0&&(n[r]=t[r]);return n}function nd(t,e){let n=e;return typeof e=="string"&&(n=r=>r[e]),Object.entries(t).reduce((r,[i,o])=>(r[i]=n(o,i),r),{})}function Fr(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let rd=Rf,id=ue.uniqueId;var od={run:sd,undo:ld};function sd(t){(t.graph().acyclicer==="greedy"?rd(t,n(t)):ad(t)).forEach(r=>{let i=t.edge(r);t.removeEdge(r),i.forwardName=r.name,i.reversed=!0,t.setEdge(r.w,r.v,i,id("rev"))});function n(r){return i=>r.edge(i).weight}}function ad(t){let e=[],n={},r={};function i(o){r.hasOwnProperty(o)||(r[o]=!0,n[o]=!0,t.outEdges(o).forEach(s=>{n.hasOwnProperty(s.w)?e.push(s):i(s.w)}),delete n[o])}return t.nodes().forEach(i),e}function ld(t){t.edges().forEach(e=>{let n=t.edge(e);if(n.reversed){t.removeEdge(e);let r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}let ud=ue;var cd={run:hd,undo:dd};function hd(t){t.graph().dummyChains=[],t.edges().forEach(e=>fd(t,e))}function fd(t,e){let n=e.v,r=t.node(n).rank,i=e.w,o=t.node(i).rank,s=e.name,a=t.edge(e),l=a.labelRank;if(o===r+1)return;t.removeEdge(e);let u,c,h;for(h=0,++r;r<o;++h,++r)a.points=[],c={width:0,height:0,edgeLabel:a,edgeObj:e,rank:r},u=ud.addDummyNode(t,"edge",c,"_d"),r===l&&(c.width=a.width,c.height=a.height,c.dummy="edge-label",c.labelpos=a.labelpos),t.setEdge(n,u,{weight:a.weight},s),h===0&&t.graph().dummyChains.push(u),n=u;t.setEdge(n,i,{weight:a.weight},s)}function dd(t){t.graph().dummyChains.forEach(e=>{let n=t.node(e),r=n.edgeLabel,i;for(t.setEdge(n.edgeObj,r);n.dummy;)i=t.successors(e)[0],t.removeNode(e),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),e=i,n=t.node(e)})}var An={longestPath:pd,slack:gd};function pd(t){var e={};function n(r){var i=t.node(r);if(e.hasOwnProperty(r))return i.rank;e[r]=!0;var o=Math.min(...t.outEdges(r).map(s=>s==null?Number.POSITIVE_INFINITY:n(s.w)-t.edge(s).minlen));return o===Number.POSITIVE_INFINITY&&(o=0),i.rank=o}t.sources().forEach(n)}function gd(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var md=Be.Graph,Tn=An.slack,Ss=wd;function wd(t){var e=new md({directed:!1}),n=t.nodes()[0],r=t.nodeCount();e.setNode(n,{});for(var i,o;_d(e,t)<r;)i=yd(e,t),o=e.hasNode(i.v)?Tn(t,i):-Tn(t,i),bd(e,t,o);return e}function _d(t,e){function n(r){e.nodeEdges(r).forEach(i=>{var o=i.v,s=r===o?i.w:o;!t.hasNode(s)&&!Tn(e,i)&&(t.setNode(s,{}),t.setEdge(r,s,{}),n(s))})}return t.nodes().forEach(n),t.nodeCount()}function yd(t,e){return e.edges().reduce((r,i)=>{let o=Number.POSITIVE_INFINITY;return t.hasNode(i.v)!==t.hasNode(i.w)&&(o=Tn(e,i)),o<r[0]?[o,i]:r},[Number.POSITIVE_INFINITY,null])[1]}function bd(t,e,n){t.nodes().forEach(r=>e.node(r).rank+=n)}var vd=Ss,Mi=An.slack,kd=An.longestPath,Ed=Be.alg.preorder,xd=Be.alg.postorder,Md=ue.simplify,Nd=gt;gt.initLowLimValues=Wr;gt.initCutValues=Vr;gt.calcCutValue=Is;gt.leaveEdge=Ps;gt.enterEdge=Ls;gt.exchangeEdges=As;function gt(t){t=Md(t),kd(t);var e=vd(t);Wr(e),Vr(e,t);for(var n,r;n=Ps(e);)r=Ls(e,t,n),As(e,t,n,r)}function Vr(t,e){var n=xd(t,t.nodes());n=n.slice(0,n.length-1),n.forEach(r=>Cd(t,e,r))}function Cd(t,e,n){var r=t.node(n),i=r.parent;t.edge(n,i).cutvalue=Is(t,e,n)}function Is(t,e,n){var r=t.node(n),i=r.parent,o=!0,s=e.edge(n,i),a=0;return s||(o=!1,s=e.edge(i,n)),a=s.weight,e.nodeEdges(n).forEach(l=>{var u=l.v===n,c=u?l.w:l.v;if(c!==i){var h=u===o,f=e.edge(l).weight;if(a+=h?f:-f,$d(t,n,c)){var d=t.edge(n,c).cutvalue;a+=h?-d:d}}}),a}function Wr(t,e){arguments.length<2&&(e=t.nodes()[0]),Os(t,{},1,e)}function Os(t,e,n,r,i){var o=n,s=t.node(r);return e[r]=!0,t.neighbors(r).forEach(a=>{e.hasOwnProperty(a)||(n=Os(t,e,n,a,r))}),s.low=o,s.lim=n++,i?s.parent=i:delete s.parent,n}function Ps(t){return t.edges().find(e=>t.edge(e).cutvalue<0)}function Ls(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var o=t.node(r),s=t.node(i),a=o,l=!1;o.lim>s.lim&&(a=s,l=!0);var u=e.edges().filter(c=>l===Ni(t,t.node(c.v),a)&&l!==Ni(t,t.node(c.w),a));return u.reduce((c,h)=>Mi(e,h)<Mi(e,c)?h:c)}function As(t,e,n,r){var i=n.v,o=n.w;t.removeEdge(i,o),t.setEdge(r.v,r.w,{}),Wr(t),Vr(t,e),Td(t,e)}function Td(t,e){var n=t.nodes().find(i=>!e.node(i).parent),r=Ed(t,n);r=r.slice(1),r.forEach(i=>{var o=t.node(i).parent,s=e.edge(i,o),a=!1;s||(s=e.edge(o,i),a=!0),e.node(i).rank=e.node(o).rank+(a?s.minlen:-s.minlen)})}function $d(t,e,n){return t.hasEdge(e,n)}function Ni(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}var Sd=An,Rs=Sd.longestPath,Id=Ss,Od=Nd,Pd=Ld;function Ld(t){switch(t.graph().ranker){case"network-simplex":Ci(t);break;case"tight-tree":Rd(t);break;case"longest-path":Ad(t);break;default:Ci(t)}}var Ad=Rs;function Rd(t){Rs(t),Id(t)}function Ci(t){Od(t)}var Bd=Dd;function Dd(t){let e=Vd(t);t.graph().dummyChains.forEach(n=>{let r=t.node(n),i=r.edgeObj,o=Fd(t,e,i.v,i.w),s=o.path,a=o.lca,l=0,u=s[l],c=!0;for(;n!==i.w;){if(r=t.node(n),c){for(;(u=s[l])!==a&&t.node(u).maxRank<r.rank;)l++;u===a&&(c=!1)}if(!c){for(;l<s.length-1&&t.node(u=s[l+1]).minRank<=r.rank;)l++;u=s[l]}t.setParent(n,u),n=t.successors(n)[0]}})}function Fd(t,e,n,r){let i=[],o=[],s=Math.min(e[n].low,e[r].low),a=Math.max(e[n].lim,e[r].lim),l,u;l=n;do l=t.parent(l),i.push(l);while(l&&(e[l].low>s||a>e[l].lim));for(u=l,l=r;(l=t.parent(l))!==u;)o.push(l);return{path:i.concat(o.reverse()),lca:u}}function Vd(t){let e={},n=0;function r(i){let o=n;t.children(i).forEach(r),e[i]={low:o,lim:n++}}return t.children().forEach(r),e}let _r=ue;var Wd={run:jd,cleanup:Hd};function jd(t){let e=_r.addDummyNode(t,"root",{},"_root"),n=zd(t),r=Math.max(...Object.values(n))-1,i=2*r+1;t.graph().nestingRoot=e,t.edges().forEach(s=>t.edge(s).minlen*=i);let o=Gd(t)+1;t.children().forEach(s=>Bs(t,e,i,o,r,n,s)),t.graph().nodeRankFactor=i}function Bs(t,e,n,r,i,o,s){let a=t.children(s);if(!a.length){s!==e&&t.setEdge(e,s,{weight:0,minlen:n});return}let l=_r.addBorderNode(t,"_bt"),u=_r.addBorderNode(t,"_bb"),c=t.node(s);t.setParent(l,s),c.borderTop=l,t.setParent(u,s),c.borderBottom=u,a.forEach(h=>{Bs(t,e,n,r,i,o,h);let f=t.node(h),d=f.borderTop?f.borderTop:h,g=f.borderBottom?f.borderBottom:h,_=f.borderTop?r:2*r,E=d!==g?1:i-o[s]+1;t.setEdge(l,d,{weight:_,minlen:E,nestingEdge:!0}),t.setEdge(g,u,{weight:_,minlen:E,nestingEdge:!0})}),t.parent(s)||t.setEdge(e,l,{weight:0,minlen:i+o[s]})}function zd(t){var e={};function n(r,i){var o=t.children(r);o&&o.length&&o.forEach(s=>n(s,i+1)),e[r]=i}return t.children().forEach(r=>n(r,1)),e}function Gd(t){return t.edges().reduce((e,n)=>e+t.edge(n).weight,0)}function Hd(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,t.edges().forEach(n=>{var r=t.edge(n);r.nestingEdge&&t.removeEdge(n)})}let qd=ue;var Yd=Xd;function Xd(t){function e(n){let r=t.children(n),i=t.node(n);if(r.length&&r.forEach(e),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(let o=i.minRank,s=i.maxRank+1;o<s;++o)Ti(t,"borderLeft","_bl",n,i,o),Ti(t,"borderRight","_br",n,i,o)}}t.children().forEach(e)}function Ti(t,e,n,r,i,o){let s={width:0,height:0,rank:o,borderType:e},a=i[e][o-1],l=qd.addDummyNode(t,"border",s,n);i[e][o]=l,t.setParent(l,r),a&&t.setEdge(a,l,{weight:1})}var Ud={adjust:Kd,undo:Zd};function Kd(t){let e=t.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&Ds(t)}function Zd(t){let e=t.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&Qd(t),(e==="lr"||e==="rl")&&(Jd(t),Ds(t))}function Ds(t){t.nodes().forEach(e=>$i(t.node(e))),t.edges().forEach(e=>$i(t.edge(e)))}function $i(t){let e=t.width;t.width=t.height,t.height=e}function Qd(t){t.nodes().forEach(e=>qn(t.node(e))),t.edges().forEach(e=>{let n=t.edge(e);n.points.forEach(qn),n.hasOwnProperty("y")&&qn(n)})}function qn(t){t.y=-t.y}function Jd(t){t.nodes().forEach(e=>Yn(t.node(e))),t.edges().forEach(e=>{let n=t.edge(e);n.points.forEach(Yn),n.hasOwnProperty("x")&&Yn(n)})}function Yn(t){let e=t.x;t.x=t.y,t.y=e}let ep=ue;var tp=np;function np(t){let e={},n=t.nodes().filter(a=>!t.children(a).length),r=Math.max(...n.map(a=>t.node(a).rank)),i=ep.range(r+1).map(()=>[]);function o(a){if(e[a])return;e[a]=!0;let l=t.node(a);i[l.rank].push(a),t.successors(a).forEach(o)}return n.sort((a,l)=>t.node(a).rank-t.node(l).rank).forEach(o),i}let rp=ue.zipObject;var ip=op;function op(t,e){let n=0;for(let r=1;r<e.length;++r)n+=sp(t,e[r-1],e[r]);return n}function sp(t,e,n){let r=rp(n,n.map((u,c)=>c)),i=e.flatMap(u=>t.outEdges(u).map(c=>({pos:r[c.w],weight:t.edge(c).weight})).sort((c,h)=>c.pos-h.pos)),o=1;for(;o<n.length;)o<<=1;let s=2*o-1;o-=1;let a=new Array(s).fill(0),l=0;return i.forEach(u=>{let c=u.pos+o;a[c]+=u.weight;let h=0;for(;c>0;)c%2&&(h+=a[c+1]),c=c-1>>1,a[c]+=u.weight;l+=u.weight*h}),l}var ap=lp;function lp(t,e=[]){return e.map(n=>{let r=t.inEdges(n);if(r.length){let i=r.reduce((o,s)=>{let a=t.edge(s),l=t.node(s.v);return{sum:o.sum+a.weight*l.order,weight:o.weight+a.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}let up=ue;var cp=hp;function hp(t,e){let n={};t.forEach((i,o)=>{let s=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:o};i.barycenter!==void 0&&(s.barycenter=i.barycenter,s.weight=i.weight)}),e.edges().forEach(i=>{let o=n[i.v],s=n[i.w];o!==void 0&&s!==void 0&&(s.indegree++,o.out.push(n[i.w]))});let r=Object.values(n).filter(i=>!i.indegree);return fp(r)}function fp(t){let e=[];function n(i){return o=>{o.merged||(o.barycenter===void 0||i.barycenter===void 0||o.barycenter>=i.barycenter)&&dp(i,o)}}function r(i){return o=>{o.in.push(i),--o.indegree===0&&t.push(o)}}for(;t.length;){let i=t.pop();e.push(i),i.in.reverse().forEach(n(i)),i.out.forEach(r(i))}return e.filter(i=>!i.merged).map(i=>up.pick(i,["vs","i","barycenter","weight"]))}function dp(t,e){let n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}let pp=ue;var gp=mp;function mp(t,e){let n=pp.partition(t,c=>c.hasOwnProperty("barycenter")),r=n.lhs,i=n.rhs.sort((c,h)=>h.i-c.i),o=[],s=0,a=0,l=0;r.sort(wp(!!e)),l=Si(o,i,l),r.forEach(c=>{l+=c.vs.length,o.push(c.vs),s+=c.barycenter*c.weight,a+=c.weight,l=Si(o,i,l)});let u={vs:o.flat(!0)};return a&&(u.barycenter=s/a,u.weight=a),u}function Si(t,e,n){let r;for(;e.length&&(r=e[e.length-1]).i<=n;)e.pop(),t.push(r.vs),n++;return n}function wp(t){return(e,n)=>e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}let _p=ap,yp=cp,bp=gp;var vp=Fs;function Fs(t,e,n,r){let i=t.children(e),o=t.node(e),s=o?o.borderLeft:void 0,a=o?o.borderRight:void 0,l={};s&&(i=i.filter(f=>f!==s&&f!==a));let u=_p(t,i);u.forEach(f=>{if(t.children(f.v).length){let d=Fs(t,f.v,n,r);l[f.v]=d,d.hasOwnProperty("barycenter")&&Ep(f,d)}});let c=yp(u,n);kp(c,l);let h=bp(c,r);if(s&&(h.vs=[s,h.vs,a].flat(!0),t.predecessors(s).length)){let f=t.node(t.predecessors(s)[0]),d=t.node(t.predecessors(a)[0]);h.hasOwnProperty("barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+f.order+d.order)/(h.weight+2),h.weight+=2}return h}function kp(t,e){t.forEach(n=>{n.vs=n.vs.flatMap(r=>e[r]?e[r].vs:r)})}function Ep(t,e){t.barycenter!==void 0?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)}let xp=Be.Graph,Mp=ue;var Np=Cp;function Cp(t,e,n){let r=Tp(t),i=new xp({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(o=>t.node(o));return t.nodes().forEach(o=>{let s=t.node(o),a=t.parent(o);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(i.setNode(o),i.setParent(o,a||r),t[n](o).forEach(l=>{let u=l.v===o?l.w:l.v,c=i.edge(u,o),h=c!==void 0?c.weight:0;i.setEdge(u,o,{weight:t.edge(l).weight+h})}),s.hasOwnProperty("minRank")&&i.setNode(o,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),i}function Tp(t){for(var e;t.hasNode(e=Mp.uniqueId("_root")););return e}var $p=Sp;function Sp(t,e,n){let r={},i;n.forEach(o=>{let s=t.parent(o),a,l;for(;s;){if(a=t.parent(s),a?(l=r[a],r[a]=s):(l=i,i=s),l&&l!==s){e.setEdge(l,s);return}s=a}})}let Ip=tp,Op=ip,Pp=vp,Lp=Np,Ap=$p,Rp=Be.Graph,cn=ue;var Bp=Vs;function Vs(t,e){if(e&&typeof e.customOrder=="function"){e.customOrder(t,Vs);return}let n=cn.maxRank(t),r=Ii(t,cn.range(1,n+1),"inEdges"),i=Ii(t,cn.range(n-1,-1,-1),"outEdges"),o=Ip(t);if(Oi(t,o),e&&e.disableOptimalOrderHeuristic)return;let s=Number.POSITIVE_INFINITY,a;for(let l=0,u=0;u<4;++l,++u){Dp(l%2?r:i,l%4>=2),o=cn.buildLayerMatrix(t);let c=Op(t,o);c<s&&(u=0,a=Object.assign({},o),s=c)}Oi(t,a)}function Ii(t,e,n){return e.map(function(r){return Lp(t,r,n)})}function Dp(t,e){let n=new Rp;t.forEach(function(r){let i=r.graph().root,o=Pp(r,i,n,e);o.vs.forEach((s,a)=>r.node(s).order=a),Ap(r,n,o.vs)})}function Oi(t,e){Object.values(e).forEach(n=>n.forEach((r,i)=>t.node(r).order=i))}let Fp=Be.Graph,Qt=ue;var Vp={positionX:zp,findType1Conflicts:Ws,findType2Conflicts:js,addConflict:jr,hasConflict:zs,verticalAlignment:Gs,horizontalCompaction:Hs,alignCoordinates:Ys,findSmallestWidthAlignment:qs,balance:Xs};function Ws(t,e){let n={};function r(i,o){let s=0,a=0,l=i.length,u=o[o.length-1];return o.forEach((c,h)=>{let f=Wp(t,c),d=f?t.node(f).order:l;(f||c===u)&&(o.slice(a,h+1).forEach(g=>{t.predecessors(g).forEach(_=>{let E=t.node(_),$=E.order;($<s||d<$)&&!(E.dummy&&t.node(g).dummy)&&jr(n,_,g)})}),a=h+1,s=d)}),o}return e.length&&e.reduce(r),n}function js(t,e){let n={};function r(o,s,a,l,u){let c;Qt.range(s,a).forEach(h=>{c=o[h],t.node(c).dummy&&t.predecessors(c).forEach(f=>{let d=t.node(f);d.dummy&&(d.order<l||d.order>u)&&jr(n,f,c)})})}function i(o,s){let a=-1,l,u=0;return s.forEach((c,h)=>{if(t.node(c).dummy==="border"){let f=t.predecessors(c);f.length&&(l=t.node(f[0]).order,r(s,u,h,a,l),u=h,a=l)}r(s,u,s.length,l,o.length)}),s}return e.length&&e.reduce(i),n}function Wp(t,e){if(t.node(e).dummy)return t.predecessors(e).find(n=>t.node(n).dummy)}function jr(t,e,n){if(e>n){let i=e;e=n,n=i}let r=t[e];r||(t[e]=r={}),r[n]=!0}function zs(t,e,n){if(e>n){let r=e;e=n,n=r}return!!t[e]&&t[e].hasOwnProperty(n)}function Gs(t,e,n,r){let i={},o={},s={};return e.forEach(a=>{a.forEach((l,u)=>{i[l]=l,o[l]=l,s[l]=u})}),e.forEach(a=>{let l=-1;a.forEach(u=>{let c=r(u);if(c.length){c=c.sort((f,d)=>s[f]-s[d]);let h=(c.length-1)/2;for(let f=Math.floor(h),d=Math.ceil(h);f<=d;++f){let g=c[f];o[u]===u&&l<s[g]&&!zs(n,u,g)&&(o[g]=u,o[u]=i[u]=i[g],l=s[g])}}})}),{root:i,align:o}}function Hs(t,e,n,r,i){let o={},s=jp(t,e,n,i),a=i?"borderLeft":"borderRight";function l(h,f){let d=s.nodes(),g=d.pop(),_={};for(;g;)_[g]?h(g):(_[g]=!0,d.push(g),d=d.concat(f(g))),g=d.pop()}function u(h){o[h]=s.inEdges(h).reduce((f,d)=>Math.max(f,o[d.v]+s.edge(d)),0)}function c(h){let f=s.outEdges(h).reduce((g,_)=>Math.min(g,o[_.w]-s.edge(_)),Number.POSITIVE_INFINITY),d=t.node(h);f!==Number.POSITIVE_INFINITY&&d.borderType!==a&&(o[h]=Math.max(o[h],f))}return l(u,s.predecessors.bind(s)),l(c,s.successors.bind(s)),Object.keys(r).forEach(h=>o[h]=o[n[h]]),o}function jp(t,e,n,r){let i=new Fp,o=t.graph(),s=Gp(o.nodesep,o.edgesep,r);return e.forEach(a=>{let l;a.forEach(u=>{let c=n[u];if(i.setNode(c),l){var h=n[l],f=i.edge(h,c);i.setEdge(h,c,Math.max(s(t,u,l),f||0))}l=u})}),i}function qs(t,e){return Object.values(e).reduce((n,r)=>{let i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;Object.entries(r).forEach(([a,l])=>{let u=Hp(t,a)/2;i=Math.max(l+u,i),o=Math.min(l-u,o)});const s=i-o;return s<n[0]&&(n=[s,r]),n},[Number.POSITIVE_INFINITY,null])[1]}function Ys(t,e){let n=Object.values(e),r=Math.min(...n),i=Math.max(...n);["u","d"].forEach(o=>{["l","r"].forEach(s=>{let a=o+s,l=t[a];if(l===e)return;let u=Object.values(l),c=r-Math.min(...u);s!=="l"&&(c=i-Math.max(...u)),c&&(t[a]=Qt.mapValues(l,h=>h+c))})})}function Xs(t,e){return Qt.mapValues(t.ul,(n,r)=>{if(e)return t[e.toLowerCase()][r];{let i=Object.values(t).map(o=>o[r]).sort((o,s)=>o-s);return(i[1]+i[2])/2}})}function zp(t){let e=Qt.buildLayerMatrix(t),n=Object.assign(Ws(t,e),js(t,e)),r={},i;["u","d"].forEach(s=>{i=s==="u"?e:Object.values(e).reverse(),["l","r"].forEach(a=>{a==="r"&&(i=i.map(h=>Object.values(h).reverse()));let l=(s==="u"?t.predecessors:t.successors).bind(t),u=Gs(t,i,n,l),c=Hs(t,i,u.root,u.align,a==="r");a==="r"&&(c=Qt.mapValues(c,h=>-h)),r[s+a]=c})});let o=qs(t,r);return Ys(r,o),Xs(r,t.graph().align)}function Gp(t,e,n){return(r,i,o)=>{let s=r.node(i),a=r.node(o),l=0,u;if(l+=s.width/2,s.hasOwnProperty("labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(s.dummy?e:t)/2,l+=(a.dummy?e:t)/2,l+=a.width/2,a.hasOwnProperty("labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=a.width/2;break;case"r":u=-a.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function Hp(t,e){return t.node(e).width}let Us=ue,qp=Vp.positionX;var Yp=Xp;function Xp(t){t=Us.asNonCompoundGraph(t),Up(t),Object.entries(qp(t)).forEach(([e,n])=>t.node(e).x=n)}function Up(t){let e=Us.buildLayerMatrix(t),n=t.graph().ranksep,r=0;e.forEach(i=>{const o=i.reduce((s,a)=>{const l=t.node(a).height;return s>l?s:l},0);i.forEach(s=>t.node(s).y=r+o/2),r+=o+n})}let Pi=od,Li=cd,Kp=Pd,Zp=ue.normalizeRanks,Qp=Bd,Jp=ue.removeEmptyRanks,Ai=Wd,eg=Yd,Ri=Ud,tg=Bp,ng=Yp,Le=ue,rg=Be.Graph;var ig=og;function og(t,e){let n=e&&e.debugTiming?Le.time:Le.notime;n("layout",()=>{let r=n("  buildLayoutGraph",()=>gg(t));n("  runLayout",()=>sg(r,n)),n("  updateInputGraph",()=>ag(t,r))})}function sg(t,e){e("    makeSpaceForEdgeLabels",()=>mg(t)),e("    removeSelfEdges",()=>Mg(t)),e("    acyclic",()=>Pi.run(t)),e("    nestingGraph.run",()=>Ai.run(t)),e("    rank",()=>Kp(Le.asNonCompoundGraph(t))),e("    injectEdgeLabelProxies",()=>wg(t)),e("    removeEmptyRanks",()=>Jp(t)),e("    nestingGraph.cleanup",()=>Ai.cleanup(t)),e("    normalizeRanks",()=>Zp(t)),e("    assignRankMinMax",()=>_g(t)),e("    removeEdgeLabelProxies",()=>yg(t)),e("    normalize.run",()=>Li.run(t)),e("    parentDummyChains",()=>Qp(t)),e("    addBorderSegments",()=>eg(t)),e("    order",()=>tg(t)),e("    insertSelfEdges",()=>Ng(t)),e("    adjustCoordinateSystem",()=>Ri.adjust(t)),e("    position",()=>ng(t)),e("    positionSelfEdges",()=>Cg(t)),e("    removeBorderNodes",()=>xg(t)),e("    normalize.undo",()=>Li.undo(t)),e("    fixupEdgeLabelCoords",()=>kg(t)),e("    undoCoordinateSystem",()=>Ri.undo(t)),e("    translateGraph",()=>bg(t)),e("    assignNodeIntersects",()=>vg(t)),e("    reversePoints",()=>Eg(t)),e("    acyclic.undo",()=>Pi.undo(t))}function ag(t,e){t.nodes().forEach(n=>{let r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,r.rank=i.rank,e.children(n).length&&(r.width=i.width,r.height=i.height))}),t.edges().forEach(n=>{let r=t.edge(n),i=e.edge(n);r.points=i.points,i.hasOwnProperty("x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}let lg=["nodesep","edgesep","ranksep","marginx","marginy"],ug={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},cg=["acyclicer","ranker","rankdir","align"],hg=["width","height"],Bi={width:0,height:0},fg=["minlen","weight","width","height","labeloffset"],dg={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},pg=["labelpos"];function gg(t){let e=new rg({multigraph:!0,compound:!0}),n=Un(t.graph());return e.setGraph(Object.assign({},ug,Xn(n,lg),Le.pick(n,cg))),t.nodes().forEach(r=>{let i=Un(t.node(r));const o=Xn(i,hg);Object.keys(Bi).forEach(s=>{o[s]===void 0&&(o[s]=Bi[s])}),e.setNode(r,o),e.setParent(r,t.parent(r))}),t.edges().forEach(r=>{let i=Un(t.edge(r));e.setEdge(r,Object.assign({},dg,Xn(i,fg),Le.pick(i,pg)))}),e}function mg(t){let e=t.graph();e.ranksep/=2,t.edges().forEach(n=>{let r=t.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function wg(t){t.edges().forEach(e=>{let n=t.edge(e);if(n.width&&n.height){let r=t.node(e.v),o={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e};Le.addDummyNode(t,"edge-proxy",o,"_ep")}})}function _g(t){let e=0;t.nodes().forEach(n=>{let r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=Math.max(e,r.maxRank))}),t.graph().maxRank=e}function yg(t){t.nodes().forEach(e=>{let n=t.node(e);n.dummy==="edge-proxy"&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}function bg(t){let e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=t.graph(),s=o.marginx||0,a=o.marginy||0;function l(u){let c=u.x,h=u.y,f=u.width,d=u.height;e=Math.min(e,c-f/2),n=Math.max(n,c+f/2),r=Math.min(r,h-d/2),i=Math.max(i,h+d/2)}t.nodes().forEach(u=>l(t.node(u))),t.edges().forEach(u=>{let c=t.edge(u);c.hasOwnProperty("x")&&l(c)}),e-=s,r-=a,t.nodes().forEach(u=>{let c=t.node(u);c.x-=e,c.y-=r}),t.edges().forEach(u=>{let c=t.edge(u);c.points.forEach(h=>{h.x-=e,h.y-=r}),c.hasOwnProperty("x")&&(c.x-=e),c.hasOwnProperty("y")&&(c.y-=r)}),o.width=n-e+s,o.height=i-r+a}function vg(t){t.edges().forEach(e=>{let n=t.edge(e),r=t.node(e.v),i=t.node(e.w),o,s;n.points?(o=n.points[0],s=n.points[n.points.length-1]):(n.points=[],o=i,s=r),n.points.unshift(Le.intersectRect(r,o)),n.points.push(Le.intersectRect(i,s))})}function kg(t){t.edges().forEach(e=>{let n=t.edge(e);if(n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function Eg(t){t.edges().forEach(e=>{let n=t.edge(e);n.reversed&&n.points.reverse()})}function xg(t){t.nodes().forEach(e=>{if(t.children(e).length){let n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(n.borderLeft[n.borderLeft.length-1]),s=t.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(s.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),t.nodes().forEach(e=>{t.node(e).dummy==="border"&&t.removeNode(e)})}function Mg(t){t.edges().forEach(e=>{if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}})}function Ng(t){var e=Le.buildLayerMatrix(t);e.forEach(n=>{var r=0;n.forEach((i,o)=>{var s=t.node(i);s.order=o+r,(s.selfEdges||[]).forEach(a=>{Le.addDummyNode(t,"selfedge",{width:a.label.width,height:a.label.height,rank:s.rank,order:o+ ++r,e:a.e,label:a.label},"_se")}),delete s.selfEdges})})}function Cg(t){t.nodes().forEach(e=>{var n=t.node(e);if(n.dummy==="selfedge"){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,s=n.x-i,a=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*s/3,y:o-a},{x:i+5*s/6,y:o-a},{x:i+s,y:o},{x:i+5*s/6,y:o+a},{x:i+2*s/3,y:o+a}],n.label.x=n.x,n.label.y=n.y}})}function Xn(t,e){return Le.mapValues(Le.pick(t,e),Number)}function Un(t){var e={};return t&&Object.entries(t).forEach(([n,r])=>{typeof n=="string"&&(n=n.toLowerCase()),e[n]=r}),e}let Tg=ue,$g=Be.Graph;var Sg={debugOrdering:Ig};function Ig(t){let e=Tg.buildLayerMatrix(t),n=new $g({compound:!0,multigraph:!0}).setGraph({});return t.nodes().forEach(r=>{n.setNode(r,{label:r}),n.setParent(r,"layer"+t.node(r).rank)}),t.edges().forEach(r=>n.setEdge(r.v,r.w,{},r.name)),e.forEach((r,i)=>{let o="layer"+i;n.setNode(o,{rank:"same"}),r.reduce((s,a)=>(n.setEdge(s,a,{style:"invis"}),a))}),n}var Og="1.1.2",bn={graphlib:Be,layout:ig,debug:Sg,util:{time:ue.time,notime:ue.notime},version:Og};const Di=Dh(bn);class Pg{compute(e,n){const r=new Di.graphlib.Graph;r.setGraph({}),r.setDefaultEdgeLabel(()=>({})),r.setDefaultNodeLabel(()=>({}));const i=new Map,o=new Map,s=new Map,a=new Map,l=k=>{const y=e.childrenT(k);if(y.length===0){const m=e.node(k).build(),{width:b,height:M}=m.boundingBox();r.setNode(k,{width:b,height:M}),i.set(k,m)}else{if(!n.has(k)&&k!==e.root()){const m=e.node(k);s.set(k,{boundingBox:{},name:m.humanReadable()||k})}for(const m of y)if(n.has(m))for(const b of e.hierarchyPreorder(m)){const M=e.node(m).build();a.set(b,m);const{width:v,height:O}=M.boundingBox();r.setNode(m,{width:v,height:O}),o.set(m,M)}else l(m)}};l(e.root());for(const{v:k,w:y}of e.edges()){const m=a.get(k)||k,b=a.get(y)||y;m!==b&&r.setEdge(m,b)}const u=performance.now();Di.layout(r);const c=performance.now(),{width:h,height:f}=r.graph(),d=new re(0,0,h,f);for(const[k,y]of i.entries()){const{x:m,y:b,width:M,height:v}=r.node(k);y.moveTo(m-M/2,b-v/2)}for(const[k,y]of o.entries()){const{x:m,y:b,width:M,height:v}=r.node(k);y.moveTo(m-M/2,b-v/2)}const g=20;for(const k of e.hierarchyPostorder()){const y=s.get(k);if(y!==void 0){const m=e.childrenT(k).reduce((b,M)=>{var v,O,D;const z=(v=i.get(M))==null?void 0:v.boundingBox();z!==void 0&&b.push(z);const U=(O=o.get(M))==null?void 0:O.boundingBox();U!==void 0&&b.push(U);const W=(D=s.get(M))==null?void 0:D.boundingBox;if(W!==void 0&&M!==k){const N=2*-g+10,x=re.fromCenterAndDimension(W.center,W.width+N,W.height+N);b.push(x)}return b},[]);y.boundingBox=re.fromUnion(...m).padded(g)}}const _=r.edges().map(k=>{const{points:y}=r.edge(k);return[{from:k.v,to:k.w},new Pr(y)]}).map(([k,y])=>y),E={layoutTimeMs:c-u},$=new hs(..._);return{nodes:i,collapsed:o,expanded:s,edges:$,boundingBox:d.union($.boundingBox()),stats:E}}}class zr extends bn.graphlib.Graph{constructor(e){super({compound:!0}),e!==void 0?Object.assign(this,e):(this.setGraph({}),this.setDefaultEdgeLabel(()=>({})))}setNodeWithParent(e,n,r){this.setNode(e,n),this.setParent(e,r)}parents(e){const n=[];let r=this.parent(e);for(;r!==void 0;)n.push(r),r=this.parent(r);return n}hierarchyPreorder(e){const n=[],r=e!==void 0?e:this.root(),i=o=>{n.push(o);for(const s of this.childrenT(o))i(s)};for(const o of this.childrenT(r))i(o);return n}hierarchyPostorder(e){const n=[],r=e!==void 0?e:this.root(),i=o=>{for(const s of this.childrenT(o))i(s);n.push(o)};for(const o of this.childrenT(r))i(o);return n}childrenT(e){return this.children(e)}parent(e){return super.parent(e)}nodes(){return super.nodes()}modules(){return this.nodes().filter(e=>this.childrenT(e).length>0)}edges(){return super.edges()}root(){return"\0"}toJson(){return bn.graphlib.json.write(this)}static readJson(e){return new zr(bn.graphlib.json.read(e))}}function Lg(t,e,n,r){const i=new Set,o=new Set;if(r.expand)for(const a of e)for(const l of t.parents(a))n.has(l)?o.add(l):i.add(l);const s=new Set;if(r.collapseOthers)for(const a of t.modules())!o.has(a)&&!n.has(a)&&!i.has(a)&&s.add(a);return{collapse:s,expand:o}}function Ag(t,e){const n=r=>e.has(r)||t.childrenT(r).length===0?1:t.childrenT(r).reduce((i,o)=>i+n(o),0);return t.childrenT(t.root()).reduce((r,i)=>r+n(i),0)}function Rg(t){let e;return{c(){e=X("path"),p(e,"d","M20.441,59.9614212 C21.0957895,59.9614212 22.7266842,56.6764211 22.7266842,52.7482369 L22.7266842,38.6593685 L18.182579,38.6593685 L18.182579,52.7482369 C18.182579,56.6764211 19.8134737,59.9614212 20.441,59.9614212 Z M4.26163159,40.7638948 L36.6204211,40.7638948 C38.9460001,40.7638948 40.4145264,39.317579 40.4145264,37.1453685 C40.4145264,29.5821053 31.9740001,21.9558421 20.441,21.9558421 C8.93526317,21.9558421 0.494736843,29.5821053 0.494736843,37.1453685 C0.494736843,39.317579 1.96884211,40.7638948 4.26163159,40.7638948 Z M5.2911579,36.8756316 C4.71700001,36.8756316 4.4541579,36.5583159 4.56310527,35.8480001 C5.1023158,31.2280527 11.0429474,25.7078948 20.441,25.7078948 C29.8718948,25.7078948 35.7796843,31.2280527 36.346158,35.8480001 C36.4551053,36.5583159 36.1650001,36.8756316 35.5908948,36.8756316 L5.2911579,36.8756316 Z M3.74989474,2.76857895 C3.74989474,3.55452632 4.0611579,4.40605264 4.72705264,5.26868422 C6.03868422,7.0183158 9.13778949,9.44489475 12.3810527,11.5798421 L11.4523158,25.1263685 L15.5584737,25.1263685 L16.4983158,9.67205265 C16.5311053,9.30078949 16.4711053,9.17515791 16.2254211,9.04952633 C12.3641579,7.09368422 9.37084212,4.73952632 9.18573686,4.22889474 C8.96778949,3.90094737 9.18626317,3.66589474 9.48189475,3.66589474 L31.4273685,3.66589474 C31.7013158,3.66589474 31.9142106,3.90094737 31.7291053,4.22889474 C31.5112106,4.73952632 28.5451053,7.09368422 24.6621579,9.04952633 C24.4437369,9.17515791 24.3836843,9.30078949 24.4164737,9.67205265 L25.3563685,25.1263685 L29.4569474,25.1263685 L28.501,11.5798421 C31.7497895,9.44489475 34.8488948,7.0183158 36.1605264,5.26868422 C36.8481053,4.40605264 37.1593685,3.55452632 37.1593685,2.76857895 C37.1593685,1.20726316 35.9421053,0.0500000001 34.1512632,0.0500000001 L6.75800001,0.0500000001 C4.93989475,0.0500000001 3.74989474,1.20726316 3.74989474,2.76857895 Z"),p(e,"transform","translate(11.737 2)"),p(e,"fill",t[0]),p(e,"stroke",t[1])},m(n,r){V(n,e,r)},p(n,[r]){r&1&&p(e,"fill",n[0]),r&2&&p(e,"stroke",n[1])},i:Y,o:Y,d(n){n&&B(e)}}}function Bg(t,e,n){let{fill:r="white"}=e,{stroke:i="white"}=e;return t.$$set=o=>{"fill"in o&&n(0,r=o.fill),"stroke"in o&&n(1,i=o.stroke)},[r,i]}class Dg extends ve{constructor(e){super(),be(this,e,Bg,Rg,we,{fill:0,stroke:1})}}function Fg(t){let e,n,r,i,o,s,a,l,u,c,h,f,d;const g=[{self:t[0].content}];var _=t[0].content.drawable();function E($,k){let y={};for(let m=0;m<g.length;m+=1)y=Ze(y,g[m]);return k!==void 0&&k&1&&(y=Ze(y,It(g,[{self:$[0].content}]))),{props:y}}return _&&(n=St(_,E(t))),u=new Dg({}),{c(){e=X("g"),n&&le(n.$$.fragment),r=X("g"),i=X("rect"),s=X("text"),a=je("Pin"),l=X("g"),le(u.$$.fragment),p(i,"x","-37"),p(i,"y","-10"),p(i,"width","50"),p(i,"height","20"),p(i,"rx","10"),p(i,"fill",o=t[1]==="pinned"?"orange":"rgb(51,51,51)"),p(i,"stroke","white"),p(i,"stroke-width","2"),p(s,"x","-18"),p(s,"y",1),p(s,"font-family",Jt.family),p(s,"font-size","10"),p(s,"text-anchor","middle"),p(s,"dominant-baseline","middle"),p(s,"fill","white"),p(l,"transform","scale(0.2) translate(-32 -30)"),p(r,"transform",c=`translate(${t[2].width+t[6].x},${-t[6].y})`),p(r,"cursor","pointer"),p(e,"role","tooltip")},m($,k){V($,e,k),n&&oe(n,e,null),G(e,r),G(r,i),G(r,s),G(s,a),G(r,l),oe(u,l,null),h=!0,f||(d=[ie(r,"click",t[3]),ie(r,"keydown",t[3]),ie(e,"mouseenter",t[4]),ie(e,"mouseleave",t[5])],f=!0)},p($,[k]){if(k&1&&_!==(_=$[0].content.drawable())){if(n){Me();const y=n;j(y.$$.fragment,1,0,()=>{se(y,1)}),Ne()}_?(n=St(_,E($,k)),le(n.$$.fragment),L(n.$$.fragment,1),oe(n,e,r)):n=null}else if(_){const y=k&1?It(g,[{self:$[0].content}]):{};n.$set(y)}(!h||k&2&&o!==(o=$[1]==="pinned"?"orange":"rgb(51,51,51)"))&&p(i,"fill",o),(!h||k&4&&c!==(c=`translate(${$[2].width+$[6].x},${-$[6].y})`))&&p(r,"transform",c)},i($){h||(n&&L(n.$$.fragment,$),L(u.$$.fragment,$),h=!0)},o($){n&&j(n.$$.fragment,$),j(u.$$.fragment,$),h=!1},d($){$&&B(e),n&&se(n),se(u),f=!1,We(d)}}}function Vg(t,e,n){let r,{nodeId:i}=e,{tooltip:o}=e,{state:s}=e;const a=Ot();function l(f){f.stopPropagation(),a("togglePin",{nodeId:i})}function u(f){a("nodeEnter",{...f,nodeId:i})}function c(f){a("nodeLeave",{...f,nodeId:i})}const h={x:1,y:1};return t.$$set=f=>{"nodeId"in f&&n(7,i=f.nodeId),"tooltip"in f&&n(0,o=f.tooltip),"state"in f&&n(1,s=f.state)},t.$$.update=()=>{t.$$.dirty&1&&n(2,r=o.boundingBox())},[o,s,r,l,u,c,h,i]}class Wg extends ve{constructor(e){super(),be(this,e,Vg,Fg,we,{nodeId:7,tooltip:0,state:1})}}const Ks=300;function jg(t,e,n){function r(){t.update(i=>(i.set(e,{tooltip:n,state:"active"}),i))}return window.setTimeout(r,Ks)}function Zs(t,e){t.update(n=>{const r=n.get(e);return r!==void 0&&r.state!=="pinned"&&(r.state!=="active"&&window.clearTimeout(r.state),n.set(e,{...r,state:"active"})),n})}function Qs(t,e){function n(){t.update(r=>(r.delete(e),r))}t.update(r=>{const i=r.get(e);return i!==void 0&&i.state!=="pinned"&&r.set(e,{...i,state:window.setTimeout(n,Ks)}),r})}function zg(t,e){t.update(n=>{const r=n.get(e);return r!==void 0&&(r.state==="pinned"?n.set(e,{...r,state:"active"}):n.set(e,{...r,state:"pinned"})),n})}function Fi(t,e,n){const r=t.slice();return r[9]=e[n][0],r[10]=e[n][1].position,r[11]=e[n][1].tooltip,r[12]=e[n][1].state,r}function Vi(t,e){let n,r,i,o;return r=new Wg({props:{nodeId:e[9],tooltip:e[11],state:e[12]}}),r.$on("mouseenter",e[2]),r.$on("mouseleave",e[3]),r.$on("togglePin",e[4]),r.$on("nodeEnter",e[7]),r.$on("nodeLeave",e[8]),{key:t,first:null,c(){n=X("g"),le(r.$$.fragment),p(n,"transform",i=`translate(${e[10].x},${e[10].y})`),this.first=n},m(s,a){V(s,n,a),oe(r,n,null),o=!0},p(s,a){e=s;const l={};a&1&&(l.nodeId=e[9]),a&1&&(l.tooltip=e[11]),a&1&&(l.state=e[12]),r.$set(l),(!o||a&1&&i!==(i=`translate(${e[10].x},${e[10].y})`))&&p(n,"transform",i)},i(s){o||(L(r.$$.fragment,s),o=!0)},o(s){j(r.$$.fragment,s),o=!1},d(s){s&&B(n),se(r)}}}function Gg(t){let e=[],n=new Map,r,i,o=Se(t[0]);const s=a=>a[9];for(let a=0;a<o.length;a+=1){let l=Fi(t,o,a),u=s(l);n.set(u,e[a]=Vi(u,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=Ie()},m(a,l){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(a,l);V(a,r,l),i=!0},p(a,[l]){l&29&&(o=Se(a[0]),Me(),e=yn(e,l,s,1,a,o,n,r.parentNode,_n,Vi,r,Fi),Ne())},i(a){if(!i){for(let l=0;l<o.length;l+=1)L(e[l]);i=!0}},o(a){for(let l=0;l<e.length;l+=1)j(e[l]);i=!1},d(a){a&&B(r);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}const Hg=20;function qg(t,e,n){let r,i;const{tooltips:o}=es(Lr);zo(t,o,f=>n(6,i=f));let{nodeLayouts:s}=e;function a(f){Zs(o,f.detail.nodeId)}function l(f){Qs(o,f.detail.nodeId)}function u(f){zg(o,f.detail.nodeId)}function c(f){Ee.call(this,t,f)}function h(f){Ee.call(this,t,f)}return t.$$set=f=>{"nodeLayouts"in f&&n(5,s=f.nodeLayouts)},t.$$.update=()=>{t.$$.dirty&96&&n(0,r=[...i.entries()].filter(([f])=>s.has(f)).map(([f,{tooltip:d,state:g}])=>{var _;const E=(_=s.get(f))==null?void 0:_.boundingBox(),$=as(E,d.boundingBox(),d.options.anchor,Hg);return[f,{position:$,tooltip:d,state:g}]}))},[r,o,a,l,u,s,i,c,h]}class Yg extends ve{constructor(e){super(),be(this,e,qg,Gg,we,{nodeLayouts:5})}}function Xg(t){let e,n,r,i,o,s,a,l,u;return{c(){e=X("g"),n=X("rect"),o=X("text"),s=je(t[0]),p(n,"width",r=t[1].width),p(n,"height",i=t[1].height),p(n,"fill","rgb(250,250,250)"),p(n,"stroke","rgb(134, 134, 139)"),p(n,"stroke-width","1"),p(n,"rx","6"),p(n,"class","svelte-76qmi8"),p(o,"y","-2"),p(o,"font-family",Jt.family),p(o,"class","svelte-76qmi8"),p(e,"class","expand svelte-76qmi8"),p(e,"transform",a=`translate(${t[1].xMin},${t[1].yMin})`)},m(c,h){V(c,e,h),G(e,n),G(e,o),G(o,s),l||(u=[ie(e,"click",t[5]),ie(e,"dblclick",t[6]),ie(e,"mouseenter",t[2]),ie(e,"mouseleave",t[3])],l=!0)},p(c,[h]){h&2&&r!==(r=c[1].width)&&p(n,"width",r),h&2&&i!==(i=c[1].height)&&p(n,"height",i),h&1&&nn(s,c[0]),h&2&&a!==(a=`translate(${c[1].xMin},${c[1].yMin})`)&&p(e,"transform",a)},i:Y,o:Y,d(c){c&&B(e),l=!1,We(u)}}}function Ug(t,e,n){const r=Ot();let{nodeId:i}=e,{name:o}=e,{boundingBox:s}=e;function a(){r("nodeEnter",{nodeId:i})}function l(){r("nodeLeave",{nodeId:i})}function u(h){Ee.call(this,t,h)}function c(h){Ee.call(this,t,h)}return t.$$set=h=>{"nodeId"in h&&n(4,i=h.nodeId),"name"in h&&n(0,o=h.name),"boundingBox"in h&&n(1,s=h.boundingBox)},[o,s,a,l,i,u,c]}class Kg extends ve{constructor(e){super(),be(this,e,Ug,Xg,we,{nodeId:4,name:0,boundingBox:1})}}class Gr{constructor(e,n,r={x:0,y:0},i=1){this.width=e,this.height=n,this.cameraPos=r,this.cameraScale=i}viewToWorld(){return er.identity().translate(this.cameraPos.x,this.cameraPos.y)}worldToView(){return this.viewToWorld().inverse()}screenToView(){return er.identity().scale(1/this.cameraScale).translate(-this.width/2,-this.height/2)}viewToScreen(){return this.screenToView().inverse()}worldToScreen(){const e=this.worldToView();return this.viewToScreen().scale(e.k).translate(e.x,e.y)}screenToWorld(){return this.worldToScreen().inverse()}screenWidth(){return this.width}screenHeight(){return this.height}moveBy(e,n){this.cameraPos.x+=e,this.cameraPos.y+=n}moveTo(e,n){this.cameraPos.x=e,this.cameraPos.y=n}resize(e,n){this.width=e,this.height=n}center(){return this.cameraPos}scale(){return this.cameraScale}scaleBy(e){this.cameraScale*=e}scaleTo(e){this.cameraScale=e}fit(e){const{x:n,y:r}=e.center;this.moveTo(n,r);const i=Math.min(this.width/e.width,this.height/e.height);this.scaleTo(i||1)}world(){const e=this.screenToWorld().apply(0,0),n=this.screenToWorld().apply(this.width,this.height);return new re(e.x,e.y,n.x,n.y)}viewBox(){const e=this.world();return`${e.xMin} ${e.yMin} ${e.width} ${e.height}`}}class Zg{constructor(e){P(this,"scaleMin",Number.MIN_VALUE),P(this,"scaleMax",Number.MAX_VALUE),P(this,"boundingBox",re.infinity()),this.viewport=e}setViewport(e){this.viewport=e}setScaleExtent(e){return e.min!==void 0&&(this.scaleMin=e.min),e.max!==void 0&&(this.scaleMax=e.max),this}scaleExtent(){return{min:this.scaleMin,max:this.scaleMax}}setTranslationExtent(e){return e.xMin!==void 0&&(this.boundingBox.xMin=e.xMin),e.yMin!==void 0&&(this.boundingBox.yMin=e.yMin),e.xMax!==void 0&&(this.boundingBox.xMax=e.xMax),e.yMax!==void 0&&(this.boundingBox.yMax=e.yMax),this}translationExtent(){return this.boundingBox}limitScale(e){return mn(this.scaleMin,this.scaleMax,e)}limitTranslation(e,n){return e=mn(this.boundingBox.xMin,this.boundingBox.xMax,e),n=mn(this.boundingBox.yMin,this.boundingBox.yMax,n),{x:e,y:n}}scaleBy(e){const n=this.limitScale(this.viewport.scale()*e);this.viewport.scaleTo(n)}scaleTo(e){const n=this.limitScale(e);this.viewport.scaleTo(n)}moveBy(e,n){const{x:r,y:i}=this.viewport.center(),o=this.limitTranslation(r+e,i+n);this.viewport.moveTo(o.x,o.y)}moveTo(e,n){const r=this.limitTranslation(e,n);this.viewport.moveTo(r.x,r.y)}}const _t=[];function yr(t,e=Y){let n;const r=new Set;function i(a){if(we(t,a)&&(t=a,n)){const l=!_t.length;for(const u of r)u[1](),_t.push(u,t);if(l){for(let u=0;u<_t.length;u+=2)_t[u][0](_t[u+1]);_t.length=0}}}function o(a){i(a(t))}function s(a,l=Y){const u=[a,l];return r.add(u),r.size===1&&(n=e(i,o)||Y),a(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:s}}function Wi(t){return Object.prototype.toString.call(t)==="[object Date]"}function Qg(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function br(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((i,o)=>br(t[o],i));return i=>r.map(o=>o(i))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(Wi(t)&&Wi(e)){t=t.getTime(),e=e.getTime();const o=e-t;return s=>new Date(t+s*o)}const r=Object.keys(e),i={};return r.forEach(o=>{i[o]=br(t[o],e[o])}),o=>{const s={};return r.forEach(a=>{s[a]=i[a](o)}),s}}if(n==="number"){const r=e-t;return i=>t+i*r}throw new Error(`Cannot interpolate ${n} values`)}function Jg(t,e={}){const n=yr(t);let r,i=t;function o(s,a){if(t==null)return n.set(t=s),Promise.resolve();i=s;let l=r,u=!1,{delay:c=0,duration:h=400,easing:f=eh,interpolate:d=br}=Ze(Ze({},e),a);if(h===0)return l&&(l.abort(),l=null),n.set(t=i),Promise.resolve();const g=nh()+c;let _;return r=rh(E=>{if(E<g)return!0;u||(_=d(t,s),typeof h=="function"&&(h=h(t,s)),u=!0),l&&(l.abort(),l=null);const $=E-g;return $>h?(n.set(t=s),!1):(n.set(t=_(f($/h))),!0)}),r.promise}return{set:o,update:(s,a)=>o(s(i,t),a),subscribe:n.subscribe}}function em(t){let e,n,r,i,o;return{c(){e=X("rect"),p(e,"x",n=t[0].xMin),p(e,"y",r=t[0].yMin),p(e,"width",i=t[0].width),p(e,"height",o=t[0].height),p(e,"fill","grey"),p(e,"opacity","0.2")},m(s,a){V(s,e,a)},p(s,[a]){a&1&&n!==(n=s[0].xMin)&&p(e,"x",n),a&1&&r!==(r=s[0].yMin)&&p(e,"y",r),a&1&&i!==(i=s[0].width)&&p(e,"width",i),a&1&&o!==(o=s[0].height)&&p(e,"height",o)},i:Y,o:Y,d(s){s&&B(e)}}}function tm(t,e,n){let r,{start:i}=e,{end:o}=e;return t.$$set=s=>{"start"in s&&n(1,i=s.start),"end"in s&&n(2,o=s.end)},t.$$.update=()=>{t.$$.dirty&6&&n(0,r=re.fromPoints(i,o))},[r,i,o]}class nm extends ve{constructor(e){super(),be(this,e,tm,em,we,{start:1,end:2})}}function rm(t){let e,n,r;return{c(){e=X("defs"),n=X("marker"),r=X("path"),p(r,"d","M 0 0 L 10 5 L 0 10 L 4 5 z"),p(r,"fill","var(--gray-tertiary)"),oh(r,"stroke-width","1"),p(n,"id","arrowhead"),p(n,"viewBox","0 0 10 10"),p(n,"refX","9"),p(n,"refY","5"),p(n,"markerUnits","strokeWidth"),p(n,"markerWidth","10"),p(n,"markerHeight","12"),p(n,"orient","auto")},m(i,o){V(i,e,o),G(e,n),G(n,r)},p:Y,d(i){i&&B(e)}}}function im(t){let e;const n=t[1].default,r=Go(n,t,t[2],null),i=r||rm();return{c(){i&&i.c()},m(o,s){i&&i.m(o,s),e=!0},p(o,s){r&&r.p&&(!e||s&4)&&Yo(r,n,o,o[2],e?qo(n,o[2],s,null):Xo(o[2]),null)},i(o){e||(L(i,o),e=!0)},o(o){j(i,o),e=!1},d(o){i&&i.d(o)}}}function om(t){let e,n;return e=new Ir({props:{self:t[0],$$slots:{default:[im]},$$scope:{ctx:t}}}),{c(){le(e.$$.fragment)},m(r,i){oe(e,r,i),n=!0},p(r,[i]){const o={};i&1&&(o.self=r[0]),i&4&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function sm(t,e,n){let{$$slots:r={},$$scope:i}=e,{self:o}=e;return t.$$set=s=>{"self"in s&&n(0,o=s.self),"$$scope"in s&&n(2,i=s.$$scope)},[o,r,i]}class am extends ve{constructor(e){super(),be(this,e,sm,om,we,{self:0})}}function ji(t,e,n){const r=t.slice();return r[34]=e[n][0],r[35]=e[n][1],r}function zi(t,e,n){const r=t.slice();return r[34]=e[n][0],r[35]=e[n][1],r}function Gi(t,e,n){const r=t.slice();return r[34]=e[n][0],r[40]=e[n][1].name,r[41]=e[n][1].boundingBox,r}function Hi(t,e){let n,r,i;function o(...s){return e[19](e[34],...s)}return r=new Kg({props:{nodeId:e[34],name:e[40],boundingBox:e[41]}}),r.$on("dblclick",o),r.$on("nodeEnter",e[20]),r.$on("nodeLeave",e[21]),{key:t,first:null,c(){n=Ie(),le(r.$$.fragment),this.first=n},m(s,a){V(s,n,a),oe(r,s,a),i=!0},p(s,a){e=s;const l={};a[0]&4&&(l.nodeId=e[34]),a[0]&4&&(l.name=e[40]),a[0]&4&&(l.boundingBox=e[41]),r.$set(l)},i(s){i||(L(r.$$.fragment,s),i=!0)},o(s){j(r.$$.fragment,s),i=!1},d(s){s&&B(n),se(r,s)}}}function qi(t,e){let n,r,i;function o(...s){return e[22](e[34],...s)}return r=new Ar({props:{self:e[35],decoration:e[1].get(e[34])}}),r.$on("click",o),r.$on("nodeEnter",e[23]),r.$on("nodeLeave",e[24]),{key:t,first:null,c(){n=Ie(),le(r.$$.fragment),this.first=n},m(s,a){V(s,n,a),oe(r,s,a),i=!0},p(s,a){e=s;const l={};a[0]&4&&(l.self=e[35]),a[0]&6&&(l.decoration=e[1].get(e[34])),r.$set(l)},i(s){i||(L(r.$$.fragment,s),i=!0)},o(s){j(r.$$.fragment,s),i=!1},d(s){s&&B(n),se(r,s)}}}function Yi(t,e){let n,r,i;function o(...s){return e[25](e[34],...s)}return r=new Ar({props:{self:e[35],decoration:e[1].get(e[34])}}),r.$on("dblclick",o),r.$on("nodeEnter",e[26]),r.$on("nodeLeave",e[27]),{key:t,first:null,c(){n=Ie(),le(r.$$.fragment),this.first=n},m(s,a){V(s,n,a),oe(r,s,a),i=!0},p(s,a){e=s;const l={};a[0]&4&&(l.self=e[35]),a[0]&6&&(l.decoration=e[1].get(e[34])),r.$set(l)},i(s){i||(L(r.$$.fragment,s),i=!0)},o(s){j(r.$$.fragment,s),i=!1},d(s){s&&B(n),se(r,s)}}}function Xi(t){let e,n;return e=new nm({props:{start:t[3].start,end:t[3].end}}),{c(){le(e.$$.fragment)},m(r,i){oe(e,r,i),n=!0},p(r,i){const o={};i[0]&8&&(o.start=r[3].start),i[0]&8&&(o.end=r[3].end),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function lm(t){let e,n,r=[],i=new Map,o,s,a=[],l=new Map,u,c=[],h=new Map,f,d,g,_,E,$,k,y,m,b,M=Se([...t[2].expanded.entries()]);const v=N=>N[34];for(let N=0;N<M.length;N+=1){let x=Gi(t,M,N),A=v(x);i.set(A,r[N]=Hi(A,x))}s=new am({props:{self:t[2].edges}});let O=Se([...t[2].nodes.entries()]);const D=N=>N[34];for(let N=0;N<O.length;N+=1){let x=zi(t,O,N),A=D(x);l.set(A,a[N]=qi(A,x))}let z=Se([...t[2].collapsed.entries()]);const U=N=>N[34];for(let N=0;N<z.length;N+=1){let x=ji(t,z,N),A=U(x);h.set(A,c[N]=Yi(A,x))}let W=t[3].kind==="brushing"&&Xi(t);return g=new Yg({props:{nodeLayouts:t[2].nodes}}),g.$on("nodeEnter",t[28]),g.$on("nodeLeave",t[29]),{c(){e=X("svg"),n=X("g");for(let N=0;N<r.length;N+=1)r[N].c();o=Ie(),le(s.$$.fragment);for(let N=0;N<a.length;N+=1)a[N].c();u=Ie();for(let N=0;N<c.length;N+=1)c[N].c();f=Ie(),W&&W.c(),d=Ie(),le(g.$$.fragment),p(n,"transform",_=t[6].toString()),p(e,"role","figure"),p(e,"width",E=t[0].screenWidth()),p(e,"height",$=t[0].screenHeight()),p(e,"style",k=`cursor: ${t[5]}`)},m(N,x){V(N,e,x),G(e,n);for(let A=0;A<r.length;A+=1)r[A]&&r[A].m(n,null);G(n,o),oe(s,n,null);for(let A=0;A<a.length;A+=1)a[A]&&a[A].m(n,null);G(n,u);for(let A=0;A<c.length;A+=1)c[A]&&c[A].m(n,null);G(n,f),W&&W.m(n,null),G(n,d),oe(g,n,null),t[30](e),y=!0,m||(b=[ie(window,"mousemove",t[9]),ie(window,"mouseup",t[8]),ie(window,"keydown",t[14]),ie(window,"keyup",t[15]),ie(e,"mousedown",t[7]),ie(e,"wheel",t[10])],m=!0)},p(N,x){x[0]&2052&&(M=Se([...N[2].expanded.entries()]),Me(),r=yn(r,x,v,1,N,M,i,n,_n,Hi,o,Gi),Ne());const A={};x[0]&4&&(A.self=N[2].edges),s.$set(A),x[0]&8198&&(O=Se([...N[2].nodes.entries()]),Me(),a=yn(a,x,D,1,N,O,l,n,_n,qi,u,zi),Ne()),x[0]&4102&&(z=Se([...N[2].collapsed.entries()]),Me(),c=yn(c,x,U,1,N,z,h,n,_n,Yi,f,ji),Ne()),N[3].kind==="brushing"?W?(W.p(N,x),x[0]&8&&L(W,1)):(W=Xi(N),W.c(),L(W,1),W.m(n,d)):W&&(Me(),j(W,1,1,()=>{W=null}),Ne());const K={};x[0]&4&&(K.nodeLayouts=N[2].nodes),g.$set(K),(!y||x[0]&64&&_!==(_=N[6].toString()))&&p(n,"transform",_),(!y||x[0]&1&&E!==(E=N[0].screenWidth()))&&p(e,"width",E),(!y||x[0]&1&&$!==($=N[0].screenHeight()))&&p(e,"height",$),(!y||x[0]&32&&k!==(k=`cursor: ${N[5]}`))&&p(e,"style",k)},i(N){if(!y){for(let x=0;x<M.length;x+=1)L(r[x]);L(s.$$.fragment,N);for(let x=0;x<O.length;x+=1)L(a[x]);for(let x=0;x<z.length;x+=1)L(c[x]);L(W),L(g.$$.fragment,N),y=!0}},o(N){for(let x=0;x<r.length;x+=1)j(r[x]);j(s.$$.fragment,N);for(let x=0;x<a.length;x+=1)j(a[x]);for(let x=0;x<c.length;x+=1)j(c[x]);j(W),j(g.$$.fragment,N),y=!1},d(N){N&&B(e);for(let x=0;x<r.length;x+=1)r[x].d();se(s);for(let x=0;x<a.length;x+=1)a[x].d();for(let x=0;x<c.length;x+=1)c[x].d();W&&W.d(),se(g),t[30](null),m=!1,We(b)}}}function um(t){switch(t.kind){case"initial":return"grab";case"panning":return"grabbing";case"brushing":case"awaitBrushing":return"default"}}function cm(t,e,n){let r,i,o,{decorations:s}=e,{drawable:a}=e,{viewport:l}=e,{multiSelection:u}=e;const c=new Zg(l);let h;function f(C){var F;let q=h.createSVGPoint();return"targetTouches"in C?(q.x=C.targetTouches[0].clientX,q.y=C.targetTouches[0].clientY):(q.x=C.clientX,q.y=C.clientY),q=q.matrixTransform((F=h.getScreenCTM())==null?void 0:F.inverse()),q}let d={kind:"initial"};function g(C){if(C.preventDefault(),!("targetTouches"in C)&&C.button!==0)return;const{x:F,y:q}=f(C),Q=l.screenToWorld().apply(F,q);C.shiftKey&&u?n(3,d={kind:"brushing",start:Q,end:Q}):(n(3,d={kind:"panning",start:Q,tmp:new Gr(l.screenWidth(),l.screenHeight(),l.center(),l.scale())}),c.setViewport(d.tmp))}function _(){switch(d.kind){case"initial":return;case"panning":{l.scaleTo(d.tmp.scale());const{x:C,y:F}=d.tmp.center();l.moveTo(C,F),c.setViewport(l),n(3,d={kind:"initial"});break}case"brushing":{const C=re.fromPoints(d.start,d.end),F=[...a.nodes.entries()].filter(([q,Q])=>C.encloses(Q.boundingBox())).map(([q,Q])=>q);y("brush",{nodes:F});break}}n(3,d={kind:"initial"})}function E(C){const{x:F,y:q}=f(C),Q=l.screenToWorld().apply(F,q);switch(d.kind){case"initial":return;case"panning":{const ge=d.start.x-Q.x,ce=d.start.y-Q.y;c.moveBy(ge,ce),n(0,l);break}case"brushing":{n(3,d.end=Q,d);break}}}function $(C){C.preventDefault();const F=-C.deltaY*(C.deltaMode===1?.05:C.deltaMode?1:.002),q=l.scale();if(c.scaleBy(Math.pow(2,F)),q===l.scale())return;const Q=l.center(),{x:ge,y:ce}=f(C),me=l.screenToWorld().apply(ge,ce);c.moveBy(-(Q.x-me.x)*F,-(Q.y-me.y)*F),n(0,l)}async function k(C,F){const q=re.fromCenterAndDimension(C.center,Math.max(l.screenWidth(),C.width),Math.max(l.screenHeight(),C.height)),{x:Q,y:ge}=q.center,ce=Math.min(l.screenWidth()/C.width,l.screenHeight()/C.height)||1;if(F!==void 0&&F){const me=Jg({...l.center(),k:l.scale()},{duration:1e3,easing:Qg});me.subscribe(ke=>{c.moveTo(ke.x,ke.y),c.scaleTo(ke.k),n(0,l)}),await me.set({x:Q,y:ge,k:ce})}else c.moveTo(Q,ge),c.scaleTo(ce),n(0,l)}const y=Ot();function m(C,F){C.stopPropagation(),y("collapse",{nodeId:F})}function b(C,F){C.stopPropagation(),y("expand",{nodeId:F})}function M(C,F){C.stopPropagation(),y("nodeClick",{nodeId:F,original:C})}function v(C){d.kind==="initial"&&C.shiftKey&&u&&n(3,d={kind:"awaitBrushing"})}function O(){d.kind==="awaitBrushing"&&n(3,d={kind:"initial"})}const D=(C,F)=>{m(F,C)};function z(C){Ee.call(this,t,C)}function U(C){Ee.call(this,t,C)}const W=(C,F)=>{M(F,C)};function N(C){Ee.call(this,t,C)}function x(C){Ee.call(this,t,C)}const A=(C,F)=>{b(F,C)};function K(C){Ee.call(this,t,C)}function de(C){Ee.call(this,t,C)}function pe(C){Ee.call(this,t,C)}function _e(C){Ee.call(this,t,C)}function ae(C){rt[C?"unshift":"push"](()=>{h=C,n(4,h)})}return t.$$set=C=>{"decorations"in C&&n(1,s=C.decorations),"drawable"in C&&n(2,a=C.drawable),"viewport"in C&&n(0,l=C.viewport),"multiSelection"in C&&n(16,u=C.multiSelection)},t.$$.update=()=>{t.$$.dirty[0]&1&&n(18,r=l.world()),t.$$.dirty[0]&262149&&c.setScaleExtent({min:Math.min(l.screenWidth()/a.boundingBox.width,l.screenHeight()/a.boundingBox.height)*.5,max:1}).setTranslationExtent(a.boundingBox.padded({l:r.width*.4,r:r.width*.4,t:r.height*.4,b:r.height*.4})),t.$$.dirty[0]&1&&n(6,i=l.worldToScreen().toString()),t.$$.dirty[0]&8&&n(5,o=um(d))},[l,s,a,d,h,o,i,g,_,E,$,m,b,M,v,O,u,k,r,D,z,U,W,N,x,A,K,de,pe,_e,ae]}class hm extends ve{constructor(e){super(),be(this,e,cm,lm,we,{decorations:1,drawable:2,viewport:0,multiSelection:16,setFocus:17},null,[-1,-1])}get setFocus(){return this.$$.ctx[17]}}function fm(t){let e,n,r,i,o,s,a,l,u,c,h,f,d,g,_,E,$;return{c(){e=fe("div"),n=fe("canvas"),r=Ue(),i=X("svg"),o=X("rect"),h=X("rect"),p(n,"class","svelte-133ndzu"),p(o,"fill","rgb(0, 122, 255)"),p(o,"x",s=t[6].x),p(o,"y",a=t[6].y),p(o,"width",l=t[6].w),p(o,"height",u=t[6].h),p(o,"opacity","0.1"),p(o,"style",c=t[5]?"cursor: grabbing":"cursor: grab"),p(h,"fill","none"),p(h,"stroke","rgb(0, 122, 255)"),p(h,"x",f=t[6].x),p(h,"y",d=t[6].y),p(h,"width",g=t[6].w),p(h,"height",_=t[6].h),p(i,"role","navigation"),p(i,"width",t[0]),p(i,"height",t[1]),p(i,"class","svelte-133ndzu"),p(e,"class","container svelte-133ndzu")},m(k,y){V(k,e,y),G(e,n),t[11](n),G(e,r),G(e,i),G(i,o),t[12](o),G(i,h),t[13](i),E||($=ie(i,"mousedown",t[7]),E=!0)},p(k,[y]){y&64&&s!==(s=k[6].x)&&p(o,"x",s),y&64&&a!==(a=k[6].y)&&p(o,"y",a),y&64&&l!==(l=k[6].w)&&p(o,"width",l),y&64&&u!==(u=k[6].h)&&p(o,"height",u),y&32&&c!==(c=k[5]?"cursor: grabbing":"cursor: grab")&&p(o,"style",c),y&64&&f!==(f=k[6].x)&&p(h,"x",f),y&64&&d!==(d=k[6].y)&&p(h,"y",d),y&64&&g!==(g=k[6].w)&&p(h,"width",g),y&64&&_!==(_=k[6].h)&&p(h,"height",_),y&1&&p(i,"width",k[0]),y&2&&p(i,"height",k[1])},i:Y,o:Y,d(k){k&&B(e),t[11](null),t[12](null),t[13](null),E=!1,$()}}}function dm(t,e,n){let r,i;const o=Ot();function s(b){const M=r.worldToScreen().apply(b.xMin,b.yMin),v=r.worldToScreen().apply(b.xMax,b.yMax);return{x:M.x,y:M.y,w:v.x-M.x,h:v.y-M.y}}let{drawable:a}=e,{width:l}=e,{height:u}=e,{worldExtent:c}=e,h,f;function d(b){var M;let v=f.createSVGPoint();v.x=b.clientX,v.y=b.clientY,v=v.matrixTransform((M=f.getScreenCTM())==null?void 0:M.inverse());const O=r.screenToWorld().apply(v.x,v.y);o("viewportCenterDidChange",{center:O})}let g;function _(b){const M=r.screenToWorld().apply(0,0),v=r.screenToWorld().apply(b.dx,b.dy),O=c.center;O.x+=v.x-M.x,O.y+=v.y-M.y,o("viewportCenterDidChange",{center:O})}let E=!1;const $=mu().on("drag",_).on("start",()=>n(5,E=!0)).on("end",()=>n(5,E=!1));Jo(()=>{Ht(g).call($)});function k(b){rt[b?"unshift":"push"](()=>{h=b,n(2,h),n(0,l),n(1,u),n(8,a)})}function y(b){rt[b?"unshift":"push"](()=>{g=b,n(4,g)})}function m(b){rt[b?"unshift":"push"](()=>{f=b,n(3,f)})}return t.$$set=b=>{"drawable"in b&&n(8,a=b.drawable),"width"in b&&n(0,l=b.width),"height"in b&&n(1,u=b.height),"worldExtent"in b&&n(9,c=b.worldExtent)},t.$$.update=()=>{if(t.$$.dirty&3&&n(10,r=new Gr(l,u)),t.$$.dirty&1280&&r.fit(a.boundingBox.padded(2)),t.$$.dirty&512&&n(6,i=s(c)),t.$$.dirty&263&&h){let b=h.getContext("2d");n(2,h.width=l,h),n(2,h.height=u,h),b.fillStyle="white",b.fillRect(0,0,l,u),b.lineWidth=.5;for(const{boundingBox:M}of a.expanded.values()){const v=s(M);b.fillStyle="rgb(250, 250, 250)",b.fillRect(v.x,v.y,v.w,v.h),b.strokeStyle="rgb(134, 134, 139)",b.strokeRect(v.x,v.y,v.w,v.h)}for(const M of a.nodes.values()){const v=s(M.boundingBox());b.fillStyle="rgb(134, 134, 139)",b.fillRect(v.x,v.y,v.w,v.h)}for(const M of a.collapsed.values()){const v=s(M.boundingBox());b.fillStyle="rgb(134, 134, 139)",b.fillRect(v.x,v.y,v.w,v.h)}}},[l,u,h,f,g,E,i,d,a,c,r,k,y,m]}class pm extends ve{constructor(e){super(),be(this,e,dm,fm,we,{drawable:8,width:0,height:1,worldExtent:9})}}function Ui(t,e,n){const r=t.slice();return r[5]=e[n],r[7]=n,r}function gm(t){let e,n;return{c(){e=fe("span"),n=je(t[0]),p(e,"class","svelte-122vmdc")},m(r,i){V(r,e,i),G(e,n)},p(r,i){i&1&&nn(n,r[0])},d(r){r&&B(e)}}}function mm(t){let e,n,r,i,o=Se(t[3]),s=[];for(let c=0;c<o.length;c+=1)s[c]=Zi(Ui(t,o,c));function a(c,h){if(h&6&&(n=null),h&6&&(r=null),n==null&&(n=!!c[1].collapsed.has(c[2])),n)return _m;if(r==null&&(r=!!c[1].expanded.has(c[2])),r)return wm}let l=a(t,-1),u=l&&l(t);return{c(){for(let c=0;c<s.length;c+=1)s[c].c();e=Ue(),u&&u.c(),i=Ie()},m(c,h){for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(c,h);V(c,e,h),u&&u.m(c,h),V(c,i,h)},p(c,h){if(h&8){o=Se(c[3]);let f;for(f=0;f<o.length;f+=1){const d=Ui(c,o,f);s[f]?s[f].p(d,h):(s[f]=Zi(d),s[f].c(),s[f].m(e.parentNode,e))}for(;f<s.length;f+=1)s[f].d(1);s.length=o.length}l!==(l=a(c,h))&&(u&&u.d(1),u=l&&l(c),u&&(u.c(),u.m(i.parentNode,i)))},d(c){c&&(B(e),B(i)),Qo(s,c),u&&u.d(c)}}}function Ki(t){let e;return{c(){e=fe("span"),e.textContent="⟩",p(e,"class","svelte-122vmdc")},m(n,r){V(n,e,r)},d(n){n&&B(e)}}}function Zi(t){let e,n=t[5]+"",r,i,o,s=t[7]<t[3].length-1&&Ki();return{c(){e=fe("span"),r=je(n),i=Ue(),s&&s.c(),o=Ie(),p(e,"class","svelte-122vmdc")},m(a,l){V(a,e,l),G(e,r),V(a,i,l),s&&s.m(a,l),V(a,o,l)},p(a,l){l&8&&n!==(n=a[5]+"")&&nn(r,n),a[7]<a[3].length-1?s||(s=Ki(),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(a){a&&(B(e),B(i),B(o)),s&&s.d(a)}}}function wm(t){let e;return{c(){e=fe("span"),e.textContent="(Double click to collapse)",p(e,"class","svelte-122vmdc")},m(n,r){V(n,e,r)},d(n){n&&B(e)}}}function _m(t){let e;return{c(){e=fe("span"),e.textContent="(Double click to expand)",p(e,"class","svelte-122vmdc")},m(n,r){V(n,e,r)},d(n){n&&B(e)}}}function ym(t){let e;function n(o,s){return o[2]?mm:gm}let r=n(t),i=r(t);return{c(){e=fe("div"),i.c()},m(o,s){V(o,e,s),i.m(e,null)},p(o,[s]){r===(r=n(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e,null)))},i:Y,o:Y,d(o){o&&B(e),i.d()}}}function bm(t,e,n){let r,{defaultText:i="Hover over any node to show more information."}=e,{network:o}=e,{drawable:s}=e,{currentNode:a}=e;return t.$$set=l=>{"defaultText"in l&&n(0,i=l.defaultText),"network"in l&&n(4,o=l.network),"drawable"in l&&n(1,s=l.drawable),"currentNode"in l&&n(2,a=l.currentNode)},t.$$.update=()=>{t.$$.dirty&20&&n(3,r=a?[a,...o.parents(a)].reverse().map(l=>o.node(l).humanReadable()||l):[])},[i,s,a,r,o]}class vm extends ve{constructor(e){super(),be(this,e,bm,ym,we,{defaultText:0,network:4,drawable:1,currentNode:2})}}function Qi(t){let e,n,r;function i(s){t[34](s)}let o={decorations:t[8],drawable:t[15],multiSelection:t[7]};return t[13]!==void 0&&(o.viewport=t[13]),e=new hm({props:o}),t[33](e),rt.push(()=>hh(e,"viewport",i)),e.$on("expand",t[18]),e.$on("collapse",t[19]),e.$on("nodeEnter",t[20]),e.$on("nodeLeave",t[21]),e.$on("nodeClick",t[22]),e.$on("brush",t[25]),{c(){le(e.$$.fragment)},m(s,a){oe(e,s,a),r=!0},p(s,a){const l={};a[0]&256&&(l.decorations=s[8]),a[0]&32768&&(l.drawable=s[15]),a[0]&128&&(l.multiSelection=s[7]),!n&&a[0]&8192&&(n=!0,l.viewport=s[13],lh(()=>n=!1)),e.$set(l)},i(s){r||(L(e.$$.fragment,s),r=!0)},o(s){j(e.$$.fragment,s),r=!1},d(s){t[33](null),se(e,s)}}}function Ji(t){let e,n,r,i,o,s=t[3]&&eo(t),a=t[17]&&to(t),l=t[4]&&no(t);return{c(){e=fe("div"),s&&s.c(),n=Ue(),r=fe("div"),a&&a.c(),i=Ue(),l&&l.c(),p(r,"class","myc-navigation-controls svelte-15hd81r"),p(e,"class","myc-navigation svelte-15hd81r")},m(u,c){V(u,e,c),s&&s.m(e,null),G(e,n),G(e,r),a&&a.m(r,null),G(r,i),l&&l.m(r,null),o=!0},p(u,c){u[3]?s?(s.p(u,c),c[0]&8&&L(s,1)):(s=eo(u),s.c(),L(s,1),s.m(e,n)):s&&(Me(),j(s,1,1,()=>{s=null}),Ne()),u[17]?a?a.p(u,c):(a=to(u),a.c(),a.m(r,i)):a&&(a.d(1),a=null),u[4]?l?l.p(u,c):(l=no(u),l.c(),l.m(r,null)):l&&(l.d(1),l=null)},i(u){o||(L(s),o=!0)},o(u){j(s),o=!1},d(u){u&&B(e),s&&s.d(),a&&a.d(),l&&l.d()}}}function eo(t){let e,n;return e=new vm({props:{network:t[0],currentNode:t[16],drawable:t[15]}}),{c(){le(e.$$.fragment)},m(r,i){oe(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.network=r[0]),i[0]&65536&&(o.currentNode=r[16]),i[0]&32768&&(o.drawable=r[15]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){se(e,r)}}}function to(t){let e,n,r,i;return{c(){e=fe("div"),n=fe("button"),n.textContent="Collapse All",p(n,"class","resetView svelte-15hd81r")},m(o,s){V(o,e,s),G(e,n),r||(i=ie(n,"click",t[35]),r=!0)},p:Y,d(o){o&&B(e),r=!1,i()}}}function no(t){let e,n,r,i;return{c(){e=fe("div"),n=fe("button"),n.textContent="Show All",p(n,"class","resetView svelte-15hd81r")},m(o,s){V(o,e,s),G(e,n),r||(i=ie(n,"click",t[36]),r=!0)},p:Y,d(o){o&&B(e),r=!1,i()}}}function ro(t){let e,n;return{c(){e=je("Powered by "),n=fe("a"),n.textContent="Mycelium",p(n,"href","https://apple.github.io/ml-mycelium"),p(n,"target","_blank"),p(n,"class","svelte-15hd81r")},m(r,i){V(r,e,i),V(r,n,i)},d(r){r&&(B(e),B(n))}}}function io(t){let e,n,r;return n=new pm({props:{width:t[1]*hn,height:t[2]*hn,worldExtent:t[13].world(),drawable:t[15]}}),n.$on("viewportCenterDidChange",t[24]),{c(){e=fe("div"),le(n.$$.fragment),p(e,"class","myc-minimap svelte-15hd81r")},m(i,o){V(i,e,o),oe(n,e,null),r=!0},p(i,o){const s={};o[0]&2&&(s.width=i[1]*hn),o[0]&4&&(s.height=i[2]*hn),o[0]&8192&&(s.worldExtent=i[13].world()),o[0]&32768&&(s.drawable=i[15]),n.$set(s)},i(i){r||(L(n.$$.fragment,i),r=!0)},o(i){j(n.$$.fragment,i),r=!1},d(i){i&&B(e),se(n)}}}function km(t){let e,n=t[0],r,i,o,s,a,l,u,c=Qi(t),h=(t[3]||t[4])&&Ji(t),f=t[5]&&ro(),d=t[6]&&io(t);return{c(){e=fe("div"),c.c(),r=Ue(),h&&h.c(),i=Ue(),o=fe("div"),f&&f.c(),s=Ue(),d&&d.c(),p(o,"class","myc-overlay svelte-15hd81r"),p(e,"class","myc-container svelte-15hd81r")},m(g,_){V(g,e,_),c.m(e,null),G(e,r),h&&h.m(e,null),G(e,i),G(e,o),f&&f.m(o,null),G(e,s),d&&d.m(e,null),a=!0,l||(u=ie(window,"keydown",t[23]),l=!0)},p(g,_){_[0]&1&&we(n,n=g[0])?(Me(),j(c,1,1,Y),Ne(),c=Qi(g),c.c(),L(c,1),c.m(e,r)):c.p(g,_),g[3]||g[4]?h?(h.p(g,_),_[0]&24&&L(h,1)):(h=Ji(g),h.c(),L(h,1),h.m(e,i)):h&&(Me(),j(h,1,1,()=>{h=null}),Ne()),g[5]?f||(f=ro(),f.c(),f.m(o,null)):f&&(f.d(1),f=null),g[6]?d?(d.p(g,_),_[0]&64&&L(d,1)):(d=io(g),d.c(),L(d,1),d.m(e,null)):d&&(Me(),j(d,1,1,()=>{d=null}),Ne())},i(g){a||(L(c),L(h),L(d),a=!0)},o(g){j(c),j(h),j(d),a=!1},d(g){g&&B(e),c.d(g),h&&h.d(),f&&f.d(),d&&d.d(),l=!1,u()}}}const hn=.2;function Em(t,e,n){let r,i,o,s,a=Y,l=()=>(a(),a=fr(O,T=>n(37,s=T)),O),u,c=Y,h=()=>(c(),c=fr(D,T=>n(38,u=T)),D);t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>c());let{network:f}=e,{width:d}=e,{height:g}=e,{showBreadcrumbs:_}=e,{showResetView:E}=e,{watermark:$}=e,{minimap:k}=e,{autoResize:y}=e,{multiSelection:m}=e,{decorations:b=new Map}=e,{collapsed:M=new Set(f.modules())}=e,{layoutProvider:v}=e;const O=yr(new Map);l();const D=yr(new Map);h(),ah(Lr,{selections:O,tooltips:D});const z=new Map,U=Ot();function W(T,H){N.resize(T,H),n(13,N)}let N=new Gr(d,g);Jo(async()=>{await pe()});let x=[],A;function K(T){const{yMin:H,yMax:ee}=T,Z=20,ye=_?25/(N.screenHeight()||1)*(ee-H):0;return T.padded({l:Z,r:Z,t:Z+ye,b:Z})}async function de(T,H){var ee;T=Array.isArray(T)?T:[T];let Z=re.infinity();for(const ye of T){const te=(ee=i.nodes.get(ye))==null?void 0:ee.boundingBox();te&&(Z=Z.union(te))}Z.isEmpty()||await A.setFocus(K(Z),H)}async function pe(T){await A.setFocus(K(i.boundingBox),T)}async function _e(T,H){!m&&T.length>1&&(console.warn("Received multiple selections but `multiSelection` config was set to `false`."),T=[T[0]]);const ee={expand:!0,collapseOthers:{threshold:1e3},...H},{expand:Z,collapse:ye}=Lg(f,T,M,ee);let te=!1;ee.expand&&(Z.size>1&&ee.expand==="single"||Z.size>0&&(Z.forEach(Ge=>M.delete(Ge)),te=!0)),ye.size>0&&ee.collapseOthers!==!1&&(ee.collapseOthers===!0||Ag(f,M)>ee.collapseOthers.threshold)&&(ye.forEach(Ge=>M.add(Ge)),te=!0),te?(n(26,M),await un(),Wn(O,s=new Map(T.map(Ge=>[Ge,new Set])),s),await pe(!0)):Wn(O,s=new Map(T.map(Ge=>[Ge,new Set])),s)}async function ae(T){const H=s;return Wn(O,s=T,s),await un(),H}async function C(){return await ae(new Map)}async function F(){n(26,M=new Set(f.modules())),await pe(!0)}async function q(T){ce(T),M.delete(T.detail.nodeId),n(26,M),await un(),await pe(!0)}async function Q(T){ce(T),M.add(T.detail.nodeId),n(26,M),await un(),await pe(!0)}function ge(T){var H;x[x.length-1]!==T.detail.nodeId&&(x.push(T.detail.nodeId),n(32,x));const ee=T.detail.nodeId,Z=(H=i.nodes.get(ee))==null?void 0:H.options.tooltip;if(Z){const ye=u.get(ee);ye===void 0?z.set(ee,jg(D,ee,Z().build())):ye.state!=="active"&&ye.state!=="pinned"&&Zs(D,ee)}}function ce(T){x.pop(),n(32,x);const H=T.detail.nodeId;clearTimeout(z.get(H)),Qs(D,H)}async function me(T){const H=i.nodes.get(T.detail.nodeId);H!=null&&H.options.selectable&&(m&&T.detail.original.metaKey?ke(await ae(new Map([...s.entries(),[T.detail.nodeId,new Set]]))):ke(await ae(new Map([[T.detail.nodeId,new Set]]))))}function ke(T){const H=([ee,Z])=>({primaryNodeId:ee,secondaryIds:[...Z.values()]});U("selectionDidChange",{selections:[...s.entries()].map(H),previous:[...T.entries()].map(H)})}async function De(T){T.key==="Escape"&&ke(await C())}function ot(T){const{x:H,y:ee}=T.detail.center;N.moveTo(H,ee),n(13,N)}async function J(T){ke(await ae(new Map(T.detail.nodes.map(H=>[H,new Set]))))}function he(T){rt[T?"unshift":"push"](()=>{A=T,n(14,A)})}function At(T){N=T,n(13,N)}const ze=()=>F(),Qe=async()=>{await pe(!0)};return t.$$set=T=>{"network"in T&&n(0,f=T.network),"width"in T&&n(1,d=T.width),"height"in T&&n(2,g=T.height),"showBreadcrumbs"in T&&n(3,_=T.showBreadcrumbs),"showResetView"in T&&n(4,E=T.showResetView),"watermark"in T&&n(5,$=T.watermark),"minimap"in T&&n(6,k=T.minimap),"autoResize"in T&&n(27,y=T.autoResize),"multiSelection"in T&&n(7,m=T.multiSelection),"decorations"in T&&n(8,b=T.decorations),"collapsed"in T&&n(26,M=T.collapsed),"layoutProvider"in T&&n(28,v=T.layoutProvider)},t.$$.update=()=>{t.$$.dirty[0]&67108865&&n(17,r=M.size<f.modules().length),t.$$.dirty[0]&335544321&&n(15,i=v.compute(f,M)),t.$$.dirty[0]&6&&W(d,g),t.$$.dirty[1]&2&&n(16,o=x.at(x.length-1))},[f,d,g,_,E,$,k,m,b,O,D,pe,F,N,A,i,o,r,q,Q,ge,ce,me,De,ot,J,M,y,v,de,_e,C,x,he,At,ze,Qe]}class xm extends ve{constructor(e){super(),be(this,e,Em,km,we,{network:0,width:1,height:2,showBreadcrumbs:3,showResetView:4,watermark:5,minimap:6,autoResize:27,multiSelection:7,decorations:8,collapsed:26,layoutProvider:28,selectionStore:9,tooltipStore:10,setFocus:29,resetFocus:11,setSelections:30,clearSelections:31,collapseAll:12},null,[-1,-1])}get selectionStore(){return this.$$.ctx[9]}get tooltipStore(){return this.$$.ctx[10]}get setFocus(){return this.$$.ctx[29]}get resetFocus(){return this.$$.ctx[11]}get setSelections(){return this.$$.ctx[30]}get clearSelections(){return this.$$.ctx[31]}get collapseAll(){return this.$$.ctx[12]}}class Hr{constructor(e,n){P(this,"decorations"),this.app=e,this.options=n,this.decorations=new Map}static create(e,n,r){const i={width:n.getBoundingClientRect().width,height:n.getBoundingClientRect().height,autoResize:!0,showBreadcrumbs:!0,showResetView:!0,watermark:!0,minimap:!0,layoutProvider:new Pg,multiSelection:!0,...r};i.watermark&&(console.info("╭┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈╮"),console.info("| Powered by the Mycelium network     |"),console.info("| visualizer. For more information:   |"),console.info("| https://apple.github.io/ml-mycelium |"),console.info("╰┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈╯"));const o=new xm({target:n,props:{network:e,...i}});return i.autoResize&&new ResizeObserver(()=>{o.$set({width:n.clientWidth,height:n.clientHeight})}).observe(n),new Hr(o,i)}onSelectionDidChange(e){this.app.$on("selectionDidChange",n=>{e(n.detail)})}async setSelection(e,n){await this.app.setSelections([e],n)}async setSelections(e,n){await this.app.setSelections(e,n)}async collapseAll(){await this.app.collapseAll()}async clearSelections(){await this.app.clearSelections()}async setFocus(e,n){await this.app.setFocus(e,n)}async resetFocus(e){await this.app.resetFocus(e)}setDecoration(e,n){this.decorations.set(e,n),this.app.$set({decorations:this.decorations})}removeDecoration(e){this.decorations.delete(e),this.app.$set({decorations:this.decorations})}clearDecorations(){this.decorations.clear(),this.app.$set({decorations:this.decorations})}setNetwork(e){this.app.$set({network:e,collapsed:new Set(e.modules())})}getOptions(){return this.options}}function Mm(t){let e;return{c(){e=S("div"),I(e,"width",t[0]+"px"),I(e,"height",t[1]+"px"),I(e,"outline","1px dashed lightgrey"),I(e,"border-radius","3px")},m(n,r){Oe(n,e,r),t[5](e)},p(n,[r]){r&1&&I(e,"width",n[0]+"px"),r&2&&I(e,"height",n[1]+"px")},i:Te,o:Te,d(n){n&&Ce(e),t[5](null)}}}function Nm(t,e){function n(r){for(const i of r.out)t.setEdge(r.nodeId,i.nodeId),i.name!=="power"&&n(i)}n(e.source)}function Cm(t,e,n){let{circuit:r}=e,{width:i=500}=e,{height:o=500}=e;function s(f,d=!1,g=!1){let _=d?"yellow":"lightgrey";return new zn.Node(f,new zn.VStack(new zn.Text(f))).with({backgroundColor:_}).with({...g&&{badge:{color:d?"steelblue":"crimson",text:d?"1":"0"}}})}function a(f,d,g=!1,_=!1){f.setNode(d,s(d,g,_))}function l(f,d){let g=0,_=0;function E($){let k=!1,y=!1;$.name==="wire"?($.nodeId="wire"+g,g++):$.name==="switch"?($.nodeId="switch"+_,$.on&&(k=!0),y=!0,_++):$.name==="signal"?($.nodeId="signal",y=!0):($.nodeId="power",k=!0),$.data===1&&(k=!0),a(f,$.nodeId,k,y);for(const m of $.out)m.name==="power"||m.nodeId!==void 0||E(m)}E(d.source)}let u,c;function h(f){Zn[f?"unshift":"push"](()=>{u=f,n(2,u)})}return t.$$set=f=>{"circuit"in f&&n(3,r=f.circuit),"width"in f&&n(0,i=f.width),"height"in f&&n(1,o=f.height)},t.$$.update=()=>{if(t.$$.dirty&28&&u){const f=new zr;r.resetNodeIds(),l(f,r),Nm(f,r),c?(console.log(r),c.setNetwork(f)):n(4,c=Hr.create(f,u,{showBreadcrumbs:!1,minimap:!1,watermark:!1,showResetView:!1}))}},[i,o,u,r,c,h]}class Tm extends pt{constructor(e){super(),dt(this,e,Cm,Mm,ft,{circuit:3,width:0,height:1})}}function oo(t,e,n){const r=t.slice();return r[2]=e[n],r[3]=e,r[4]=n,r}function so(t){let e,n,r,i,o,s=t[0].signal.data===1?"on (1)":"off (0)",a,l=Xr(t[0].other.filter(lo)),u=[];for(let c=0;c<l.length;c+=1)u[c]=ao(oo(t,l,c));return{c(){for(let c=0;c<u.length;c+=1)u[c].c();e=R(),n=S("div"),r=ne("Output Signal "),i=S("div"),o=R(),a=ne(s),I(i,"height","10px"),I(i,"width","10px"),I(i,"background",t[0].signal.data===1?"steelblue":"crimson"),I(n,"display","flex"),I(n,"gap","5px"),I(n,"align-items","center")},m(c,h){for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(c,h);Oe(c,e,h),Oe(c,n,h),w(n,r),w(n,i),w(n,o),w(n,a)},p(c,h){if(h&1){l=Xr(c[0].other.filter(lo));let f;for(f=0;f<l.length;f+=1){const d=oo(c,l,f);u[f]?u[f].p(d,h):(u[f]=ao(d),u[f].c(),u[f].m(e.parentNode,e))}for(;f<u.length;f+=1)u[f].d(1);u.length=l.length}h&1&&I(i,"background",c[0].signal.data===1?"steelblue":"crimson"),h&1&&s!==(s=c[0].signal.data===1?"on (1)":"off (0)")&&Ct(a,s)},d(c){c&&(Ce(e),Ce(n)),na(u,c)}}}function ao(t){let e,n,r=t[2].name+"",i,o,s,a,l,u,c=t[2].on?"on (1)":"off (0)",h,f,d;function g(){return t[1](t[2],t[3],t[4])}return{c(){e=S("div"),n=S("button"),i=ne(r),o=R(),s=ne(t[4]),a=R(),l=S("div"),u=R(),h=ne(c),I(l,"height","10px"),I(l,"width","10px"),I(l,"background",t[2].on?"steelblue":"crimson"),I(e,"display","flex"),I(e,"gap","5px"),I(e,"align-items","center"),I(e,"margin-right","10px")},m(_,E){Oe(_,e,E),w(e,n),w(n,i),w(n,o),w(n,s),w(e,a),w(e,l),w(e,u),w(e,h),f||(d=Sn(n,"click",g),f=!0)},p(_,E){t=_,E&1&&r!==(r=t[2].name+"")&&Ct(i,r),E&1&&I(l,"background",t[2].on?"steelblue":"crimson"),E&1&&c!==(c=t[2].on?"on (1)":"off (0)")&&Ct(h,c)},d(_){_&&Ce(e),f=!1,d()}}}function $m(t){let e,n,r,i=t[0]&&so(t);return n=new Tm({props:{circuit:t[0]}}),{c(){i&&i.c(),e=R(),et(n.$$.fragment)},m(o,s){i&&i.m(o,s),Oe(o,e,s),Ye(n,o,s),r=!0},p(o,[s]){o[0]?i?i.p(o,s):(i=so(o),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null);const a={};s&1&&(a.circuit=o[0]),n.$set(a)},i(o){r||(qe(n.$$.fragment,o),r=!0)},o(o){Je(n.$$.fragment,o),r=!1},d(o){o&&Ce(e),i&&i.d(o),Xe(n,o)}}}const lo=t=>t.name==="switch";function Sm(t,e,n){let{circuit:r}=e;const i=(o,s,a)=>{n(0,s[a].on=!o.on,r),r.reset(),r.simulate()};return t.$$set=o=>{"circuit"in o&&n(0,r=o.circuit)},[r,i]}class Kn extends pt{constructor(e){super(),dt(this,e,Sm,$m,ft,{circuit:0})}}function Im(t){let e,n,r,i,o,s,a,l,u,c,h,f,d,g,_,E,$,k,y,m,b,M,v,O,D,z,U,W,N,x,A,K,de,pe,_e,ae,C,F,q,Q,ge,ce,me,ke,De,ot,J,he,At,ze,Qe,T,H,ee,Z,ye;return E=new ya({}),W=new ka({}),q=new ma({}),J=new Kn({props:{circuit:da()}}),H=new Kn({props:{circuit:ha()}}),Z=new Kn({props:{circuit:fa()}}),{c(){e=S("div"),n=S("details"),r=S("summary"),r.innerHTML="<b>Electrical Sim</b>",i=R(),o=S("div"),o.textContent=`I want to simulate the basic properties of electricity here. I want
			to show that I can create universal boolean logic gates simply by
			modulating electricity.`,s=R(),a=S("div"),a.innerHTML=`<b class="neon" style="--color: cyan;">Question:</b> Why is electricity
			good at representing info?`,l=R(),u=S("div"),u.textContent=`Electricity can be modeled similar to the flow of water (although
			the analogy breaks down in key places). But the point is we can
			propagate a signal over a wire (or pipe).`,c=R(),h=S("div"),h.textContent=`Simply put, I can have a wire where a signal travels down. Depending
			on the material we can change how this signal gets sent (speed,
			power, ...).`,f=R(),d=S("div"),g=S("div"),g.innerHTML=`<b class="neon" style="--color: orange;">Example</b>: using a
				pipe, I could send a signal down a wire to do something at the
				other end. For modeling purposes, this happens instantly.`,_=R(),et(E.$$.fragment),$=R(),k=S("div"),k.textContent=`Now it actually aint this simple. Given I have an electrical signal,
			the electrons don't just bend to my will.`,y=R(),m=S("div"),m.innerHTML=`<b class="neon" style="--color: red;">So How do I coax the electrons to signal?</b>: A quick simple model for getting an electron to do what you want
			is with + and -. Just think of these as two signals. Electrons are
			made up of the - signal and will actively want to move towards +
			signals.`,b=R(),M=S("div"),M.textContent=`In other words, at my example above, I needed the switch side to
			somehow ejects - electrons and have the lightbulb have + that the -
			electrons can move towards. One such way to make the lightbulb +
			like is to remove as many electrons from the lightbulb so that the
			electrons want to move there.`,v=R(),O=S("div"),O.textContent=`This is unfeasible since it also costs energy to do that. Instead,
			leverage the fact that we are ejecting electrons from the switch. In
			other words, as we remove - from the switch, it itself will become +
			like.`,D=R(),z=S("div"),U=ne(`In other words, complete the circuit so to speak. Just add another
			wire that goes past the signal destination (light bulb) back to the
			source.
			`),et(W.$$.fragment),N=R(),x=S("div"),x.textContent=`Note that this only works if the power source stops electrons from
			flowing backwards. This lets the electrons flow over the longer path
			to reach the ++ part of it instead of just staying in the power
			source.`,A=R(),K=S("div"),de=S("b"),de.textContent="Can we encode interesting operations in this simple system?",pe=ne(`: for example, can we encode a few boolean logic gate? If so, then
			we could reconstruct another other logic gate and compute anything
			(also worth revisiting deeply later).`),_e=R(),ae=S("div"),C=S("b"),C.textContent="Not Gate",F=R(),et(q.$$.fragment),Q=R(),ge=S("div"),ge.textContent=`When the switch is off, the output signal is on. But when the switch
			is on the output signal is off. This is because electricity will
			find the shortest path to the + signal. So most of the electrons
			will find there way down the signal once we turn on the switch.`,ce=R(),me=S("div"),me.textContent=`The funny thing is, you can see why electricity represents boolean
			operations so well. In my visualization, to show the property that
			electricity takes the shorter path requires boolean operations in
			the code itself. So it's almost like nature has those properties
			built in, and we just combine them to look nicer in our brain. This
			is a circular argument though because by definition we are
			describing electricity with boolean logic.`,ke=R(),De=S("div"),ot=ne(`To change up notation, here I'll have a graph where wires are also
			nodes and edges just show what is connected to what . Note that if
			there is a branch, two new wires are created. So the not gate in
			this notation looks like
			`),et(J.$$.fragment),he=R(),At=S("div"),ze=S("details"),Qe=S("summary"),Qe.textContent=`In this same notation, you can represent the original
					circuits too`,T=ne(`
				Incomplete circuit:
				`),et(H.$$.fragment),ee=ne(`

				One switch:
				`),et(Z.$$.fragment),nt(r,"class","neon"),I(r,"cursor","pointer"),I(r,"--color","lime"),nt(de,"class","neon"),I(de,"--color","deeppink"),nt(C,"class","neon"),I(C,"--color","fuchsia"),nt(Qe,"class","neon"),I(Qe,"cursor","pointer"),I(Qe,"--color","lime"),n.open=!0},m(te,Ge){Oe(te,e,Ge),w(e,n),w(n,r),w(n,i),w(n,o),w(n,s),w(n,a),w(n,l),w(n,u),w(n,c),w(n,h),w(n,f),w(n,d),w(d,g),w(d,_),Ye(E,d,null),w(n,$),w(n,k),w(n,y),w(n,m),w(n,b),w(n,M),w(n,v),w(n,O),w(n,D),w(n,z),w(z,U),Ye(W,z,null),w(n,N),w(n,x),w(n,A),w(n,K),w(K,de),w(K,pe),w(n,_e),w(n,ae),w(ae,C),w(ae,F),Ye(q,ae,null),w(n,Q),w(n,ge),w(n,ce),w(n,me),w(n,ke),w(n,De),w(De,ot),Ye(J,De,null),w(n,he),w(n,At),w(At,ze),w(ze,Qe),w(ze,T),Ye(H,ze,null),w(ze,ee),Ye(Z,ze,null),ye=!0},p:Te,i(te){ye||(qe(E.$$.fragment,te),qe(W.$$.fragment,te),qe(q.$$.fragment,te),qe(J.$$.fragment,te),qe(H.$$.fragment,te),qe(Z.$$.fragment,te),ye=!0)},o(te){Je(E.$$.fragment,te),Je(W.$$.fragment,te),Je(q.$$.fragment,te),Je(J.$$.fragment,te),Je(H.$$.fragment,te),Je(Z.$$.fragment,te),ye=!1},d(te){te&&Ce(e),Xe(E),Xe(W),Xe(q),Xe(J),Xe(H),Xe(Z)}}}class Om extends pt{constructor(e){super(),dt(this,e,null,Im,ft,{})}}function Pm(t){let e,n,r;return n=new Om({}),{c(){e=S("main"),et(n.$$.fragment),nt(e,"class","svelte-kqkoi6")},m(i,o){Oe(i,e,o),Ye(n,e,null),r=!0},p:Te,i(i){r||(qe(n.$$.fragment,i),r=!0)},o(i){Je(n.$$.fragment,i),r=!1},d(i){i&&Ce(e),Xe(n)}}}class Lm extends pt{constructor(e){super(),dt(this,e,null,Pm,ft,{})}}new Lm({target:document.getElementById("app")});
